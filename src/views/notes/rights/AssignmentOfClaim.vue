<!-- src/views/notes/rights/AssignmentOfClaim.vue -->
<template>
  <div class="assignment-of-claim-page">
    <!-- é¡µé¢å¤´éƒ¨ -->
    <div class="page-header">
      <div class="header-content">
        <div class="breadcrumb">
          <router-link to="/notes">ä¸­æ–‡ç¬”è®°</router-link> &gt; 
          <router-link to="/notes?domain=rights">æƒåˆ©å…³ç³»</router-link> &gt; 
          <span>å€ºæƒè®©æ¸¡</span>
        </div>
        <h1>å€ºæƒè®©æ¸¡</h1>
        <p>æ—¥æœ¬æ°‘æ³•ä¸­çš„å€ºæƒè®©æ¸¡åˆ¶åº¦ï¼Œæ¶‰åŠè®©æ¸¡è¦ä»¶ã€äºŒé‡è®©æ¸¡å¤„ç†ã€é™åˆ¶ç‰¹çº¦æ•ˆåŠ›åŠå€ºåŠ¡äººæŠ—è¾©æƒç­‰é‡è¦å†…å®¹</p>
        
        <!-- å­¦ä¹ ç»Ÿè®¡ -->
        <div class="header-stats">
          <div class="stat-item">
            <span class="stat-number">15</span>
            <span class="stat-label">æ ¸å¿ƒè¦ç‚¹</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">45åˆ†é’Ÿ</span>
            <span class="stat-label">å»ºè®®å­¦ä¹ æ—¶é—´</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">5</span>
            <span class="stat-label">ç»ƒä¹ é¢˜</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">{{ userProgress }}%</span>
            <span class="stat-label">æŒæ¡è¿›åº¦</span>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
      <main class="main-content">
        <!-- å¿«é€Ÿå¯¼èˆª -->
        <div class="quick-nav">
          <h3>æœ¬é¡µå¯¼èˆª</h3>
          <div class="nav-links">
            <a 
              v-for="section in sections" 
              :key="section.id"
              :href="`#${section.id}`"
              class="nav-link"
              @click.prevent="scrollToSection(section.id)"
            >
              <span class="nav-icon">{{ section.icon }}</span>
              {{ section.title }}
            </a>
          </div>
        </div>

        <!-- å­¦ä¹ ç›®æ ‡ -->
        <section class="learning-goals">
          <h2>ğŸ¯ å­¦ä¹ ç›®æ ‡</h2>
          <ul>
            <li>ç†è§£å€ºæƒè®©æ¸¡çš„åŸºæœ¬æ¦‚å¿µå’Œæ³•å¾‹æ€§è´¨</li>
            <li>æŒæ¡å€ºæƒè®©æ¸¡çš„å¯¹æŠ—è¦ä»¶å’Œæ•ˆåŠ›</li>
            <li>ç†Ÿæ‚‰äºŒé‡è®©æ¸¡çš„å¤„ç†è§„åˆ™å’Œä¼˜å…ˆé¡ºåº</li>
            <li>äº†è§£å€ºæƒè®©æ¸¡é™åˆ¶ç‰¹çº¦çš„æ³•å¾‹æ•ˆæœ</li>
            <li>æŒæ¡å€ºåŠ¡äººåœ¨å€ºæƒè®©æ¸¡ä¸­çš„æŠ—è¾©æƒ</li>
          </ul>
        </section>

        <!-- å…³é”®æœ¯è¯­ -->
        <section id="key-terms" class="key-terms">
          <h2>ğŸ”¤ å…³é”®æœ¯è¯­</h2>
          <div class="terms-grid">
            <div 
              v-for="term in keyTerms" 
              :key="term.japanese"
              class="term-card"
            >
              <div class="term-japanese">{{ term.japanese }}</div>
              <div class="term-chinese">{{ term.chinese }}</div>
              <div class="term-explanation">{{ term.explanation }}</div>
              <div class="term-example">{{ term.example }}</div>
            </div>
          </div>
        </section>

        <!-- åŸºæœ¬æ¦‚å¿µ -->
        <section id="basic-concepts" class="content-section">
          <h2>1. å€ºæƒè®©æ¸¡çš„åŸºæœ¬æ¦‚å¿µ</h2>
          
          <h3>å€ºæƒè®©æ¸¡çš„å®šä¹‰</h3>
          <div class="concept-explanation">
            <p>å€ºæƒè®©æ¸¡æ˜¯æŒ‡å€ºæƒäººå°†å…¶å¯¹å€ºåŠ¡äººçš„å€ºæƒè½¬è®©ç»™ç¬¬ä¸‰äººçš„æ³•å¾‹è¡Œä¸ºã€‚å€ºæƒä½œä¸ºè´¢äº§æƒçš„ä¸€ç§ï¼ŒåŸåˆ™ä¸Šå¯ä»¥è‡ªç”±è®©æ¸¡ã€‚</p>
            
            <div class="example-box">
              <h4>ğŸ“ é‡è¦ç‰¹å¾</h4>
              <ul>
                <li>å€ºæƒè®©æ¸¡ä¸éœ€è¦å€ºåŠ¡äººåŒæ„</li>
                <li>åŒ…æ‹¬å·²ç»å‘ç”Ÿçš„å€ºæƒå’Œå°†æ¥å¯èƒ½å‘ç”Ÿçš„å€ºæƒ</li>
                <li>è®©æ¸¡å¯ä»¥æ˜¯æ— å¿ä¹Ÿå¯ä»¥æ˜¯æœ‰å¿</li>
                <li>å³ä½¿æœ‰ç¦æ­¢è®©æ¸¡ç‰¹çº¦ï¼Œè®©æ¸¡è¡Œä¸ºåŸåˆ™ä¸Šä»ç„¶æœ‰æ•ˆ</li>
              </ul>
            </div>
          </div>

          <h3>å€ºæƒè®©æ¸¡ä¸­çš„è§’è‰²</h3>
          <div class="effect-timing">
            <div class="timing-item">
              <div class="timing-icon">ğŸ‘¤</div>
              <div class="timing-content">
                <h4>è®©æ¸¡äºº</h4>
                <p>åŸå€ºæƒäººï¼Œå°†å€ºæƒè½¬è®©ç»™ä»–äººçš„äºº</p>
              </div>
            </div>
            <div class="timing-item">
              <div class="timing-icon">ğŸ‘¥</div>
              <div class="timing-content">
                <h4>è®©å—äºº</h4>
                <p>æ–°å€ºæƒäººï¼Œæ¥å—å€ºæƒè½¬è®©çš„äºº</p>
              </div>
            </div>
            <div class="timing-item">
              <div class="timing-icon">ğŸ’¼</div>
              <div class="timing-content">
                <h4>å€ºåŠ¡äºº</h4>
                <p>éœ€è¦å‘æ–°å€ºæƒäººå±¥è¡Œå€ºåŠ¡çš„äºº</p>
              </div>
            </div>
          </div>

          <h3>æ¡ˆä¾‹è¯´æ˜</h3>
          <div class="case-study">
            <div class="case-item">
              <h4>æ¡ˆä¾‹ï¼šAå°†å¯¹Bçš„å€Ÿæ¬¾å€ºæƒè®©æ¸¡ç»™C</h4>
              <div class="case-steps">
                <div class="step">Aï¼ˆåŸå€ºæƒäººï¼‰å¯¹Bï¼ˆå€ºåŠ¡äººï¼‰æœ‰1000ä¸‡å€Ÿæ¬¾å€ºæƒ</div>
                <div class="step">Aå°†è¯¥å€ºæƒè®©æ¸¡ç»™Cï¼ˆæ–°å€ºæƒäººï¼‰</div>
                <div class="step">Béœ€è¦å‘Cå¿è¿˜1000ä¸‡å€Ÿæ¬¾</div>
                <div class="step">Aéœ€è¦é€šçŸ¥Bå€ºæƒå·²è®©æ¸¡ç»™C</div>
              </div>
            </div>
          </div>
        </section>

        <!-- å¯¹æŠ—è¦ä»¶ -->
        <section id="requirements" class="content-section">
          <h2>2. å€ºæƒè®©æ¸¡çš„å¯¹æŠ—è¦ä»¶</h2>
          
          <h3>å¯¹æŠ—è¦ä»¶çš„å¿…è¦æ€§</h3>
          <div class="requirements-explanation">
            <p>ä¸ºäº†è®©å€ºæƒè®©æ¸¡èƒ½å¤Ÿå¯¹æŠ—å€ºåŠ¡äººå’Œå…¶ä»–ç¬¬ä¸‰äººï¼Œå¿…é¡»æ»¡è¶³æ³•å®šçš„å¯¹æŠ—è¦ä»¶ï¼Œé˜²æ­¢å€ºåŠ¡äººé‡å¤æ¸…å¿ã€‚</p>
            
            <div class="example-box warning">
              <h4>âš ï¸ æ²¡æœ‰å¯¹æŠ—è¦ä»¶çš„é£é™©</h4>
              <p>å¦‚æœæ²¡æœ‰å®Œæˆå¯¹æŠ—è¦ä»¶ï¼Œå€ºåŠ¡äººå‘åŸå€ºæƒäººæ¸…å¿ä»ä¸ºæœ‰æ•ˆï¼Œæ–°å€ºæƒäººæ— æ³•è¦æ±‚å€ºåŠ¡äººé‡æ–°æ¸…å¿ã€‚</p>
            </div>
          </div>

          <h3>å¯¹æŠ—å€ºåŠ¡äººçš„è¦ä»¶</h3>
          <div class="requirements-options">
            <div class="option-item">
              <div class="option-icon">ğŸ“¢</div>
              <div class="option-content">
                <h4>è®©æ¸¡äººé€šçŸ¥</h4>
                <p><strong>è®©æ¸¡äººå‘å€ºåŠ¡äººå‘å‡ºå€ºæƒè®©æ¸¡é€šçŸ¥</strong></p>
                <p>å£å¤´æˆ–ä¹¦é¢å½¢å¼å‡å¯</p>
                <div class="option-note">åŸåˆ™ä¸Šå¿…é¡»ç”±è®©æ¸¡äººäº²è‡ªé€šçŸ¥ï¼Œä»£ç†äººé€šçŸ¥ä¹Ÿæœ‰æ•ˆ</div>
              </div>
            </div>
            <div class="option-item">
              <div class="option-icon">âœï¸</div>
              <div class="option-content">
                <h4>å€ºåŠ¡äººæ‰¿è¯º</h4>
                <p><strong>å€ºåŠ¡äººå¯¹å€ºæƒè®©æ¸¡ä½œå‡ºæ‰¿è¯º</strong></p>
                <p>æ˜ç¡®è¡¨ç¤ºæ¥å—å€ºæƒè®©æ¸¡çš„äº‹å®</p>
                <div class="option-note">æ‰¿è¯ºå¯ä»¥æ˜¯æ˜ç¤ºæˆ–é»˜ç¤ºçš„</div>
              </div>
            </div>
          </div>

          <h3>é€šçŸ¥çš„å½¢å¼è¦æ±‚</h3>
          <div class="notification-forms">
            <div class="form-item">
              <h4>æ™®é€šé€šçŸ¥</h4>
              <ul>
                <li>å£å¤´é€šçŸ¥æœ‰æ•ˆ</li>
                <li>ä¹¦é¢é€šçŸ¥æ›´ä½³</li>
                <li>æ²¡æœ‰ç¡®å®šæ—¥ä»˜è¦æ±‚</li>
              </ul>
            </div>
            <div class="form-item">
              <h4>ç¡®å®šæ—¥ä»˜é€šçŸ¥</h4>
              <ul>
                <li>å†…å®¹è¯æ˜é‚®ä»¶</li>
                <li>å…¬è¯è¯ä¹¦</li>
                <li>ç”¨äºäºŒé‡è®©æ¸¡æ—¶çš„ä¼˜å…ˆæƒç¡®å®š</li>
              </ul>
            </div>
          </div>
        </section>

        <!-- äºŒé‡è®©æ¸¡ -->
        <section id="double-assignment" class="content-section">
          <h2>3. äºŒé‡è®©æ¸¡çš„å¤„ç†è§„åˆ™</h2>
          
          <h3>äºŒé‡è®©æ¸¡çš„æ¦‚å¿µ</h3>
          <div class="double-assignment-concept">
            <p>åŒä¸€å€ºæƒè¢«å¤šæ¬¡è®©æ¸¡ç»™ä¸åŒå—è®©äººçš„æƒ…å†µã€‚æ—¥æœ¬æ°‘æ³•å…è®¸äºŒé‡è®©æ¸¡ï¼Œé€šè¿‡æ˜ç¡®çš„è§„åˆ™ç¡®å®šä¼˜å…ˆé¡ºåºã€‚</p>
            
            <div class="example-box">
              <h4>ğŸ“ äºŒé‡è®©æ¸¡åœºæ™¯</h4>
              <p>Aå°†å¯¹Bçš„1000ä¸‡å€ºæƒå…ˆè®©æ¸¡ç»™Cï¼Œååˆè®©æ¸¡ç»™Dã€‚å½“è¿˜æ¬¾æœŸé™åˆ°æ¥æ—¶ï¼ŒCå’ŒDè°æœ‰æƒè¦æ±‚Bè¿˜æ¬¾ï¼Ÿ</p>
            </div>
          </div>

          <h3>ä¼˜å…ˆé¡ºåºè§„åˆ™</h3>
          <div class="priority-rules">
            <div class="rule-step">
              <div class="step-number">1</div>
              <div class="step-content">
                <h4>ç¬¬ä¸€æ­¥ï¼šçœ‹ç¡®å®šæ—¥ä»˜è¯ä¹¦</h4>
                <p>é¦–å…ˆæ¯”è¾ƒè°æœ‰ç¡®å®šæ—¥ä»˜çš„è¯ä¹¦é€šçŸ¥</p>
                <div class="step-note">æœ‰ç¡®å®šæ—¥ä»˜è¯ä¹¦è€…ä¼˜å…ˆ</div>
              </div>
            </div>
            <div class="rule-step">
              <div class="step-number">2</div>
              <div class="step-content">
                <h4>ç¬¬äºŒæ­¥ï¼šçœ‹åˆ°è¾¾æ—¶é—´</h4>
                <p>å¦‚æœéƒ½æœ‰ç¡®å®šæ—¥ä»˜è¯ä¹¦ï¼Œæ¯”è¾ƒè¯ä¹¦åˆ°è¾¾å€ºåŠ¡äººçš„æ—¶é—´</p>
                <div class="step-note">å…ˆåˆ°è¾¾è€…ä¼˜å…ˆ</div>
              </div>
            </div>
            <div class="rule-step">
              <div class="step-number">3</div>
              <div class="step-content">
                <h4>ç¬¬ä¸‰æ­¥ï¼šç¡®å®šæ—¥ä»˜ä¸é‡è¦</h4>
                <p>ç¡®å®šæ—¥ä»˜çš„å…ˆåä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯åˆ°è¾¾æ—¶é—´</p>
                <div class="step-note warning">æ³¨æ„ï¼šä¸æ˜¯çœ‹ç¡®å®šæ—¥ä»˜çš„æ—¥æœŸï¼</div>
              </div>
            </div>
          </div>

          <h3>å®é™…æ¡ˆä¾‹è§£æ</h3>
          <div class="case-analysis">
            <div class="analysis-item">
              <h4>æ¡ˆä¾‹ï¼šAå°†å€ºæƒäºŒé‡è®©æ¸¡ç»™Cå’ŒD</h4>
              <div class="analysis-details">
                <div class="detail-row">
                  <div class="detail-label">Cçš„é€šçŸ¥ï¼š</div>
                  <div class="detail-value">ç¡®å®šæ—¥ä»˜6æœˆ1æ—¥ï¼Œ6æœˆ4æ—¥åˆ°è¾¾å€ºåŠ¡äººB</div>
                </div>
                <div class="detail-row">
                  <div class="detail-label">Dçš„é€šçŸ¥ï¼š</div>
                  <div class="detail-value">ç¡®å®šæ—¥ä»˜6æœˆ2æ—¥ï¼Œ6æœˆ3æ—¥åˆ°è¾¾å€ºåŠ¡äººB</div>
                </div>
                <div class="detail-row result">
                  <div class="detail-label">ç»“æœï¼š</div>
                  <div class="detail-value"><strong>Dä¼˜å…ˆ</strong>ï¼ˆè™½ç„¶ç¡®å®šæ—¥ä»˜è¾ƒæ™šï¼Œä½†å…ˆåˆ°è¾¾ï¼‰</div>
                </div>
              </div>
            </div>
          </div>

          <h3>ç‰¹æ®Šæƒ…å†µå¤„ç†</h3>
          <div class="special-cases">
            <div class="case-item">
              <h4>åŒæ—¶åˆ°è¾¾çš„æƒ…å†µ</h4>
              <p>å¦‚æœCå’ŒDçš„å¸¦ç¡®å®šæ—¥ä»˜çš„å€ºæƒè®©æ¸¡é€šçŸ¥è¯ä¹¦åŒæ—¶åˆ°è¾¾å€ºåŠ¡äººBï¼Œæ­¤æ—¶Cå’ŒDéƒ½å…·å¤‡å¯¹æŠ—è¦ä»¶ï¼Œå€ºåŠ¡äººBå¯ä»¥å‘ä»»ä½•ä¸€æ–¹æ¸…å¿ã€‚</p>
            </div>
          </div>
        </section>

        <!-- è®©æ¸¡é™åˆ¶ç‰¹çº¦ -->
        <section id="restriction-clause" class="content-section">
          <h2>4. å€ºæƒè®©æ¸¡é™åˆ¶ç‰¹çº¦</h2>
          
          <h3>é™åˆ¶ç‰¹çº¦çš„æ•ˆåŠ›</h3>
          <div class="clause-effectiveness">
            <p>å³ä½¿å€ºæƒäººä¸å€ºåŠ¡äººæœ‰ç¦æ­¢è®©æ¸¡çš„ç‰¹çº¦ï¼Œè®©æ¸¡è¡Œä¸ºåŸåˆ™ä¸Šä»ç„¶æœ‰æ•ˆï¼Œä½†å¯¹æ¶æ„æˆ–é‡å¤§è¿‡å¤±çš„è®©å—äººæœ‰ç‰¹æ®Šè§„åˆ™ã€‚</p>
            
            <div class="example-box">
              <h4>ğŸ“ ç«‹æ³•ç›®çš„</h4>
              <p>ä¸ºäº†ä¿æŠ¤å–„æ„ç¬¬ä¸‰äººï¼Œå¦‚æœè®©æ¸¡æ— æ•ˆï¼Œä¸çŸ¥é“é™åˆ¶ç‰¹çº¦è€Œè´­ä¹°å€ºæƒçš„è®©å—äººå°†é­å—æŸå¤±ã€‚</p>
            </div>
          </div>

          <h3>å¯¹æ¶æ„æˆ–é‡å¤§è¿‡å¤±è®©å—äººçš„é™åˆ¶</h3>
          <div class="restriction-rules">
            <div class="restriction-item">
              <div class="restriction-icon">ğŸš«</div>
              <div class="restriction-content">
                <h4>å€ºåŠ¡äººå¯ä»¥æ‹’ç»å±¥è¡Œ</h4>
                <p><strong>è®©å—äººçŸ¥é“æˆ–åº”å½“çŸ¥é“é™åˆ¶ç‰¹çº¦</strong></p>
                <p>å€ºåŠ¡äººå¯ä»¥å‘æ¶æ„æˆ–é‡å¤§è¿‡å¤±çš„è®©å—äººæ‹’ç»å±¥è¡Œå€ºåŠ¡</p>
              </div>
            </div>
            <div class="restriction-item">
              <div class="restriction-icon">ğŸ’°</div>
              <div class="restriction-content">
                <h4>å‘åŸå€ºæƒäººæ¸…å¿æœ‰æ•ˆ</h4>
                <p><strong>å€ºåŠ¡äººå‘åŸå€ºæƒäººæ¸…å¿å¯ä»¥å¯¹æŠ—è®©å—äºº</strong></p>
                <p>å³ä½¿å€ºæƒå·²è®©æ¸¡ï¼Œå€ºåŠ¡äººå‘åŸå€ºæƒäººæ¸…å¿ä»ä¸ºæœ‰æ•ˆ</p>
              </div>
            </div>
          </div>

          <h3>å®åŠ¡åº”ç”¨è¦ç‚¹</h3>
          <div class="practical-tips">
            <div class="tip-item">
              <h4>è®©å—äººçš„å°½èŒè°ƒæŸ¥</h4>
              <p>åœ¨å—è®©å€ºæƒå‰ï¼Œåº”è°ƒæŸ¥æ˜¯å¦å­˜åœ¨è®©æ¸¡é™åˆ¶ç‰¹çº¦ï¼Œé¿å…è¢«è®¤å®šä¸ºæ¶æ„æˆ–é‡å¤§è¿‡å¤±ã€‚</p>
            </div>
            <div class="tip-item">
              <h4>å€ºåŠ¡äººçš„ä¿æŠ¤</h4>
              <p>å€ºåŠ¡äººåº”åœ¨åˆåŒä¸­æ˜ç¡®è®°è½½è®©æ¸¡é™åˆ¶æ¡æ¬¾ï¼Œå¹¶åœ¨å€ºæƒè®©æ¸¡å‘ç”Ÿæ—¶åŠæ—¶ä¸»å¼ æƒåˆ©ã€‚</p>
            </div>
          </div>
        </section>

        <!-- å€ºåŠ¡äººæŠ—è¾©æƒ -->
        <section id="debtor-defense" class="content-section">
          <h2>5. å€ºåŠ¡äººçš„æŠ—è¾©æƒ</h2>
          
          <h3>æŠ—è¾©æƒçš„æ³•å¾‹åŸºç¡€</h3>
          <div class="defense-basis">
            <p>å€ºæƒè®©æ¸¡ä¸åº”æŸå®³å€ºåŠ¡äººçš„æ—¢å¾—æƒåˆ©ï¼Œå€ºåŠ¡äººå¯ä»¥åŸºäºè®©æ¸¡å‰å‘ç”Ÿçš„äº‹ç”±å¯¹æŠ—æ–°çš„å€ºæƒäººã€‚</p>
          </div>

          <h3>ä¸»è¦çš„æŠ—è¾©äº‹ç”±</h3>
          <div class="defense-reasons">
            <div class="reason-item">
              <div class="reason-icon">âš–ï¸</div>
              <div class="reason-content">
                <h4>é€šçŸ¥å‰çš„æŠ—è¾©äº‹ç”±</h4>
                <p>å€ºåŠ¡äººå¯ä»¥åŸºäºé€šçŸ¥æˆ–æ‰¿è¯ºå‰å·²å‘ç”Ÿçš„æŠ—è¾©äº‹ç”±å¯¹æŠ—è®©å—äºº</p>
                <div class="reason-example">
                  <strong>æ¡ˆä¾‹ï¼š</strong>Bå·²å‘Aå¿è¿˜300ä¸‡ï¼ŒAä»æŒ‰1000ä¸‡è®©æ¸¡ç»™Cï¼ŒBå¯ä»¥ä¸»å¼ å€ºæƒåªå‰©700ä¸‡
                </div>
              </div>
            </div>
            <div class="reason-item">
              <div class="reason-icon">ğŸ”„</div>
              <div class="reason-content">
                <h4>æŠµé”€æƒ</h4>
                <p>å€ºåŠ¡äººå¯¹åŸå€ºæƒäººçš„å€ºæƒå¯ä»¥æŠµé”€è¢«è®©æ¸¡çš„å€ºæƒ</p>
                <div class="reason-example">
                  <strong>æ¡ˆä¾‹ï¼š</strong>Bå¯¹Aæœ‰1000ä¸‡å€ºæƒï¼Œå¯ä»¥æŠµé”€Aè®©æ¸¡ç»™Cçš„1000ä¸‡å€ºæƒ
                </div>
              </div>
            </div>
            <div class="reason-item">
              <div class="reason-icon">âœ…</div>
              <div class="reason-content">
                <h4>å·²å‘åŸå€ºæƒäººæ¸…å¿</h4>
                <p>åœ¨å…·å¤‡å¯¹æŠ—è¦ä»¶å‰ï¼Œå€ºåŠ¡äººå‘åŸå€ºæƒäººæ¸…å¿æœ‰æ•ˆ</p>
                <div class="reason-example">
                  <strong>æ¡ˆä¾‹ï¼š</strong>Båœ¨æ”¶åˆ°è®©æ¸¡é€šçŸ¥å‰å·²å‘Aæ¸…å¿ï¼Œå¯¹Cä¸æ‰¿æ‹…æ¸…å¿è´£ä»»
                </div>
              </div>
            </div>
          </div>

          <h3>æŠµé”€æƒçš„è¡Œä½¿æ¡ä»¶</h3>
          <div class="setoff-conditions">
            <div class="condition-item">
              <h4>æ—¶é—´è¦æ±‚</h4>
              <p>å¿…é¡»åœ¨è®©å—äººå…·å¤‡å¯¹æŠ—è¦ä»¶ä¹‹å‰ä¸»å¼ æŠµé”€</p>
            </div>
            <div class="condition-item">
              <h4>å€ºæƒè¦æ±‚</h4>
              <p>æŠµé”€çš„å€ºæƒå¿…é¡»åœ¨è®©æ¸¡å‰å·²ç»å­˜åœ¨</p>
            </div>
            <div class="condition-item">
              <h4>æ¸…å¿æœŸè¦æ±‚</h4>
              <p>æŠµé”€çš„å€ºæƒå¿…é¡»å·²åˆ°æ¸…å¿æœŸ</p>
            </div>
          </div>
        </section>

        <!-- å®åŠ¡è¦ç‚¹ -->
        <section id="practical-points" class="content-section">
          <h2>6. å®åŠ¡è¦ç‚¹æ€»ç»“</h2>
          
          <h3>å€ºæƒè®©æ¸¡çš„æ“ä½œæµç¨‹</h3>
          <div class="operation-flow">
            <div class="flow-step">
              <div class="step-number">1</div>
              <div class="step-content">
                <h4>ç­¾è®¢è®©æ¸¡åˆåŒ</h4>
                <p>è®©æ¸¡äººä¸è®©å—äººç­¾è®¢å€ºæƒè®©æ¸¡åˆåŒ</p>
              </div>
            </div>
            <div class="flow-step">
              <div class="step-number">2</div>
              <div class="step-content">
                <h4>å‡†å¤‡é€šçŸ¥æ–‡ä»¶</h4>
                <p>å‡†å¤‡å†…å®¹è¯æ˜é‚®ä»¶ç­‰ç¡®å®šæ—¥ä»˜è¯ä¹¦</p>
              </div>
            </div>
            <div class="flow-step">
              <div class="step-number">3</div>
              <div class="step-content">
                <h4>é€šçŸ¥å€ºåŠ¡äºº</h4>
                <p>åŠæ—¶å‘å€ºåŠ¡äººå‘å‡ºå€ºæƒè®©æ¸¡é€šçŸ¥</p>
              </div>
            </div>
            <div class="flow-step">
              <div class="step-number">4</div>
              <div class="step-content">
                <h4>ä¿å­˜è¯æ®</h4>
                <p>å¦¥å–„ä¿å­˜é€šçŸ¥å’Œæ‰¿è¯ºçš„ç›¸å…³è¯æ®</p>
              </div>
            </div>
          </div>

          <h3>é£é™©é˜²èŒƒæªæ–½</h3>
          <div class="risk-prevention">
            <div class="prevention-item">
              <h4>ğŸ” å°½èŒè°ƒæŸ¥</h4>
              <ul>
                <li>è°ƒæŸ¥å€ºæƒæ˜¯å¦å­˜åœ¨é™åˆ¶ç‰¹çº¦</li>
                <li>ç¡®è®¤å€ºæƒæ˜¯å¦å·²è¢«è®©æ¸¡</li>
                <li>æ ¸å®å€ºåŠ¡äººçš„æ¸…å¿èƒ½åŠ›</li>
              </ul>
            </div>
            <div class="prevention-item">
              <h4>ğŸ“„ æ–‡ä»¶ç®¡ç†</h4>
              <ul>
                <li>ä½¿ç”¨å†…å®¹è¯æ˜é‚®ä»¶è¿›è¡Œé€šçŸ¥</li>
                <li>ä¿å­˜ç¡®å®šæ—¥ä»˜è¯ä¹¦åŸä»¶</li>
                <li>è®°å½•é€šçŸ¥åˆ°è¾¾æ—¶é—´</li>
              </ul>
            </div>
            <div class="prevention-item">
              <h4>âš–ï¸ æ³•å¾‹ç¡®è®¤</h4>
              <ul>
                <li>ç¡®è®¤è®©æ¸¡åˆåŒçš„åˆæ³•æ€§</li>
                <li>å®¡æŸ¥å€ºåŠ¡äººçš„æŠ—è¾©äº‹ç”±</li>
                <li>è¯„ä¼°äºŒé‡è®©æ¸¡çš„é£é™©</li>
              </ul>
            </div>
          </div>

          <h3>å¸¸è§é—®é¢˜è§£ç­”</h3>
          <div class="faq-section">
            <div class="faq-item">
              <h4>Q: å€ºæƒè®©æ¸¡éœ€è¦å€ºåŠ¡äººåŒæ„å—ï¼Ÿ</h4>
              <p>A: ä¸éœ€è¦å€ºåŠ¡äººåŒæ„ï¼Œä½†éœ€è¦é€šçŸ¥å€ºåŠ¡äººæˆ–è·å¾—å€ºåŠ¡äººæ‰¿è¯ºæ‰èƒ½å¯¹æŠ—å€ºåŠ¡äººã€‚</p>
            </div>
            <div class="faq-item">
              <h4>Q: ç¦æ­¢è®©æ¸¡ç‰¹çº¦çš„æ•ˆåŠ›å¦‚ä½•ï¼Ÿ</h4>
              <p>A: å³ä½¿æœ‰ç¦æ­¢è®©æ¸¡ç‰¹çº¦ï¼Œè®©æ¸¡è¡Œä¸ºä»ç„¶æœ‰æ•ˆï¼Œä½†å¯¹æ¶æ„æˆ–é‡å¤§è¿‡å¤±çš„è®©å—äººï¼Œå€ºåŠ¡äººå¯ä»¥æ‹’ç»å±¥è¡Œã€‚</p>
            </div>
            <div class="faq-item">
              <h4>Q: äºŒé‡è®©æ¸¡æ—¶å¦‚ä½•ç¡®å®šä¼˜å…ˆæƒï¼Ÿ</h4>
              <p>A: é¦–å…ˆçœ‹è°æœ‰ç¡®å®šæ—¥ä»˜è¯ä¹¦ï¼Œå¦‚æœéƒ½æœ‰åˆ™çœ‹è°çš„è¯ä¹¦å…ˆåˆ°è¾¾å€ºåŠ¡äººï¼Œç¡®å®šæ—¥ä»˜çš„æ—¥æœŸä¸é‡è¦ã€‚</p>
            </div>
          </div>
        </section>

        <!-- ç»ƒä¹ é¢˜ -->
        <section id="quiz" class="quiz-section">
          <h2>âœï¸ ç»ƒä¹ é¢˜</h2>
          
          <div 
            v-for="(quiz, index) in quizzes" 
            :key="index"
            class="quiz-item"
          >
            <div class="quiz-question">{{ quiz.question }}</div>
            <div class="quiz-options">
              <div 
                v-for="option in quiz.options" 
                :key="option.text"
                class="quiz-option"
                :class="{ 
                  'selected': selectedAnswers[index] === option.text,
                  'correct': showAnswers && option.correct,
                  'incorrect': showAnswers && selectedAnswers[index] === option.text && !option.correct
                }"
                @click="selectAnswer(index, option.text)"
              >
                {{ option.text }}
              </div>
            </div>
            <div class="quiz-actions">
              <button class="answer-btn" @click="toggleAnswer(index)">
                {{ showAnswerIndex === index ? 'éšè—ç­”æ¡ˆ' : 'æ˜¾ç¤ºç­”æ¡ˆ' }}
              </button>
            </div>
            <div 
              v-if="showAnswerIndex === index" 
              class="answer-explanation"
            >
              <strong>ç­”æ¡ˆï¼š</strong> {{ getCorrectAnswer(quiz) }}<br>
              <strong>ä¸­æ–‡è§£é‡Šï¼š</strong> {{ quiz.explanation }}
            </div>
          </div>

          <div class="quiz-footer-actions">
            <button class="btn btn-primary" @click="checkAllAnswers">
              æ£€æŸ¥å…¨éƒ¨ç­”æ¡ˆ
            </button>
            <button class="btn btn-outline" @click="resetQuiz">
              é‡æ–°ç»ƒä¹ 
            </button>
          </div>
        </section>

        <!-- åº•éƒ¨è¡ŒåŠ¨æŒ‰é’® -->
        <div class="action-buttons">
          <router-link to="/video?topic=assignment-of-claim" class="action-button video">
            <span>ğŸ“º</span>
            è§‚çœ‹ç›¸å…³è§†é¢‘
          </router-link>
          <router-link to="/practice?topic=assignment-of-claim" class="action-button">
            <span>ğŸ“</span>
            å¼€å§‹å¼ºåŒ–ç»ƒä¹ 
          </router-link>
          <router-link to="/notes?domain=rights" class="action-button">
            <span>ğŸ“š</span>
            è¿”å›æƒåˆ©å…³ç³»
          </router-link>
        </div>
      </main>
    </div>
  </div>
</template>

<script setup>
import { ref, computed, onMounted, onUnmounted } from 'vue'
import { useLearningStore } from '@/stores/learning'
import { useRouter } from 'vue-router'

const learningStore = useLearningStore()
const router = useRouter()

// ç”¨æˆ·å­¦ä¹ è¿›åº¦
const userProgress = ref(0)
const startTime = ref(new Date())

// é¡µé¢ç« èŠ‚å¯¼èˆª
const sections = [
  { id: 'key-terms', title: 'å…³é”®æœ¯è¯­', icon: 'ğŸ”¤' },
  { id: 'basic-concepts', title: 'åŸºæœ¬æ¦‚å¿µ', icon: 'ğŸ“–' },
  { id: 'requirements', title: 'å¯¹æŠ—è¦ä»¶', icon: 'âš–ï¸' },
  { id: 'double-assignment', title: 'äºŒé‡è®©æ¸¡', icon: 'ğŸ”„' },
  { id: 'restriction-clause', title: 'é™åˆ¶ç‰¹çº¦', icon: 'ğŸš«' },
  { id: 'debtor-defense', title: 'å€ºåŠ¡äººæŠ—è¾©', icon: 'ğŸ›¡ï¸' },
  { id: 'practical-points', title: 'å®åŠ¡è¦ç‚¹', icon: 'ğŸ’¼' },
  { id: 'quiz', title: 'ç»ƒä¹ é¢˜', icon: 'âœï¸' }
]

// å…³é”®æœ¯è¯­æ•°æ®
const keyTerms = [
  {
    japanese: 'å‚µæ¨©è­²æ¸¡ï¼ˆã•ã„ã‘ã‚“ã˜ã‚‡ã†ã¨ï¼‰',
    chinese: 'å€ºæƒè®©æ¸¡',
    explanation: 'å°†å€ºæƒä»åŸå€ºæƒäººï¼ˆè®©æ¸¡äººï¼‰è½¬ç§»ç»™æ–°å€ºæƒäººï¼ˆè®©å—äººï¼‰çš„æ³•å¾‹è¡Œä¸º',
    example: 'Aå°†å¯¹Bçš„1000ä¸‡å€Ÿæ¬¾å€ºæƒè®©æ¸¡ç»™C'
  },
  {
    japanese: 'å¯¾æŠ—è¦ä»¶ï¼ˆãŸã„ã“ã†ã‚ˆã†ã‘ã‚“ï¼‰',
    chinese: 'å¯¹æŠ—è¦ä»¶',
    explanation: 'å€ºæƒè®©æ¸¡è¦å¯¹æŠ—å€ºåŠ¡äººå’Œå…¶ä»–ç¬¬ä¸‰äººå¿…é¡»æ»¡è¶³çš„æ³•å®šæ¡ä»¶',
    example: 'è®©æ¸¡äººå¯¹å€ºåŠ¡äººçš„é€šçŸ¥æˆ–å€ºåŠ¡äººçš„æ‰¿è¯º'
  },
  {
    japanese: 'ç¢ºå®šæ—¥ä»˜ï¼ˆã‹ãã¦ã„ã²ã¥ã‘ï¼‰',
    chinese: 'ç¡®å®šæ—¥æœŸ',
    explanation: 'å…¬è¯äººè¯æ˜çš„ä¸å¯æ›´æ”¹çš„æ—¥æœŸï¼Œç”¨äºç¡®å®šæ³•å¾‹è¡Œä¸ºçš„å…ˆåé¡ºåº',
    example: 'å†…å®¹è¯æ˜é‚®ä»¶ã€å…¬è¯è¯ä¹¦ä¸Šçš„æ—¥æœŸ'
  },
  {
    japanese: 'äºŒé‡è­²æ¸¡ï¼ˆã«ã˜ã‚…ã†ã˜ã‚‡ã†ã¨ï¼‰',
    chinese: 'äºŒé‡è®©æ¸¡',
    explanation: 'åŒä¸€å€ºæƒè¢«å¤šæ¬¡è®©æ¸¡ç»™ä¸åŒå—è®©äººçš„æƒ…å†µ',
    example: 'Aå°†å€ºæƒå…ˆè®©æ¸¡ç»™Cï¼Œååˆè®©æ¸¡ç»™D'
  },
  {
    japanese: 'ç›¸æ®ºæ¨©ï¼ˆãã†ã•ã„ã‘ã‚“ï¼‰',
    chinese: 'æŠµé”€æƒ',
    explanation: 'å€ºåŠ¡äººå¯ä»¥ç”¨è‡ªå·±å¯¹åŸå€ºæƒäººçš„å€ºæƒæŠµé”€è¢«è®©æ¸¡çš„å€ºæƒ',
    example: 'Bå¯¹Aæœ‰1000ä¸‡å€ºæƒï¼Œå¯ä»¥æŠµé”€Aè®©æ¸¡ç»™Cçš„å€ºæƒ'
  }
]

// ç»ƒä¹ é¢˜æ•°æ®
const quizzes = [
  {
    question: 'å‚µæ¨©ã®è­²æ¸¡ã¯ã€å½“äº‹è€…é–“ã«è­²æ¸¡ç¦æ­¢ã®ç‰¹ç´„ãŒã‚ã‚‹å ´åˆã«ã¯ã€ç„¡åŠ¹ã§ã‚ã‚‹ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: false },
      { text: 'âœ• (èª¤ã‚Š)', correct: true }
    ],
    explanation: 'å³ä½¿æœ‰è®©æ¸¡ç¦æ­¢ç‰¹çº¦ï¼Œè®©æ¸¡è¡Œä¸ºä»ç„¶æœ‰æ•ˆï¼Œä½†æ¶æ„æˆ–é‡å¤§è¿‡å¤±çš„è®©å—äººï¼Œå€ºåŠ¡äººå¯ä»¥æ‹’ç»å±¥è¡Œã€‚'
  },
  {
    question: 'å‚µæ¨©ã®äºŒé‡è­²æ¸¡ãŒè¡Œã‚ã‚ŒãŸå ´åˆã€ç¢ºå®šæ—¥ä»˜ã®ã‚ã‚‹è¨¼æ›¸ã«ã‚ˆã‚‹é€šçŸ¥ã®å…ˆå¾Œã«ã‚ˆã£ã¦å„ªå…ˆé †ä½ãŒæ±ºã¾ã‚‹ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: false },
      { text: 'âœ• (èª¤ã‚Š)', correct: true }
    ],
    explanation: 'äºŒé‡è®©æ¸¡æ—¶ï¼Œä¼˜å…ˆé¡ºåºç”±é€šçŸ¥åˆ°è¾¾å€ºåŠ¡äººçš„å…ˆåå†³å®šï¼Œè€Œä¸æ˜¯ç¡®å®šæ—¥ä»˜çš„å…ˆåã€‚'
  },
  {
    question: 'å‚µå‹™è€…ã¯ã€è­²æ¸¡ã®é€šçŸ¥åˆã¯æ‰¿è«¾å‰ã«ç”Ÿã˜ãŸäº‹ç”±ã«åŸºã¥ã„ã¦ã€è­²å—äººã«å¯¾ã—ã¦æŠ—å¼ã‚’ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: true },
      { text: 'âœ• (èª¤ã‚Š)', correct: false }
    ],
    explanation: 'å€ºåŠ¡äººå¯ä»¥åŸºäºé€šçŸ¥æˆ–æ‰¿è¯ºå‰å‘ç”Ÿçš„äº‹ç”±å¯¹æŠ—æ–°çš„å€ºæƒäººã€‚'
  },
  {
    question: 'å‚µæ¨©è­²æ¸¡ã®å¯¹æŠ—è¦ä»¶ã¯ã€æ›¸é¢ã«ã‚ˆã‚‹é€šçŸ¥åˆã¯æ‰¿è«¾ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: false },
      { text: 'âœ• (èª¤ã‚Š)', correct: true }
    ],
    explanation: 'å€ºæƒè®©æ¸¡çš„å¯¹æŠ—è¦ä»¶ï¼Œå£å¤´å½¢å¼çš„é€šçŸ¥æˆ–æ‰¿è¯ºä¹Ÿå¯ä»¥ã€‚'
  },
  {
    question: 'å‚µæ¨©ã®è­²æ¸¡åˆ¶é™ç‰¹ç´„ãŒã‚ã‚‹ã“ã¨ã‚’çŸ¥ã‚‰ãšã«å‚µæ¨©ã‚’è­²ã‚Šå—ã‘ãŸè­²å—äººã¯ã€å¸¸ã«å‚µå‹™è€…ã«å¯¾ã—ã¦å‚µæ¨©ã®å±¥è¡Œã‚’è«‹æ±‚ã§ãã‚‹ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: false },
      { text: 'âœ• (èª¤ã‚Š)', correct: true }
    ],
    explanation: 'å¦‚æœè®©å—äººæœ‰é‡å¤§è¿‡å¤±è€Œä¸çŸ¥é“é™åˆ¶ç‰¹çº¦ï¼Œå€ºåŠ¡äººä¹Ÿå¯ä»¥æ‹’ç»å±¥è¡Œã€‚'
  }
]

// ç­”é¢˜çŠ¶æ€
const selectedAnswers = ref(Array(quizzes.length).fill(null))
const showAnswerIndex = ref(null)
const showAnswers = ref(false)

// æ–¹æ³•
const scrollToSection = (sectionId) => {
  const element = document.getElementById(sectionId)
  if (element) {
    element.scrollIntoView({ behavior: 'smooth' })
  }
}

const selectAnswer = (index, answer) => {
  selectedAnswers.value[index] = answer
  // æ›´æ–°å­¦ä¹ è¿›åº¦
  updateProgress()
}

const toggleAnswer = (index) => {
  showAnswerIndex.value = showAnswerIndex.value === index ? null : index
}

const getCorrectAnswer = (quiz) => {
  const correctOption = quiz.options.find(option => option.correct)
  return correctOption ? correctOption.text : ''
}

const checkAllAnswers = () => {
  showAnswers.value = true
  updateProgress()
}

const resetQuiz = () => {
  selectedAnswers.value = Array(quizzes.length).fill(null)
  showAnswers.value = false
  showAnswerIndex.value = null
  userProgress.value = 0
}

const updateProgress = () => {
  const total = quizzes.length
  const correct = quizzes.reduce((count, quiz, index) => {
    const selected = selectedAnswers.value[index]
    if (!selected) return count
    
    const isCorrect = quiz.options.find(opt => opt.text === selected)?.correct || false
    return count + (isCorrect ? 1 : 0)
  }, 0)
  
  userProgress.value = Math.round((correct / total) * 100)
}

// è®°å½•å­¦ä¹ æ—¶é—´
const recordStudyTime = () => {
  const currentTime = new Date()
  const studyTime = Math.floor((currentTime - startTime.value) / 1000) // è½¬æ¢ä¸ºç§’
  learningStore.recordTopicStudyTime('assignment-of-claim', studyTime)
}

// æ ‡è®°çŸ¥è¯†ç‚¹å®Œæˆ
const markTopicCompleted = () => {
  learningStore.completeTopic('assignment-of-claim')
}

// åˆå§‹åŒ–
onMounted(() => {
  // ä»å­¦ä¹ å­˜å‚¨åŠ è½½è¿›åº¦
  const progress = learningStore.getTopicProgress('assignment-of-claim')
  if (progress) {
    userProgress.value = progress.completionPercentage
  }
  
  // è®°å½•ç”¨æˆ·å¼€å§‹å­¦ä¹ è¿™ä¸ªçŸ¥è¯†ç‚¹
  learningStore.recordTopicStudyTime('assignment-of-claim', 0)
  
  // è®¾ç½®å®šæ—¶å™¨ï¼Œæ¯30ç§’è®°å½•ä¸€æ¬¡å­¦ä¹ æ—¶é—´
  const timer = setInterval(() => {
    recordStudyTime()
  }, 30000)
  
  onUnmounted(() => {
    clearInterval(timer)
    // ç»„ä»¶å¸è½½æ—¶è®°å½•æ€»å­¦ä¹ æ—¶é—´
    recordStudyTime()
  })
})
</script>

<style scoped>
.assignment-of-claim-page {
  min-height: 100vh;
  background-color: #f8f9fa;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 2rem;
}

/* ========= é¡µé¢å¤´éƒ¨ ========= */
.page-header {
  background: linear-gradient(135deg, rgba(42, 121, 96, 0.05), rgba(42, 121, 96, 0.02));
  border-radius: 12px;
  padding: 2rem;
  margin: 1rem 0 2rem;
  text-align: center;
}

.breadcrumb {
  font-size: 0.875rem;
  color: #6c757d;
  margin-bottom: 1rem;
}

.breadcrumb a {
  color: #2a7960;
  text-decoration: none;
}

.breadcrumb a:hover {
  text-decoration: underline;
}

.header-content h1 {
  font-size: 2.25rem;
  font-weight: 800;
  color: #1a472a;
  margin-bottom: 1rem;
}

.header-content p {
  font-size: 1.125rem;
  color: #6c757d;
  max-width: 700px;
  margin: 0 auto 2rem;
  line-height: 1.6;
}

.header-stats {
  display: flex;
  justify-content: center;
  gap: 3rem;
  flex-wrap: wrap;
}

.stat-item {
  text-align: center;
}

.stat-number {
  display: block;
  font-size: 1.75rem;
  font-weight: 700;
  color: #2a7960;
  margin-bottom: 0.25rem;
}

.stat-label {
  font-size: 0.875rem;
  color: #6c757d;
}

/* ========= ä¸»è¦å†…å®¹åŒºåŸŸ ========= */
.main-content {
  margin: 2rem 0;
}

/* ========= å¿«é€Ÿå¯¼èˆª ========= */
.quick-nav {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  margin-bottom: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.quick-nav h3 {
  font-size: 1.25rem;
  font-weight: 600;
  color: #1a472a;
  margin-bottom: 1rem;
}

.nav-links {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 0.75rem;
}

.nav-link {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  background: #f8f9fa;
  border-radius: 8px;
  text-decoration: none;
  color: #333;
  transition: all 0.2s ease;
  border: none;
  cursor: pointer;
  font-family: inherit;
  font-size: 0.875rem;
}

.nav-link:hover {
  background: #e9ecef;
  color: #1a472a;
  transform: translateY(-2px);
}

.nav-icon {
  font-size: 1.125rem;
}

/* ========= å­¦ä¹ ç›®æ ‡ ========= */
.learning-goals {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.learning-goals h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #1a472a;
  margin-bottom: 1.5rem;
}

.learning-goals ul {
  padding-left: 1.5rem;
}

.learning-goals li {
  margin-bottom: 0.75rem;
  line-height: 1.6;
}

/* ========= å…³é”®æœ¯è¯­ ========= */
.key-terms {
  margin-bottom: 2rem;
}

.key-terms h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #1a472a;
  margin-bottom: 1.5rem;
}

.terms-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
}

.term-card {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  border-left: 4px solid #2a7960;
}

.term-japanese {
  font-weight: bold;
  color: #2a7960;
  margin-bottom: 0.5rem;
  font-size: 0.875rem;
}

.term-chinese {
  font-weight: bold;
  color: #333;
  margin-bottom: 1rem;
  font-size: 1.125rem;
}

.term-explanation {
  margin-bottom: 1rem;
  line-height: 1.6;
}

.term-example {
  background: #eef7ff;
  padding: 1rem;
  border-radius: 5px;
  font-style: italic;
  border-left: 3px solid #a8c6ff;
  font-size: 0.875rem;
  line-height: 1.5;
}

/* ========= å†…å®¹åŒºå— ========= */
.content-section {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.content-section h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #1a472a;
  margin-bottom: 1.5rem;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid #e9ecef;
}

.content-section h3 {
  font-size: 1.25rem;
  font-weight: 600;
  color: #1a472a;
  margin: 1.5rem 0 1rem;
}

.content-section p {
  line-height: 1.6;
  margin-bottom: 1rem;
}

.content-section ul, .content-section ol {
  padding-left: 1.5rem;
  margin-bottom: 1.5rem;
}

.content-section li {
  margin-bottom: 0.5rem;
  line-height: 1.6;
}

/* ========= åŸºæœ¬æ¦‚å¿µæ ·å¼ ========= */
.concept-explanation {
  margin-bottom: 2rem;
}

.example-box {
  background: #f0f7ff;
  border-radius: 8px;
  padding: 1.5rem;
  margin-top: 1rem;
  border-left: 4px solid #2a7960;
}

.example-box.warning {
  background: #fff9e6;
  border-left: 4px solid #ffcc00;
}

.example-box h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.effect-timing {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.timing-item {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.timing-icon {
  font-size: 2rem;
  flex-shrink: 0;
}

.timing-content h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.timing-content p {
  margin: 0;
  color: #6c757d;
}

.case-study {
  margin: 2rem 0;
}

.case-item {
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.case-item h4 {
  margin: 0 0 1rem 0;
  color: #1a472a;
}

.case-steps {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.step {
  padding: 0.75rem;
  background: #f5f5f5;
  border-radius: 4px;
  font-size: 0.875rem;
}

/* ========= å¯¹æŠ—è¦ä»¶æ ·å¼ ========= */
.requirements-explanation {
  margin-bottom: 2rem;
}

.requirements-options {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.option-item {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.option-icon {
  font-size: 2rem;
  flex-shrink: 0;
}

.option-content h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.option-content p {
  margin: 0.25rem 0;
}

.option-note {
  margin-top: 1rem;
  padding: 0.75rem;
  background: #f5f5f5;
  border-radius: 4px;
  font-size: 0.875rem;
}

.notification-forms {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
  margin: 2rem 0;
}

.form-item {
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.form-item h4 {
  margin: 0 0 1rem 0;
  color: #1a472a;
}

.form-item ul {
  padding-left: 1.25rem;
  margin: 0;
}

.form-item li {
  margin-bottom: 0.5rem;
  line-height: 1.6;
}

/* ========= äºŒé‡è®©æ¸¡æ ·å¼ ========= */
.double-assignment-concept {
  margin-bottom: 2rem;
}

.priority-rules {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.rule-step {
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
  text-align: center;
}

.step-number {
  width: 40px;
  height: 40px;
  background: #2a7960;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  margin: 0 auto 1rem;
}

.step-content h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.step-content p {
  margin: 0 0 1rem 0;
  font-size: 0.875rem;
  color: #6c757d;
}

.step-note {
  padding: 0.5rem;
  background: #e9f7f0;
  border-radius: 4px;
  font-size: 0.875rem;
  color: #2a7960;
  font-weight: bold;
}

.step-note.warning {
  background: #fff9e6;
  color: #e65100;
}

.case-analysis {
  margin: 2rem 0;
}

.analysis-item {
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.analysis-item h4 {
  margin: 0 0 1rem 0;
  color: #1a472a;
}

.analysis-details {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.detail-row {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.detail-label {
  font-weight: bold;
  min-width: 100px;
}

.detail-value {
  flex: 1;
}

.detail-row.result {
  padding-top: 0.75rem;
  border-top: 1px solid #e9ecef;
}

.special-cases {
  margin: 2rem 0;
}

.case-item {
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.case-item h4 {
  margin: 0 0 1rem 0;
  color: #1a472a;
}

/* ========= è®©æ¸¡é™åˆ¶ç‰¹çº¦æ ·å¼ ========= */
.clause-effectiveness {
  margin-bottom: 2rem;
}

.restriction-rules {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.restriction-item {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.restriction-icon {
  font-size: 2rem;
  flex-shrink: 0;
}

.restriction-content h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.restriction-content p {
  margin: 0.25rem 0;
}

.practical-tips {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin: 2rem 0;
}

.tip-item {
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.tip-item h4 {
  margin: 0 0 1rem 0;
  color: #1a472a;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.tip-item ul {
  padding-left: 1.25rem;
  margin: 0;
}

.tip-item li {
  margin-bottom: 0.5rem;
  line-height: 1.6;
}

/* ========= å€ºåŠ¡äººæŠ—è¾©æƒæ ·å¼ ========= */
.defense-basis {
  margin-bottom: 2rem;
}

.defense-reasons {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.reason-item {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.reason-icon {
  font-size: 2rem;
  flex-shrink: 0;
}

.reason-content h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.reason-content p {
  margin: 0.25rem 0;
}

.reason-example {
  margin-top: 1rem;
  padding: 0.75rem;
  background: #f5f5f5;
  border-radius: 4px;
  font-size: 0.875rem;
  font-style: italic;
}

.setoff-conditions {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
  margin: 2rem 0;
}

.condition-item {
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
  text-align: center;
}

.condition-item h4 {
  margin: 0 0 1rem 0;
  color: #1a472a;
}

.condition-item p {
  margin: 0;
}

/* ========= å®åŠ¡è¦ç‚¹æ ·å¼ ========= */
.operation-flow {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.flow-step {
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
  text-align: center;
}

.flow-step .step-number {
  width: 40px;
  height: 40px;
  background: #2a7960;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  margin: 0 auto 1rem;
}

.flow-step h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.flow-step p {
  margin: 0;
  font-size: 0.875rem;
  color: #6c757d;
}

.risk-prevention {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin: 2rem 0;
}

.prevention-item {
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.prevention-item h4 {
  margin: 0 0 1rem 0;
  color: #1a472a;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.prevention-item ul {
  padding-left: 1.25rem;
  margin: 0;
}

.prevention-item li {
  margin-bottom: 0.5rem;
  line-height: 1.6;
}

.faq-section {
  margin: 2rem 0;
}

.faq-item {
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
  margin-bottom: 1rem;
}

.faq-item h4 {
  margin: 0 0 1rem 0;
  color: #1a472a;
}

.faq-item p {
  margin: 0;
}

/* ========= ç»ƒä¹ é¢˜æ ·å¼ ========= */
.quiz-section {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.quiz-section h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #1a472a;
  margin-bottom: 1.5rem;
}

.quiz-item {
  background: #f9f9f9;
  border-radius: 12px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
}

.quiz-question {
  font-weight: bold;
  margin-bottom: 1.25rem;
  font-size: 1.1rem;
  line-height: 1.5;
}

.quiz-options {
  display: flex;
  gap: 1rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
}

.quiz-option {
  display: flex;
  align-items: center;
  cursor: pointer;
  padding: 0.75rem 1rem;
  border: 2px solid #ddd;
  border-radius: 5px;
  transition: all 0.3s ease;
  background: white;
  min-width: 120px;
  justify-content: center;
}

.quiz-option:hover {
  background: #f0f0f0;
}

.quiz-option.selected {
  border-color: #2a7960;
  background: #e9f7f0;
}

.quiz-option.correct {
  border-color: #28a745;
  background: #e7f7e7;
  color: #2e7d32;
}

.quiz-option.incorrect {
  border-color: #dc3545;
  background: #ffe7e7;
  color: #c62828;
}

.quiz-actions {
  margin-bottom: 1rem;
}

.answer-btn {
  background: #2a7960;
  color: white;
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 5px;
  cursor: pointer;
  transition: background 0.3s ease;
  margin-right: 0.5rem;
  font-size: 0.875rem;
}

.answer-btn:hover {
  background: #1a472a;
}

.answer-explanation {
  margin-top: 1rem;
  padding: 1rem;
  background: #f5f5f5;
  border-radius: 5px;
  line-height: 1.6;
}

.quiz-footer-actions {
  display: flex;
  gap: 1rem;
  justify-content: center;
  margin-top: 2rem;
  flex-wrap: wrap;
}

/* ========= æŒ‰é’®æ ·å¼ ========= */
.btn {
  padding: 0.75rem 1.5rem;
  border-radius: 8px;
  font-size: 0.875rem;
  font-weight: 600;
  text-align: center;
  text-decoration: none;
  transition: all 0.3s ease;
  border: none;
  cursor: pointer;
  font-family: inherit;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
}

.btn-primary {
  background: #2a7960;
  color: white;
}

.btn-primary:hover {
  background: #1a472a;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(42, 121, 96, 0.3);
}

.btn-outline {
  background: transparent;
  color: #2a7960;
  border: 1px solid #2a7960;
}

.btn-outline:hover {
  background: #e9f7f0;
  transform: translateY(-2px);
}

/* ========= åº•éƒ¨è¡ŒåŠ¨æŒ‰é’® ========= */
.action-buttons {
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin-top: 3rem;
  padding-top: 2rem;
  border-top: 1px solid #e9ecef;
  flex-wrap: wrap;
}

.action-button {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  background: linear-gradient(135deg, #2a7960, #1a472a);
  color: white;
  text-decoration: none;
  border-radius: 12px;
  font-weight: 600;
  transition: all 0.3s ease;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.action-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
}

.action-button.video {
  background: linear-gradient(135deg, #2a7960, #205e4a);
}

/* ========= å“åº”å¼è®¾è®¡ ========= */
@media (max-width: 768px) {
  .container {
    padding: 0 1rem;
  }
  
  .page-header {
    padding: 1.5rem 1rem;
  }
  
  .header-content h1 {
    font-size: 1.75rem;
  }
  
  .header-stats {
    gap: 1.5rem;
  }
  
  .stat-number {
    font-size: 1.5rem;
  }
  
  .nav-links {
    grid-template-columns: 1fr;
  }
  
  .terms-grid {
    grid-template-columns: 1fr;
  }
  
  .effect-timing {
    grid-template-columns: 1fr;
  }
  
  .requirements-options {
    grid-template-columns: 1fr;
  }
  
  .priority-rules {
    grid-template-columns: 1fr;
  }
  
  .restriction-rules {
    grid-template-columns: 1fr;
  }
  
  .defense-reasons {
    grid-template-columns: 1fr;
  }
  
  .operation-flow {
    grid-template-columns: 1fr;
  }
  
  .risk-prevention {
    grid-template-columns: 1fr;
  }
  
  .quiz-options {
    flex-direction: column;
  }
  
  .quiz-option {
    min-width: auto;
  }
  
  .action-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .action-button {
    width: 100%;
    max-width: 300px;
    justify-content: center;
  }
  
  .content-section, 
  .learning-goals, 
  .quiz-section, 
  .quick-nav {
    padding: 1.5rem;
  }
}

@media (max-width: 480px) {
  .header-stats {
    flex-direction: column;
    gap: 1rem;
  }
  
  .quiz-footer-actions {
    flex-direction: column;
  }
  
  .btn {
    width: 100%;
    justify-content: center;
  }
}
</style>
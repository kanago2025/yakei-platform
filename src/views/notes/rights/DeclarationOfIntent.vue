<!-- src/views/notes/rights/DeclarationOfIntent.vue -->
<template>
  <div class="declaration-page">
    <!-- é¡µé¢å¤´éƒ¨ -->
    <div class="page-header">
      <div class="header-content">
        <div class="breadcrumb">
          <router-link to="/notes">ä¸­æ–‡ç¬”è®°</router-link> &gt; 
          <router-link to="/notes?domain=rights">æƒåˆ©å…³ç³»</router-link> &gt; 
          <span>æ„æ€è¡¨ç¤º</span>
        </div>
        <h1>æ„æ€è¡¨ç¤º</h1>
        <p>æ³•å¾‹è¡Œä¸ºçš„åŸºç¡€ï¼Œå¥‘çº¦æˆç«‹çš„æ ¸å¿ƒè¦ç´ ï¼Œæ¶‰åŠæ¬ºè¯ˆã€é”™è¯¯ã€å¿ƒé‡Œç•™ä¿ç­‰å¤šç§æ³•å¾‹æƒ…å½¢</p>
        
        <!-- å­¦ä¹ ç»Ÿè®¡ -->
        <div class="header-stats">
          <div class="stat-item">
            <span class="stat-number">15</span>
            <span class="stat-label">æ ¸å¿ƒè¦ç‚¹</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">45åˆ†é’Ÿ</span>
            <span class="stat-label">å»ºè®®å­¦ä¹ æ—¶é—´</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">5</span>
            <span class="stat-label">ç»ƒä¹ é¢˜</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">{{ userProgress }}%</span>
            <span class="stat-label">æŒæ¡è¿›åº¦</span>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
      <main class="main-content">
        <!-- å¿«é€Ÿå¯¼èˆª -->
        <div class="quick-nav">
          <h3>æœ¬é¡µå¯¼èˆª</h3>
          <div class="nav-links">
            <a 
              v-for="section in sections" 
              :key="section.id"
              :href="`#${section.id}`"
              class="nav-link"
              @click.prevent="scrollToSection(section.id)"
            >
              <span class="nav-icon">{{ section.icon }}</span>
              {{ section.title }}
            </a>
          </div>
        </div>

        <!-- å­¦ä¹ ç›®æ ‡ -->
        <section class="learning-goals">
          <h2>ğŸ¯ å­¦ä¹ ç›®æ ‡</h2>
          <ul>
            <li>ç†è§£æ„æ€è¡¨ç¤ºçš„åŸºæœ¬æ¦‚å¿µå’Œæ³•å¾‹æ•ˆåŠ›</li>
            <li>æŒæ¡æ¬ºè¯ˆã€å¼ºè¿«ã€é”™è¯¯ç­‰å¯æ’¤é”€æ„æ€è¡¨ç¤ºçš„è¦ä»¶å’Œæ•ˆæœ</li>
            <li>ç†Ÿæ‚‰å¿ƒé‡Œç•™ä¿ã€é€šè°‹è™šä¼ªè¡¨ç¤ºç­‰æ— æ•ˆæ„æ€è¡¨ç¤ºçš„ç±»å‹</li>
            <li>äº†è§£æ„æ€è¡¨ç¤ºä¸ç¬¬ä¸‰è€…çš„å…³ç³»åŠå¯¹æŠ—è¦ä»¶</li>
            <li>èƒ½å¤ŸåŒºåˆ†æ— æ•ˆä¸æ’¤é”€çš„æ³•å¾‹æ•ˆæœå·®å¼‚</li>
          </ul>
        </section>

        <!-- å…³é”®æœ¯è¯­ -->
        <section id="key-terms" class="key-terms">
          <h2>ğŸ”¤ å…³é”®æœ¯è¯­</h2>
          <div class="terms-grid">
            <div 
              v-for="term in keyTerms" 
              :key="term.japanese"
              class="term-card"
            >
              <div class="term-japanese">{{ term.japanese }}</div>
              <div class="term-chinese">{{ term.chinese }}</div>
              <div class="term-explanation">{{ term.explanation }}</div>
              <div class="term-example">{{ term.example }}</div>
            </div>
          </div>
        </section>

        <!-- åŸºæœ¬æ¦‚å¿µ -->
        <section id="basic-concepts" class="content-section">
          <h2>1. æ„æ€è¡¨ç¤ºçš„åŸºæœ¬æ¦‚å¿µ</h2>
          
          <h3>å®šä¹‰ä¸ç”Ÿæ•ˆ</h3>
          <div class="concept-explanation">
            <p>æ„æ€è¡¨ç¤ºæ˜¯æŒ‡è¡¨æ„äººå°†å†…å¿ƒæœŸæœ›å‘ç”Ÿç‰¹å®šæ³•å¾‹æ•ˆæœçš„æ„æ€å‘å¤–éƒ¨è¡¨è¾¾çš„è¡Œä¸ºã€‚å¥‘çº¦çš„æˆç«‹åŸåˆ™ä¸Šéœ€è¦ç”³è¯·å’Œæ‰¿è¯ºä¸¤ä¸ªæ„æ€è¡¨ç¤ºçš„åˆè‡´ã€‚</p>
            
            <div class="example-box">
              <h4>ğŸ“ æ¡ˆä¾‹è¯´æ˜</h4>
              <p>Aæƒ³å–åœŸåœ°ï¼Œå¯¹Bè¯´"å–ç»™ä½ "ï¼ŒBå›ç­”"ä¹°"ã€‚åŒæ–¹æ„æ€è¡¨ç¤ºåˆè‡´ï¼Œä¹°å–å¥‘çº¦æˆç«‹ã€‚</p>
            </div>
          </div>

          <h3>ç”Ÿæ•ˆæ—¶é—´</h3>
          <div class="effect-timing">
            <div class="timing-item">
              <div class="timing-icon">ğŸ“¨</div>
              <div class="timing-content">
                <h4>åˆ°è¾¾ç”Ÿæ•ˆåŸåˆ™</h4>
                <p>æ„æ€è¡¨ç¤ºè‡ªåˆ°è¾¾å¯¹æ–¹ä¹‹æ—¶èµ·ç”Ÿæ•ˆ</p>
              </div>
            </div>
            <div class="timing-item">
              <div class="timing-icon">ğŸš«</div>
              <div class="timing-content">
                <h4>å¦¨ç¢åˆ°è¾¾</h4>
                <p>å¦‚å¯¹æ–¹æ— æ­£å½“ç†ç”±å¦¨ç¢åˆ°è¾¾ï¼Œè§†ä¸ºå·²åˆ°è¾¾</p>
              </div>
            </div>
            <div class="timing-item">
              <div class="timing-icon">âš¡</div>
              <div class="timing-content">
                <h4>æ•ˆåŠ›æŒç»­</h4>
                <p>è¡¨æ„è€…æ­»äº¡æˆ–ä¸§å¤±èƒ½åŠ›ä¸å½±å“å·²å‘å‡ºæ„æ€è¡¨ç¤ºçš„æ•ˆåŠ›</p>
              </div>
            </div>
          </div>
        </section>

        <!-- å¥‘çº¦æˆç«‹è¦ä»¶ -->
        <section id="contract-formation" class="content-section">
          <h2>2. å¥‘çº¦çš„æˆç«‹è¦ä»¶</h2>
          
          <h3>åˆæ„åŸåˆ™</h3>
          <div class="agreement-principle">
            <p>å¥‘çº¦æˆç«‹çš„æ ¸å¿ƒæ˜¯åŒæ–¹æ„æ€è¡¨ç¤ºçš„åˆè‡´ï¼Œå³"è¦çº¦"ä¸"æ‰¿è¯º"çš„ä¸€è‡´ã€‚</p>
            
            <div class="contract-flow">
              <div class="flow-step">
                <div class="step-number">1</div>
                <div class="step-content">
                  <h4>è¦çº¦</h4>
                  <p>Aå¯¹Bè¯´ï¼š"è¿™å—åœŸåœ°å–ç»™ä½ "</p>
                </div>
              </div>
              <div class="flow-step">
                <div class="step-number">2</div>
                <div class="step-content">
                  <h4>æ‰¿è¯º</h4>
                  <p>Bå›ç­”ï¼š"æˆ‘ä¹°"</p>
                </div>
              </div>
              <div class="flow-step">
                <div class="step-number">3</div>
                <div class="step-content">
                  <h4>å¥‘çº¦æˆç«‹</h4>
                  <p>åŒæ–¹æ„æ€è¡¨ç¤ºåˆè‡´ï¼Œä¹°å–å¥‘çº¦æˆç«‹</p>
                </div>
              </div>
            </div>
          </div>

          <h3>å½¢å¼è¦æ±‚</h3>
          <div class="form-requirements">
            <div class="requirement-item">
              <h4>ğŸ“„ ä¹¦é¢å½¢å¼</h4>
              <ul>
                <li>åŸåˆ™ä¸Šä¸éœ€è¦ä¹¦é¢å½¢å¼</li>
                <li>å£å¤´çº¦å®šåŒæ ·å…·æœ‰æ³•å¾‹æ•ˆåŠ›</li>
                <li>ç‰¹å®šæƒ…å†µä¸‹æ³•å¾‹å¯èƒ½è¦æ±‚ä¹¦é¢å½¢å¼ï¼ˆå¦‚ä¸åŠ¨äº§ä¹°å–ï¼‰</li>
              </ul>
            </div>
          </div>

          <h3>æƒåˆ©ä¹‰åŠ¡å…³ç³»</h3>
          <div class="rights-obligations">
            <div class="relationship-diagram">
              <div class="party seller">
                <h4>å–æ–¹ A</h4>
                <div class="obligation">äº¤ä»˜æ ‡çš„ç‰©çš„ä¹‰åŠ¡</div>
                <div class="right">è¯·æ±‚ä»·æ¬¾çš„æƒåˆ©</div>
              </div>
              <div class="relationship-arrow">â‡„</div>
              <div class="party buyer">
                <h4>ä¹°æ–¹ B</h4>
                <div class="obligation">æ”¯ä»˜ä»·æ¬¾çš„ä¹‰åŠ¡</div>
                <div class="right">è¯·æ±‚äº¤ä»˜æ ‡çš„ç‰©çš„æƒåˆ©</div>
              </div>
            </div>
          </div>
        </section>

        <!-- å¯æ’¤é”€çš„æ„æ€è¡¨ç¤º -->
        <section id="revocable-declaration" class="content-section">
          <h2>3. å¯æ’¤é”€çš„æ„æ€è¡¨ç¤º</h2>
          
          <h3>æ¬ºè¯ˆï¼ˆè©æ¬ºï¼‰</h3>
          <div class="fraud-section">
            <div class="fraud-example">
              <div class="example-scenario">
                <div class="scenario-title">æ¬ºè¯ˆæ¡ˆä¾‹</div>
                <div class="scenario-content">
                  <div class="actor fraudster">Aï¼ˆæ¬ºè¯ˆè€…ï¼‰</div>
                  <div class="action">"è¿™åœŸåœ°ä¼šè´¬å€¼ï¼Œç°åœ¨å–ç»™æˆ‘å§"</div>
                  <div class="actor victim">Bï¼ˆè¢«æ¬ºè¯ˆè€…ï¼‰</div>
                  <div class="action">"å¥½å§ï¼Œæˆ‘å–"</div>
                </div>
              </div>
            </div>

            <div class="legal-effects">
              <div class="effect-item">
                <h4>å½“äº‹äººä¹‹é—´</h4>
                <p class="effect-positive">å¯æ’¤é”€</p>
              </div>
              <div class="effect-item">
                <h4>å¯¹ç¬¬ä¸‰è€…</h4>
                <p class="effect-caution">æ’¤é”€å‰ä¸å¯å¯¹æŠ—å–„æ„æ— è¿‡å¤±ç¬¬ä¸‰è€…</p>
              </div>
            </div>

            <div class="third-party-relation">
              <h4>ç¬¬ä¸‰è€…å…³ç³»</h4>
              <div class="relation-flow">
                A(è¢«æ¬ºè¯ˆ) â†’ B(æ¬ºè¯ˆè€…) â†’ C(å–„æ„æ— è¿‡å¤±ç¬¬ä¸‰è€…)
                <div class="relation-note">Aä¸èƒ½å¯¹Cä¸»å¼ æ’¤é”€</div>
              </div>
            </div>
          </div>

          <h3>å¼ºè¿«ï¼ˆå¼·è¿«ï¼‰</h3>
          <div class="coercion-section">
            <div class="comparison-table">
              <table>
                <thead>
                  <tr>
                    <th>é¡¹ç›®</th>
                    <th>æ¬ºè¯ˆ</th>
                    <th>å¼ºè¿«</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>å½“äº‹äººä¹‹é—´</td>
                    <td>å¯æ’¤é”€</td>
                    <td>å¯æ’¤é”€</td>
                  </tr>
                  <tr>
                    <td>å¯¹å–„æ„æ— è¿‡å¤±ç¬¬ä¸‰è€…</td>
                    <td>ä¸å¯å¯¹æŠ—</td>
                    <td class="highlight">å¯å¯¹æŠ—</td>
                  </tr>
                  <tr>
                    <td>å—å®³è€…è¿‡é”™</td>
                    <td>æœ‰è½åº¦ï¼ˆè¿‡é”™ï¼‰</td>
                    <td>æ— è½åº¦ï¼ˆæ— è¿‡é”™ï¼‰</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <h3>é”™è¯¯ï¼ˆéŒ¯èª¤ï¼‰</h3>
          <div class="mistake-section">
            <div class="mistake-types">
              <div class="type-item">
                <h4>è¡¨ç¤ºé”™è¯¯</h4>
                <p>è¯´é”™ã€å†™é”™ç­‰å¤–åœ¨è¡¨ç¤ºé”™è¯¯</p>
                <div class="type-example">
                  <strong>ä¾‹å­ï¼š</strong>æŠŠ1000ä¸‡å†™æˆ100ä¸‡
                </div>
              </div>
              <div class="type-item">
                <h4>åŠ¨æœºé”™è¯¯</h4>
                <p>å†…å¿ƒè®¤è¯†é”™è¯¯ï¼ŒåŸåˆ™ä¸Šä¸å¯æ’¤é”€</p>
                <div class="type-example">
                  <strong>ä¾‹å­ï¼š</strong>è¯¯ä»¥ä¸ºåœ°é“ç«™ä¼šå»ºåœ¨é™„è¿‘è€Œè´­ä¹°åœŸåœ°
                </div>
              </div>
            </div>

            <div class="revocation-requirements">
              <h4>æ’¤é”€è¦ä»¶</h4>
              <div class="requirements-list">
                <div class="requirement">
                  <div class="req-number">1</div>
                  <div class="req-content">
                    <strong>é‡è¦æ€§ï¼š</strong>é”™è¯¯å¿…é¡»æ˜¯æ³•å¾‹è¡Œä¸ºç›®çš„å’Œç¤¾ä¼šé€šå¿µä¸Šçš„é‡è¦é”™è¯¯
                  </div>
                </div>
                <div class="requirement">
                  <div class="req-number">2</div>
                  <div class="req-content">
                    <strong>æ— é‡å¤§è¿‡å¤±ï¼š</strong>è¡¨æ„äººæ— é‡å¤§è¿‡å¤±
                  </div>
                </div>
              </div>
            </div>

            <div class="exceptions">
              <h4>ä¾‹å¤–æƒ…å†µ</h4>
              <p>å³ä½¿æœ‰é‡å¤§è¿‡å¤±ï¼Œä»¥ä¸‹æƒ…å†µä»å¯æ’¤é”€ï¼š</p>
              <ul>
                <li>å¯¹æ–¹æ¶æ„æˆ–é‡å¤§è¿‡å¤±</li>
                <li>åŒæ–¹é™·å…¥åŒä¸€é”™è¯¯</li>
              </ul>
            </div>
          </div>
        </section>

        <!-- æ— æ•ˆçš„æ„æ€è¡¨ç¤º -->
        <section id="invalid-declaration" class="content-section">
          <h2>4. æ— æ•ˆçš„æ„æ€è¡¨ç¤º</h2>
          
          <h3>å¿ƒé‡Œç•™ä¿</h3>
          <div class="mental-reservation">
            <div class="reservation-example">
              <div class="example-title">ã€Šå¤§æŸ“åŠã€‹æ¡ˆä¾‹</div>
              <div class="example-detail">
                <p>åº—å‘˜å¼€ç©ç¬‘è¯´ï¼š"1å—é’±ä¸€ä»¶å¸ƒ"ï¼Œé™ˆå¯¿äº­æ˜çŸ¥æ˜¯ç©ç¬‘å´å½“çœŸè´­ä¹°ã€‚</p>
                <p><strong>ç»“æœï¼š</strong>å› é™ˆå¯¿äº­æ¶æ„ï¼Œå¥‘çº¦æ— æ•ˆ</p>
              </div>
            </div>

            <div class="legal-principles">
              <div class="principle-item">
                <h4>åŸåˆ™</h4>
                <p class="principle-valid">æœ‰æ•ˆï¼ˆä¿æŠ¤äº¤æ˜“å®‰å…¨ï¼‰</p>
              </div>
              <div class="principle-item">
                <h4>ä¾‹å¤–</h4>
                <p class="principle-invalid">å¯¹æ–¹æ¶æ„æ—¶æ— æ•ˆ</p>
              </div>
            </div>
          </div>

          <h3>é€šè°‹è™šä¼ªè¡¨ç¤º</h3>
          <div class="false-representation">
            <div class="representation-case">
              <h4>å…¸å‹æ¡ˆä¾‹ï¼šè™šå‡è½¬è®©</h4>
              <p>Aä¸ºé€ƒé¿å€ºåŠ¡ï¼Œä¸Bä¸²é€šå°†æˆ¿äº§åä¹‰è½¬ç§»ç»™Bï¼Œå®é™…ä¸Šå¹¶æ— çœŸå®ä¹°å–æ„å›¾ã€‚</p>
            </div>

            <div class="representation-effects">
              <div class="effect-principle">
                <h4>åŸåˆ™</h4>
                <p class="effect-invalid">æ— æ•ˆ</p>
              </div>
              <div class="effect-third">
                <h4>å¯¹ç¬¬ä¸‰è€…</h4>
                <p class="effect-caution">ä¸å¾—å¯¹æŠ—å–„æ„ç¬¬ä¸‰è€…</p>
              </div>
            </div>
          </div>

          <h3>è¿åå…¬åºè‰¯ä¿—</h3>
          <div class="public-order">
            <div class="violation-examples">
              <div class="example-item">
                <div class="example-icon">ğŸ”«</div>
                <div class="example-content">
                  <h5>æ€äººå¥‘çº¦</h5>
                  <p>çº¦å®šæ€å®³ä»–äººçš„å¥‘çº¦ç»å¯¹æ— æ•ˆ</p>
                </div>
              </div>
              <div class="example-item">
                <div class="example-icon">ğŸ’”</div>
                <div class="example-content">
                  <h5>çˆ±äººå¥‘çº¦</h5>
                  <p>åŒ…å…»åè®®è¿åå…¬åºè‰¯ä¿—</p>
                </div>
              </div>
            </div>
            
            <div class="violation-effect">
              <h4>æ³•å¾‹æ•ˆæœ</h4>
              <ul>
                <li>ç»å¯¹æ— æ•ˆ</li>
                <li>å¯å¯¹æŠ—æ‰€æœ‰ç¬¬ä¸‰è€…</li>
              </ul>
            </div>
          </div>
        </section>

        <!-- ä¸ç¬¬ä¸‰è€…çš„å…³ç³» -->
        <section id="third-party-relations" class="content-section">
          <h2>5. ä¸ç¬¬ä¸‰è€…çš„å…³ç³»</h2>
          
          <h3>å–„æ„ä¸æ¶æ„çš„åŒºåˆ†</h3>
          <div class="good-faith-explanation">
            <div class="faith-types">
              <div class="faith-type">
                <h4>å–„æ„</h4>
                <p>ä¸çŸ¥æƒ…</p>
              </div>
              <div class="faith-type">
                <h4>æ¶æ„</h4>
                <p>çŸ¥æƒ…æˆ–åº”çŸ¥è€Œä¸çŸ¥</p>
              </div>
              <div class="faith-type">
                <h4>å–„æ„æ— è¿‡å¤±</h4>
                <p>ä¸çŸ¥æƒ…ä¸”æ— è¿‡å¤±</p>
              </div>
            </div>
          </div>

          <h3>å¯¹æŠ—å…³ç³»æ€»ç»“</h3>
          <div class="resistance-summary">
            <div class="table-container">
              <table class="resistance-table">
                <thead>
                  <tr>
                    <th>ç±»å‹</th>
                    <th>æ¶æ„ç¬¬ä¸‰è€…</th>
                    <th>å–„æ„æœ‰è¿‡å¤±ç¬¬ä¸‰è€…</th>
                    <th>å–„æ„æ— è¿‡å¤±ç¬¬ä¸‰è€…</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><strong>æ¬ºè¯ˆ</strong></td>
                    <td class="can-resist">å¯å¯¹æŠ—</td>
                    <td class="can-resist">å¯å¯¹æŠ—</td>
                    <td class="cannot-resist">ä¸å¯å¯¹æŠ—</td>
                  </tr>
                  <tr>
                    <td><strong>å¼ºè¿«</strong></td>
                    <td class="can-resist">å¯å¯¹æŠ—</td>
                    <td class="can-resist">å¯å¯¹æŠ—</td>
                    <td class="can-resist">å¯å¯¹æŠ—</td>
                  </tr>
                  <tr>
                    <td><strong>é”™è¯¯</strong></td>
                    <td class="can-resist">å¯å¯¹æŠ—</td>
                    <td class="can-resist">å¯å¯¹æŠ—</td>
                    <td class="cannot-resist">ä¸å¯å¯¹æŠ—</td>
                  </tr>
                  <tr>
                    <td><strong>å¿ƒé‡Œç•™ä¿</strong></td>
                    <td class="invalid">æ— æ•ˆ</td>
                    <td class="invalid">æ— æ•ˆ</td>
                    <td class="valid">æœ‰æ•ˆ</td>
                  </tr>
                  <tr>
                    <td><strong>é€šè°‹è™šä¼ª</strong></td>
                    <td class="invalid">æ— æ•ˆ</td>
                    <td class="invalid">æ— æ•ˆ</td>
                    <td class="valid">æœ‰æ•ˆ</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <h3>è½¬å¾—è€…ä¿æŠ¤åŸåˆ™</h3>
          <div class="transferee-protection">
            <div class="protection-principle">
              <p>åœ¨ <strong>A â†’ B â†’ C â†’ D</strong> çš„è½¬å–é“¾æ¡ä¸­ï¼š</p>
              <div class="protection-rule">
                <div class="rule-icon">âœ…</div>
                <div class="rule-content">
                  åªè¦<strong>Cæˆ–Dä»»ä½•ä¸€æ–¹å–„æ„</strong>ï¼Œæœ€ç»ˆDèƒœè¯‰
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- ç»ƒä¹ é¢˜ -->
        <section id="quiz" class="quiz-section">
          <h2>âœï¸ ç»ƒä¹ é¢˜</h2>
          
          <div 
            v-for="(quiz, index) in quizzes" 
            :key="index"
            class="quiz-item"
          >
            <div class="quiz-question">{{ quiz.question }}</div>
            <div class="quiz-options">
              <div 
                v-for="option in quiz.options" 
                :key="option.text"
                class="quiz-option"
                :class="{ 
                  'selected': selectedAnswers[index] === option.text,
                  'correct': showAnswers && option.correct,
                  'incorrect': showAnswers && selectedAnswers[index] === option.text && !option.correct
                }"
                @click="selectAnswer(index, option.text)"
              >
                {{ option.text }}
              </div>
            </div>
            <div class="quiz-actions">
              <button class="answer-btn" @click="toggleAnswer(index)">
                {{ showAnswerIndex === index ? 'éšè—ç­”æ¡ˆ' : 'æ˜¾ç¤ºç­”æ¡ˆ' }}
              </button>
            </div>
            <div 
              v-if="showAnswerIndex === index" 
              class="answer-explanation"
            >
              <strong>ç­”æ¡ˆï¼š</strong> {{ getCorrectAnswer(quiz) }}<br>
              <strong>ä¸­æ–‡è§£é‡Šï¼š</strong> {{ quiz.explanation }}
            </div>
          </div>

          <div class="quiz-footer-actions">
            <button class="btn btn-primary" @click="checkAllAnswers">
              æ£€æŸ¥å…¨éƒ¨ç­”æ¡ˆ
            </button>
            <button class="btn btn-outline" @click="resetQuiz">
              é‡æ–°ç»ƒä¹ 
            </button>
          </div>
        </section>

        <!-- åº•éƒ¨è¡ŒåŠ¨æŒ‰é’® -->
        <div class="action-buttons">
          <router-link to="/video?topic=declaration-intro" class="action-button video">
            <span>ğŸ“º</span>
            è§‚çœ‹ç›¸å…³è§†é¢‘
          </router-link>
          <router-link to="/practice?topic=declaration" class="action-button">
            <span>ğŸ“</span>
            å¼€å§‹å¼ºåŒ–ç»ƒä¹ 
          </router-link>
          <router-link to="/notes?domain=rights" class="action-button">
            <span>ğŸ“š</span>
            è¿”å›æƒåˆ©å…³ç³»
          </router-link>
        </div>
      </main>
    </div>
  </div>
</template>

<script setup>
import { ref, computed, onMounted, onUnmounted } from 'vue'
import { useLearningStore } from '@/stores/learning'
import { useRouter } from 'vue-router'

const learningStore = useLearningStore()
const router = useRouter()

// ç”¨æˆ·å­¦ä¹ è¿›åº¦
const userProgress = ref(0)
const startTime = ref(new Date())

// é¡µé¢ç« èŠ‚å¯¼èˆª
const sections = [
  { id: 'key-terms', title: 'å…³é”®æœ¯è¯­', icon: 'ğŸ”¤' },
  { id: 'basic-concepts', title: 'åŸºæœ¬æ¦‚å¿µ', icon: 'ğŸ“–' },
  { id: 'contract-formation', title: 'å¥‘çº¦æˆç«‹', icon: 'ğŸ“' },
  { id: 'revocable-declaration', title: 'å¯æ’¤é”€è¡¨ç¤º', icon: 'ğŸ”„' },
  { id: 'invalid-declaration', title: 'æ— æ•ˆè¡¨ç¤º', icon: 'âŒ' },
  { id: 'third-party-relations', title: 'ç¬¬ä¸‰è€…å…³ç³»', icon: 'ğŸ‘¥' },
  { id: 'quiz', title: 'ç»ƒä¹ é¢˜', icon: 'âœï¸' }
]

// å…³é”®æœ¯è¯­æ•°æ®
const keyTerms = [
  {
    japanese: 'æ„æ€è¡¨ç¤ºï¼ˆã„ã—ã²ã‚‡ã†ã˜ï¼‰',
    chinese: 'æ„æ€è¡¨ç¤º',
    explanation: 'å°†è‡ªå·±çš„å†…å¿ƒæ„æ€å‘å¤–éƒ¨è¡¨è¾¾çš„è¡Œä¸º',
    example: 'Aå¯¹Bè¯´"æˆ‘å–ç»™ä½ è¿™å—åœŸåœ°"'
  },
  {
    japanese: 'è©æ¬ºï¼ˆã•ãï¼‰',
    chinese: 'æ¬ºè¯ˆ',
    explanation: 'æ¬ºéª—ä»–äººä½¿å…¶åšå‡ºæ„æ€è¡¨ç¤ºçš„è¡Œä¸º',
    example: 'Aæ¬ºéª—Bè¯´"è¿™åœŸåœ°ä¼šè´¬å€¼"ï¼Œè¯±ä½¿Bä½ä»·å‡ºå”®'
  },
  {
    japanese: 'å¼·è¿«ï¼ˆãã‚‡ã†ã¯ãï¼‰',
    chinese: 'å¼ºè¿«',
    explanation: 'é€šè¿‡å¨èƒè¿«ä½¿ä»–äººåšå‡ºæ„æ€è¡¨ç¤ºçš„è¡Œä¸º',
    example: 'Aå¨èƒB"ä¸å–ç»™æˆ‘å°±å¯¹ä½ å®¶äººä¸åˆ©"'
  },
  {
    japanese: 'éŒ¯èª¤ï¼ˆã•ãã”ï¼‰',
    chinese: 'é”™è¯¯',
    explanation: 'å› è¯¯è§£æˆ–è®¤è¯†é”™è¯¯è€Œåšå‡ºçš„æ„æ€è¡¨ç¤º',
    example: 'Aæœ¬æƒ³ä¹°é“…ç¬”1æ”¯ï¼Œå´è¯´æˆä¹°1ç›’'
  },
  {
    japanese: 'å¿ƒè£¡ç•™ä¿ï¼ˆã—ã‚“ã‚Šã‚Šã‚…ã†ã»ï¼‰',
    chinese: 'å¿ƒé‡Œç•™ä¿',
    explanation: 'è¡¨æ„äººå†…å¿ƒæ„æ€ä¸è¡¨ç¤ºä¸ä¸€è‡´çš„æˆè°‘è¡Œä¸º',
    example: 'Aå¼€ç©ç¬‘è¯´"1å—é’±å–ç»™ä½ "ï¼ŒBå´å½“çœŸ'
  }
]

// ç»ƒä¹ é¢˜æ•°æ®
const quizzes = [
  {
    question: 'è©æ¬ºã«ã‚ˆã‚‹æ„æ€è¡¨ç¤ºã¯ã€ç„¡åŠ¹ã§ã‚ã‚‹ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: false },
      { text: 'âœ• (èª¤ã‚Š)', correct: true }
    ],
    explanation: 'æ¬ºè¯ˆçš„æ„æ€è¡¨ç¤ºæ˜¯å¯æ’¤é”€ï¼Œä¸æ˜¯æ— æ•ˆã€‚æ— æ•ˆä¸æ’¤é”€æœ‰æœ¬è´¨åŒºåˆ«ã€‚'
  },
  {
    question: 'å¼·è¿«ã«ã‚ˆã‚‹æ„æ€è¡¨ç¤ºã®å–æ¶ˆã—ã¯ã€å–„æ„ç„¡éå¤±ã®ç¬¬ä¸‰è€…ã«å¯¾æŠ—ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: true },
      { text: 'âœ• (èª¤ã‚Š)', correct: false }
    ],
    explanation: 'å¼ºè¿«çš„å—å®³è€…å³ä½¿å¯¹å–„æ„æ— è¿‡å¤±çš„ç¬¬ä¸‰è€…ä¹Ÿå¯ä¸»å¼ æ’¤é”€ã€‚'
  },
  {
    question: 'å‹•æ©Ÿã®éŒ¯èª¤ã¯ã€ç›¸æ‰‹æ–¹ã«è¡¨ç¤ºã—ã¦ã„ãªã„å ´åˆã€å–æ¶ˆã—ãŒã§ããªã„ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: true },
      { text: 'âœ• (èª¤ã‚Š)', correct: false }
    ],
    explanation: 'åŠ¨æœºé”™è¯¯åªæœ‰åœ¨å‘å¯¹æ–¹è¡¨ç¤ºçš„æƒ…å†µä¸‹æ‰å¯æ’¤é”€ã€‚'
  },
  {
    question: 'å¿ƒè£¡ç•™ä¿ã«ã‚ˆã‚‹æ„æ€è¡¨ç¤ºã¯ã€ç›¸æ‰‹æ–¹ãŒæ‚ªæ„ã®å ´åˆã€ç„¡åŠ¹ã¨ãªã‚‹ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: true },
      { text: 'âœ• (èª¤ã‚Š)', correct: false }
    ],
    explanation: 'å¿ƒé‡Œç•™ä¿åœ¨å¯¹æ–¹æ¶æ„æ—¶æ— æ•ˆï¼Œè¿™æ˜¯ä¿æŠ¤è¡¨æ„äººçš„ä¾‹å¤–ã€‚'
  },
  {
    question: 'é€šè¬€è™šå½è¡¨ç¤ºã®ç„¡åŠ¹ã¯ã€å–„æ„ã®ç¬¬ä¸‰è€…ã«å¯¾æŠ—ã™ã‚‹ã“ã¨ãŒã§ããªã„ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: true },
      { text: 'âœ• (èª¤ã‚Š)', correct: false }
    ],
    explanation: 'é€šè°‹è™šä¼ªè¡¨ç¤ºçš„æ— æ•ˆä¸å¾—å¯¹æŠ—å–„æ„ç¬¬ä¸‰è€…ï¼Œä»¥ä¿æŠ¤äº¤æ˜“å®‰å…¨ã€‚'
  }
]

// ç­”é¢˜çŠ¶æ€
const selectedAnswers = ref(Array(quizzes.length).fill(null))
const showAnswerIndex = ref(null)
const showAnswers = ref(false)

// æ–¹æ³•
const scrollToSection = (sectionId) => {
  const element = document.getElementById(sectionId)
  if (element) {
    element.scrollIntoView({ behavior: 'smooth' })
  }
}

const selectAnswer = (index, answer) => {
  selectedAnswers.value[index] = answer
  // æ›´æ–°å­¦ä¹ è¿›åº¦
  updateProgress()
}

const toggleAnswer = (index) => {
  showAnswerIndex.value = showAnswerIndex.value === index ? null : index
}

const getCorrectAnswer = (quiz) => {
  const correctOption = quiz.options.find(option => option.correct)
  return correctOption ? correctOption.text : ''
}

const checkAllAnswers = () => {
  showAnswers.value = true
  updateProgress()
}

const resetQuiz = () => {
  selectedAnswers.value = Array(quizzes.length).fill(null)
  showAnswers.value = false
  showAnswerIndex.value = null
  userProgress.value = 0
}

const updateProgress = () => {
  const total = quizzes.length
  const correct = quizzes.reduce((count, quiz, index) => {
    const selected = selectedAnswers.value[index]
    if (!selected) return count
    
    const isCorrect = quiz.options.find(opt => opt.text === selected)?.correct || false
    return count + (isCorrect ? 1 : 0)
  }, 0)
  
  userProgress.value = Math.round((correct / total) * 100)
}

// è®°å½•å­¦ä¹ æ—¶é—´
const recordStudyTime = () => {
  const currentTime = new Date()
  const studyTime = Math.floor((currentTime - startTime.value) / 1000) // è½¬æ¢ä¸ºç§’
  learningStore.recordTopicStudyTime('declaration', studyTime)
}

// æ ‡è®°çŸ¥è¯†ç‚¹å®Œæˆ
const markTopicCompleted = () => {
  learningStore.completeTopic('declaration')
}

// åˆå§‹åŒ–
onMounted(() => {
  // ä»å­¦ä¹ å­˜å‚¨åŠ è½½è¿›åº¦
  const progress = learningStore.getTopicProgress('declaration')
  if (progress) {
    userProgress.value = progress.completionPercentage
  }
  
  // è®°å½•ç”¨æˆ·å¼€å§‹å­¦ä¹ è¿™ä¸ªçŸ¥è¯†ç‚¹
  learningStore.recordTopicStudyTime('declaration', 0)
  
  // è®¾ç½®å®šæ—¶å™¨ï¼Œæ¯30ç§’è®°å½•ä¸€æ¬¡å­¦ä¹ æ—¶é—´
  const timer = setInterval(() => {
    recordStudyTime()
  }, 30000)
  
  onUnmounted(() => {
    clearInterval(timer)
    // ç»„ä»¶å¸è½½æ—¶è®°å½•æ€»å­¦ä¹ æ—¶é—´
    recordStudyTime()
  })
})
</script>

<style scoped>
.declaration-page {
  min-height: 100vh;
  background-color: #f8f9fa;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 2rem;
}

/* ========= é¡µé¢å¤´éƒ¨ ========= */
.page-header {
  background: linear-gradient(135deg, rgba(42, 121, 96, 0.05), rgba(42, 121, 96, 0.02));
  border-radius: 12px;
  padding: 2rem;
  margin: 1rem 0 2rem;
  text-align: center;
}

.breadcrumb {
  font-size: 0.875rem;
  color: #6c757d;
  margin-bottom: 1rem;
}

.breadcrumb a {
  color: #2a7960;
  text-decoration: none;
}

.breadcrumb a:hover {
  text-decoration: underline;
}

.header-content h1 {
  font-size: 2.25rem;
  font-weight: 800;
  color: #1a472a;
  margin-bottom: 1rem;
}

.header-content p {
  font-size: 1.125rem;
  color: #6c757d;
  max-width: 700px;
  margin: 0 auto 2rem;
  line-height: 1.6;
}

.header-stats {
  display: flex;
  justify-content: center;
  gap: 3rem;
  flex-wrap: wrap;
}

.stat-item {
  text-align: center;
}

.stat-number {
  display: block;
  font-size: 1.75rem;
  font-weight: 700;
  color: #2a7960;
  margin-bottom: 0.25rem;
}

.stat-label {
  font-size: 0.875rem;
  color: #6c757d;
}

/* ========= ä¸»è¦å†…å®¹åŒºåŸŸ ========= */
.main-content {
  margin: 2rem 0;
}

/* ========= å¿«é€Ÿå¯¼èˆª ========= */
.quick-nav {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  margin-bottom: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.quick-nav h3 {
  font-size: 1.25rem;
  font-weight: 600;
  color: #1a472a;
  margin-bottom: 1rem;
}

.nav-links {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 0.75rem;
}

.nav-link {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  background: #f8f9fa;
  border-radius: 8px;
  text-decoration: none;
  color: #333;
  transition: all 0.2s ease;
  border: none;
  cursor: pointer;
  font-family: inherit;
  font-size: 0.875rem;
}

.nav-link:hover {
  background: #e9ecef;
  color: #1a472a;
  transform: translateY(-2px);
}

.nav-icon {
  font-size: 1.125rem;
}

/* ========= å­¦ä¹ ç›®æ ‡ ========= */
.learning-goals {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.learning-goals h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #1a472a;
  margin-bottom: 1.5rem;
}

.learning-goals ul {
  padding-left: 1.5rem;
}

.learning-goals li {
  margin-bottom: 0.75rem;
  line-height: 1.6;
}

/* ========= å…³é”®æœ¯è¯­ ========= */
.key-terms {
  margin-bottom: 2rem;
}

.key-terms h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #1a472a;
  margin-bottom: 1.5rem;
}

.terms-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
}

.term-card {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  border-left: 4px solid #2a7960;
}

.term-japanese {
  font-weight: bold;
  color: #2a7960;
  margin-bottom: 0.5rem;
  font-size: 0.875rem;
}

.term-chinese {
  font-weight: bold;
  color: #333;
  margin-bottom: 1rem;
  font-size: 1.125rem;
}

.term-explanation {
  margin-bottom: 1rem;
  line-height: 1.6;
}

.term-example {
  background: #eef7ff;
  padding: 1rem;
  border-radius: 5px;
  font-style: italic;
  border-left: 3px solid #a8c6ff;
  font-size: 0.875rem;
  line-height: 1.5;
}

/* ========= å†…å®¹åŒºå— ========= */
.content-section {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.content-section h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #1a472a;
  margin-bottom: 1.5rem;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid #e9ecef;
}

.content-section h3 {
  font-size: 1.25rem;
  font-weight: 600;
  color: #1a472a;
  margin: 1.5rem 0 1rem;
}

.content-section p {
  line-height: 1.6;
  margin-bottom: 1rem;
}

.content-section ul, .content-section ol {
  padding-left: 1.5rem;
  margin-bottom: 1.5rem;
}

.content-section li {
  margin-bottom: 0.5rem;
  line-height: 1.6;
}

/* ========= åŸºæœ¬æ¦‚å¿µæ ·å¼ ========= */
.concept-explanation {
  margin-bottom: 2rem;
}

.example-box {
  background: #f0f7ff;
  border-radius: 8px;
  padding: 1.5rem;
  margin-top: 1rem;
  border-left: 4px solid #2a7960;
}

.example-box h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.effect-timing {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
}

.timing-item {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.timing-icon {
  font-size: 2rem;
  flex-shrink: 0;
}

.timing-content h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.timing-content p {
  margin: 0;
  color: #6c757d;
}

/* ========= å¥‘çº¦æˆç«‹æ ·å¼ ========= */
.contract-flow {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.flow-step {
  text-align: center;
  padding: 1.5rem 1rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.step-number {
  width: 40px;
  height: 40px;
  background: #2a7960;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  margin: 0 auto 1rem;
}

.step-content h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.step-content p {
  margin: 0;
  font-size: 0.875rem;
  color: #6c757d;
}

.form-requirements {
  margin: 1.5rem 0;
}

.requirement-item {
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.requirement-item h4 {
  margin: 0 0 1rem 0;
  color: #1a472a;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.requirement-item ul {
  padding-left: 1.25rem;
  margin: 0;
}

.requirement-item li {
  margin-bottom: 0.5rem;
  line-height: 1.6;
}

.rights-obligations {
  margin: 2rem 0;
}

.relationship-diagram {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2rem;
  flex-wrap: wrap;
}

.party {
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
  min-width: 200px;
  text-align: center;
}

.party h4 {
  margin: 0 0 1rem 0;
  color: #1a472a;
}

.obligation, .right {
  padding: 0.5rem;
  margin: 0.5rem 0;
  border-radius: 4px;
  font-size: 0.875rem;
}

.obligation {
  background: #ffe7e7;
  color: #c62828;
}

.right {
  background: #e7f7e7;
  color: #2e7d32;
}

.relationship-arrow {
  font-size: 1.5rem;
  color: #2a7960;
  font-weight: bold;
}

/* ========= å¯æ’¤é”€æ„æ€è¡¨ç¤ºæ ·å¼ ========= */
.fraud-section, .coercion-section, .mistake-section {
  margin-bottom: 2rem;
}

.fraud-example {
  margin-bottom: 1.5rem;
}

.example-scenario {
  background: #fff9e6;
  border-radius: 8px;
  padding: 1.5rem;
  border: 1px solid #ffcc00;
}

.scenario-title {
  font-weight: bold;
  margin-bottom: 1rem;
  color: #1a472a;
}

.scenario-content {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.actor {
  font-weight: bold;
  padding: 0.5rem;
  border-radius: 4px;
  text-align: center;
}

.fraudster {
  background: #ffe7e7;
  color: #c62828;
}

.victim {
  background: #e7f7e7;
  color: #2e7d32;
}

.action {
  padding: 0.5rem;
  background: white;
  border-radius: 4px;
  border: 1px solid #e9ecef;
  margin-left: 1rem;
}

.legal-effects {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
  margin: 1.5rem 0;
}

.effect-item {
  text-align: center;
  padding: 1rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.effect-item h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.effect-positive {
  color: #2e7d32;
  font-weight: bold;
}

.effect-caution {
  color: #c62828;
  font-weight: bold;
}

.third-party-relation {
  margin-top: 1.5rem;
}

.relation-flow {
  padding: 1rem;
  background: #f5f5f5;
  border-radius: 8px;
  text-align: center;
  font-family: monospace;
}

.relation-note {
  margin-top: 0.5rem;
  font-size: 0.875rem;
  color: #6c757d;
}

.comparison-table {
  margin: 1.5rem 0;
}

.comparison-table table {
  width: 100%;
  border-collapse: collapse;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  border-radius: 8px;
  overflow: hidden;
}

.comparison-table th, .comparison-table td {
  border: 1px solid #e9ecef;
  padding: 12px;
  text-align: center;
}

.comparison-table th {
  background-color: #2a7960;
  color: white;
  font-weight: 600;
}

.comparison-table tr:nth-child(even) {
  background-color: #f8f9fa;
}

.highlight {
  background-color: #e7f7e7 !important;
  color: #2e7d32;
  font-weight: bold;
}

.mistake-types {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.type-item {
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.type-item h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.type-example {
  margin-top: 1rem;
  padding: 0.75rem;
  background: #f0f7ff;
  border-radius: 4px;
  font-size: 0.875rem;
}

.revocation-requirements {
  margin: 2rem 0;
}

.requirements-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.requirement {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  padding: 1rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.req-number {
  width: 30px;
  height: 30px;
  background: #2a7960;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  flex-shrink: 0;
}

.req-content {
  flex: 1;
}

.exceptions {
  padding: 1.5rem;
  background: #fff9e6;
  border-radius: 8px;
  border: 1px solid #ffcc00;
}

.exceptions h4 {
  margin: 0 0 1rem 0;
  color: #1a472a;
}

/* ========= æ— æ•ˆæ„æ€è¡¨ç¤ºæ ·å¼ ========= */
.mental-reservation, .false-representation, .public-order {
  margin-bottom: 2rem;
}

.reservation-example {
  margin-bottom: 1.5rem;
}

.example-title {
  font-weight: bold;
  margin-bottom: 0.5rem;
  color: #1a472a;
}

.example-detail {
  padding: 1rem;
  background: #f5f5f5;
  border-radius: 8px;
}

.legal-principles {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
}

.principle-item {
  text-align: center;
  padding: 1rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.principle-item h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.principle-valid {
  color: #2e7d32;
  font-weight: bold;
}

.principle-invalid {
  color: #c62828;
  font-weight: bold;
}

.representation-case {
  margin-bottom: 1.5rem;
  padding: 1.5rem;
  background: #f5f5f5;
  border-radius: 8px;
}

.representation-case h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.representation-effects {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
}

.effect-principle, .effect-third {
  text-align: center;
  padding: 1rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.effect-principle h4, .effect-third h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.effect-invalid {
  color: #c62828;
  font-weight: bold;
}

.violation-examples {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
  margin: 1.5rem 0;
}

.example-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.example-icon {
  font-size: 1.5rem;
}

.example-content h5 {
  margin: 0 0 0.25rem 0;
  color: #1a472a;
}

.example-content p {
  margin: 0;
  font-size: 0.875rem;
  color: #6c757d;
}

.violation-effect {
  padding: 1.5rem;
  background: #ffe7e7;
  border-radius: 8px;
  border: 1px solid #dc3545;
}

.violation-effect h4 {
  margin: 0 0 1rem 0;
  color: #c62828;
}

.violation-effect ul {
  padding-left: 1.25rem;
  margin: 0;
}

.violation-effect li {
  margin-bottom: 0.5rem;
  line-height: 1.6;
}

/* ========= ç¬¬ä¸‰è€…å…³ç³»æ ·å¼ ========= */
.good-faith-explanation {
  margin: 1.5rem 0;
}

.faith-types {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
}

.faith-type {
  text-align: center;
  padding: 1.5rem 1rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.faith-type h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.faith-type p {
  margin: 0;
  color: #6c757d;
}

.resistance-summary {
  margin: 2rem 0;
}

.table-container {
  overflow-x: auto;
}

.resistance-table {
  width: 100%;
  border-collapse: collapse;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  border-radius: 8px;
  overflow: hidden;
}

.resistance-table th, .resistance-table td {
  border: 1px solid #e9ecef;
  padding: 12px;
  text-align: center;
}

.resistance-table th {
  background-color: #2a7960;
  color: white;
  font-weight: 600;
}

.resistance-table tr:nth-child(even) {
  background-color: #f8f9fa;
}

.can-resist {
  background-color: #e7f7e7 !important;
  color: #2e7d32;
  font-weight: bold;
}

.cannot-resist {
  background-color: #ffe7e7 !important;
  color: #c62828;
  font-weight: bold;
}

.invalid {
  background-color: #fff9e6 !important;
  color: #e65100;
  font-weight: bold;
}

.valid {
  background-color: #e7f7e7 !important;
  color: #2e7d32;
  font-weight: bold;
}

.transferee-protection {
  margin: 2rem 0;
}

.protection-principle {
  padding: 1.5rem;
  background: #f0f7ff;
  border-radius: 8px;
  border-left: 4px solid #2a7960;
}

.protection-rule {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-top: 1rem;
  padding: 1rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.rule-icon {
  font-size: 1.5rem;
}

.rule-content {
  flex: 1;
  font-weight: bold;
  color: #1a472a;
}

/* ========= ç»ƒä¹ é¢˜æ ·å¼ ========= */
.quiz-section {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.quiz-section h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #1a472a;
  margin-bottom: 1.5rem;
}

.quiz-item {
  background: #f9f9f9;
  border-radius: 12px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
}

.quiz-question {
  font-weight: bold;
  margin-bottom: 1.25rem;
  font-size: 1.1rem;
  line-height: 1.5;
}

.quiz-options {
  display: flex;
  gap: 1rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
}

.quiz-option {
  display: flex;
  align-items: center;
  cursor: pointer;
  padding: 0.75rem 1rem;
  border: 2px solid #ddd;
  border-radius: 5px;
  transition: all 0.3s ease;
  background: white;
  min-width: 120px;
  justify-content: center;
}

.quiz-option:hover {
  background: #f0f0f0;
}

.quiz-option.selected {
  border-color: #2a7960;
  background: #e9f7f0;
}

.quiz-option.correct {
  border-color: #28a745;
  background: #e7f7e7;
  color: #2e7d32;
}

.quiz-option.incorrect {
  border-color: #dc3545;
  background: #ffe7e7;
  color: #c62828;
}

.quiz-actions {
  margin-bottom: 1rem;
}

.answer-btn {
  background: #2a7960;
  color: white;
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 5px;
  cursor: pointer;
  transition: background 0.3s ease;
  margin-right: 0.5rem;
  font-size: 0.875rem;
}

.answer-btn:hover {
  background: #1a472a;
}

.answer-explanation {
  margin-top: 1rem;
  padding: 1rem;
  background: #f5f5f5;
  border-radius: 5px;
  line-height: 1.6;
}

.quiz-footer-actions {
  display: flex;
  gap: 1rem;
  justify-content: center;
  margin-top: 2rem;
  flex-wrap: wrap;
}

/* ========= æŒ‰é’®æ ·å¼ ========= */
.btn {
  padding: 0.75rem 1.5rem;
  border-radius: 8px;
  font-size: 0.875rem;
  font-weight: 600;
  text-align: center;
  text-decoration: none;
  transition: all 0.3s ease;
  border: none;
  cursor: pointer;
  font-family: inherit;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
}

.btn-primary {
  background: #2a7960;
  color: white;
}

.btn-primary:hover {
  background: #1a472a;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(42, 121, 96, 0.3);
}

.btn-outline {
  background: transparent;
  color: #2a7960;
  border: 1px solid #2a7960;
}

.btn-outline:hover {
  background: #e9f7f0;
  transform: translateY(-2px);
}

/* ========= åº•éƒ¨è¡ŒåŠ¨æŒ‰é’® ========= */
.action-buttons {
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin-top: 3rem;
  padding-top: 2rem;
  border-top: 1px solid #e9ecef;
  flex-wrap: wrap;
}

.action-button {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  background: linear-gradient(135deg, #2a7960, #1a472a);
  color: white;
  text-decoration: none;
  border-radius: 12px;
  font-weight: 600;
  transition: all 0.3s ease;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.action-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
}

.action-button.video {
  background: linear-gradient(135deg, #2a7960, #205e4a);
}

/* ========= å“åº”å¼è®¾è®¡ ========= */
@media (max-width: 768px) {
  .container {
    padding: 0 1rem;
  }
  
  .page-header {
    padding: 1.5rem 1rem;
  }
  
  .header-content h1 {
    font-size: 1.75rem;
  }
  
  .header-stats {
    gap: 1.5rem;
  }
  
  .stat-number {
    font-size: 1.5rem;
  }
  
  .nav-links {
    grid-template-columns: 1fr;
  }
  
  .terms-grid {
    grid-template-columns: 1fr;
  }
  
  .effect-timing {
    grid-template-columns: 1fr;
  }
  
  .contract-flow {
    grid-template-columns: 1fr;
  }
  
  .relationship-diagram {
    flex-direction: column;
  }
  
  .legal-effects {
    grid-template-columns: 1fr;
  }
  
  .mistake-types {
    grid-template-columns: 1fr;
  }
  
  .legal-principles {
    grid-template-columns: 1fr;
  }
  
  .representation-effects {
    grid-template-columns: 1fr;
  }
  
  .violation-examples {
    grid-template-columns: 1fr;
  }
  
  .faith-types {
    grid-template-columns: 1fr;
  }
  
  .quiz-options {
    flex-direction: column;
  }
  
  .quiz-option {
    min-width: auto;
  }
  
  .action-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .action-button {
    width: 100%;
    max-width: 300px;
    justify-content: center;
  }
  
  .content-section, 
  .learning-goals, 
  .quiz-section, 
  .quick-nav {
    padding: 1.5rem;
  }
}

@media (max-width: 480px) {
  .header-stats {
    flex-direction: column;
    gap: 1rem;
  }
  
  .quiz-footer-actions {
    flex-direction: column;
  }
  
  .btn {
    width: 100%;
    justify-content: center;
  }
}
</style>
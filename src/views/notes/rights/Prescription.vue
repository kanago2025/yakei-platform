<!-- src/views/notes/rights/Prescription.vue -->
<template>
  <div class="prescription-page">
    <!-- é¡µé¢å¤´éƒ¨ -->
    <div class="page-header">
      <div class="header-content">
        <div class="breadcrumb">
          <router-link to="/notes">ä¸­æ–‡ç¬”è®°</router-link> &gt; 
          <router-link to="/notes?domain=rights">æƒåˆ©å…³ç³»</router-link> &gt; 
          <span>æ—¶æ•ˆ</span>
        </div>
        <h1>æ—¶æ•ˆ</h1>
        <p>å› æ—¶é—´çš„ç»è¿‡è€Œå¼•èµ·æƒåˆ©å˜åŠ¨çš„æ³•å¾‹åˆ¶åº¦ï¼ŒåŒ…æ‹¬å–å¾—æ—¶æ•ˆå’Œæ¶ˆç­æ—¶æ•ˆ</p>
        
        <!-- å­¦ä¹ ç»Ÿè®¡ -->
        <div class="header-stats">
          <div class="stat-item">
            <span class="stat-number">12</span>
            <span class="stat-label">æ ¸å¿ƒè¦ç‚¹</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">40åˆ†é’Ÿ</span>
            <span class="stat-label">å»ºè®®å­¦ä¹ æ—¶é—´</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">5</span>
            <span class="stat-label">ç»ƒä¹ é¢˜</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">{{ userProgress }}%</span>
            <span class="stat-label">æŒæ¡è¿›åº¦</span>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
      <main class="main-content">
        <!-- å¿«é€Ÿå¯¼èˆª -->
        <div class="quick-nav">
          <h3>æœ¬é¡µå¯¼èˆª</h3>
          <div class="nav-links">
            <a 
              v-for="section in sections" 
              :key="section.id"
              :href="`#${section.id}`"
              class="nav-link"
              @click.prevent="scrollToSection(section.id)"
            >
              <span class="nav-icon">{{ section.icon }}</span>
              {{ section.title }}
            </a>
          </div>
        </div>

        <!-- å­¦ä¹ ç›®æ ‡ -->
        <section class="learning-goals">
          <h2>ğŸ¯ å­¦ä¹ ç›®æ ‡</h2>
          <ul>
            <li>ç†è§£æ—¶æ•ˆåˆ¶åº¦çš„åŸºæœ¬æ¦‚å¿µå’Œå­˜åœ¨ç†ç”±</li>
            <li>æŒæ¡å–å¾—æ—¶æ•ˆçš„æˆç«‹è¦ä»¶å’Œå æœ‰æœŸé—´è®¡ç®—</li>
            <li>ç†Ÿæ‚‰æ¶ˆç­æ—¶æ•ˆçš„æœŸé—´è®¡ç®—å’Œä¸­æ–­äº‹ç”±</li>
            <li>äº†è§£æ—¶æ•ˆçš„æ›´æ–°ã€å®ŒæˆçŠ¹äºˆåˆ¶åº¦</li>
            <li>æŒæ¡æ—¶æ•ˆçš„æ´ç”¨ã€æ”¾å¼ƒè§„åˆ™åŠå…¶æ³•å¾‹æ•ˆæœ</li>
          </ul>
        </section>

        <!-- å…³é”®æœ¯è¯­ -->
        <section id="key-terms" class="key-terms">
          <h2>ğŸ”¤ å…³é”®æœ¯è¯­</h2>
          <div class="terms-grid">
            <div 
              v-for="term in keyTerms" 
              :key="term.japanese"
              class="term-card"
            >
              <div class="term-japanese">{{ term.japanese }}</div>
              <div class="term-chinese">{{ term.chinese }}</div>
              <div class="term-explanation">{{ term.explanation }}</div>
              <div class="term-example">{{ term.example }}</div>
            </div>
          </div>
        </section>

        <!-- æ—¶æ•ˆåŸºæœ¬æ¦‚å¿µ -->
        <section id="basic-concepts" class="content-section">
          <h2>1. æ—¶æ•ˆçš„åŸºæœ¬æ¦‚å¿µ</h2>
          
          <h3>æ—¶æ•ˆçš„å®šä¹‰ä¸ç§ç±»</h3>
          <div class="concept-explanation">
            <p>æ—¶æ•ˆæ˜¯æŒ‡å› ä¸€å®šæœŸé—´çš„ç»è¿‡è€Œå¼•èµ·æƒåˆ©å…³ç³»å˜åŠ¨çš„æ³•å¾‹åˆ¶åº¦ã€‚æ—¶æ•ˆåˆ¶åº¦çš„å­˜åœ¨ç†ç”±åŒ…æ‹¬ï¼š</p>
            <ul>
              <li>å¯¹é•¿æœŸäº‹å®å…³ç³»çš„ä¿¡èµ–ä¿æŠ¤</li>
              <li>ä¸ä¿æŠ¤"èººåœ¨æƒåˆ©ä¸Šç¡è§‰çš„äºº"</li>
              <li>èŠ‚çœå¸æ³•èµ„æºï¼Œç»´æŠ¤ç¤¾ä¼šå®‰å®š</li>
            </ul>
            
            <div class="prescription-types">
              <div class="type-card">
                <div class="type-icon">ğŸ“ˆ</div>
                <div class="type-content">
                  <h4>å–å¾—æ—¶æ•ˆ</h4>
                  <p>æ—¶é—´ç»è¿‡ â†’ å–å¾—æƒåˆ©</p>
                  <p class="type-desc">å æœ‰ä»–äººä¹‹ç‰©æ»¡è¶³ä¸€å®šæ¡ä»¶åå–å¾—æ‰€æœ‰æƒ</p>
                </div>
              </div>
              <div class="type-card">
                <div class="type-icon">ğŸ“‰</div>
                <div class="type-content">
                  <h4>æ¶ˆç­æ—¶æ•ˆ</h4>
                  <p>æ—¶é—´ç»è¿‡ â†’ ä¸§å¤±æƒåˆ©</p>
                  <p class="type-desc">æƒåˆ©äººåœ¨ä¸€å®šæœŸé—´å†…ä¸è¡Œä½¿æƒåˆ©å¯¼è‡´æƒåˆ©æ¶ˆç­</p>
                </div>
              </div>
            </div>
          </div>

          <h3>å¯é€šè¿‡æ—¶æ•ˆå–å¾—çš„æƒåˆ©</h3>
          <div class="acquirable-rights">
            <div class="rights-grid">
              <div class="right-item">
                <div class="right-icon">ğŸ </div>
                <div class="right-name">æ‰€æœ‰æƒ</div>
              </div>
              <div class="right-item">
                <div class="right-icon">ğŸ“</div>
                <div class="right-name">åœ°ä¸Šæƒ</div>
              </div>
              <div class="right-item">
                <div class="right-icon">ğŸ”‘</div>
                <div class="right-name">æ°¸ä½ƒæƒ</div>
              </div>
              <div class="right-item">
                <div class="right-icon">ğŸ›£ï¸</div>
                <div class="right-name">åœ°å½¹æƒ</div>
              </div>
            </div>
          </div>
        </section>

        <!-- å–å¾—æ—¶æ•ˆ -->
        <section id="acquisitive-prescription" class="content-section">
          <h2>2. å–å¾—æ—¶æ•ˆ</h2>
          
          <h3>æˆç«‹è¦ä»¶</h3>
          <div class="requirements">
            <div class="requirement-step">
              <div class="step-number">1</div>
              <div class="step-content">
                <h4>ä»¥æ‰€æœ‰çš„æ„æ€å æœ‰</h4>
                <p>å°†è‡ªå·±çš„ç‰©ä½œä¸ºè‡ªå·±æ‰€æœ‰è€Œå æœ‰çš„æ„æ€</p>
                <div class="example-box">
                  <strong>ä¾‹å­ï¼š</strong>ç§Ÿèµçš„æƒ…å†µä¸‹ï¼Œæ— è®ºå æœ‰å¤šå°‘å¹´éƒ½æ— æ³•é€šè¿‡æ—¶æ•ˆå–å¾—ï¼Œå› ä¸ºç¼ºä¹"æ‰€æœ‰çš„æ„æ€"
                </div>
              </div>
            </div>
            <div class="requirement-step">
              <div class="step-number">2</div>
              <div class="step-content">
                <h4>å¹³ç¨³ä¸”å…¬ç„¶å æœ‰</h4>
                <p>ä¸æ˜¯é€šè¿‡æš´åŠ›æ‰‹æ®µå–å¾—ï¼Œä¹Ÿä¸æ˜¯ç§˜å¯†å æœ‰</p>
                <div class="example-box">
                  <strong>ä¾‹å­ï¼š</strong>å…¬å¼€åœ¨åœŸåœ°ä¸Šå»ºé€ æˆ¿å±‹å¹¶å±…ä½
                </div>
              </div>
            </div>
            <div class="requirement-step">
              <div class="step-number">3</div>
              <div class="step-content">
                <h4>æ»¡è¶³å æœ‰æœŸé—´</h4>
                <div class="timing-table">
                  <table>
                    <thead>
                      <tr>
                        <th>å æœ‰å¼€å§‹æ—¶çš„çŠ¶æ€</th>
                        <th>æ‰€éœ€æœŸé—´</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>å–„æ„æ— è¿‡å¤±</td>
                        <td class="highlight">10å¹´</td>
                      </tr>
                      <tr>
                        <td>å–„æ„æœ‰è¿‡å¤±ãƒ»æ¶æ„</td>
                        <td class="highlight">20å¹´</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <h3>å æœ‰æœŸé—´çš„ç‰¹åˆ«è®¡ç®—</h3>
          <div class="special-calculation">
            <div class="calculation-case">
              <h4>æ¡ˆä¾‹1ï¼šå‡ºç§ŸæœŸé—´çš„è®¡ç®—</h4>
              <div class="case-flow">
                <div class="flow-step">
                  <div class="step-label">Aè‡ªä¸»å æœ‰</div>
                  <div class="step-duration">7å¹´</div>
                </div>
                <div class="flow-arrow">â†’</div>
                <div class="flow-step">
                  <div class="step-label">å‡ºç§Ÿç»™B</div>
                  <div class="step-duration">3å¹´</div>
                </div>
                <div class="flow-arrow">â†’</div>
                <div class="flow-step">
                  <div class="step-label">æ—¶æ•ˆå®Œæˆ</div>
                  <div class="step-result">Aå–å¾—æ‰€æœ‰æƒ</div>
                </div>
              </div>
              <p class="case-note">â€» å‡ºç§ŸæœŸé—´ä¹Ÿè®¡å…¥å æœ‰æœŸé—´ï¼Œå› ä¸ºAé€šè¿‡Bç»§ç»­å æœ‰</p>
            </div>

            <div class="calculation-case">
              <h4>æ¡ˆä¾‹2ï¼šå æœ‰æ‰¿ç»§çš„è®¡ç®—</h4>
              <div class="case-flow">
                <div class="flow-step">
                  <div class="step-label">Aå–„æ„æ— è¿‡å¤±å æœ‰</div>
                  <div class="step-duration">7å¹´</div>
                </div>
                <div class="flow-arrow">â†’</div>
                <div class="flow-step">
                  <div class="step-label">Bç»§æ‰¿ï¼ˆæ¶æ„ï¼‰</div>
                  <div class="step-duration">3å¹´</div>
                </div>
                <div class="flow-arrow">â†’</div>
                <div class="flow-step">
                  <div class="step-label">æ—¶æ•ˆå®Œæˆ</div>
                  <div class="step-result">Bå–å¾—æ‰€æœ‰æƒ</div>
                </div>
              </div>
              <p class="case-note">â€» å æœ‰æ‰¿ç»§æ—¶ï¼Œå–„æ„æ¶æ„çœ‹å æœ‰å¼€å§‹æ—¶çš„çŠ¶æ€ï¼ŒBåªéœ€å†å æœ‰3å¹´å³å¯å®Œæˆæ—¶æ•ˆ</p>
            </div>
          </div>

          <h3>å æœ‰æ‰¿ç»§çš„ç‰¹æ®Šè§„åˆ™</h3>
          <div class="succession-rules">
            <div class="rule-item">
              <div class="rule-icon">âš ï¸</div>
              <div class="rule-content">
                <h4>ç‘•ç–µæ‰¿ç»§åŸåˆ™</h4>
                <p>å æœ‰æ‰¿ç»§äººæ‰¿ç»§å‰ä¸»çš„å æœ‰ç‘•ç–µï¼ˆå¦‚æ¶æ„ï¼‰</p>
              </div>
            </div>
            <div class="rule-item">
              <div class="rule-icon">âœ…</div>
              <div class="rule-content">
                <h4>æœŸé—´åˆå¹¶è®¡ç®—</h4>
                <p>æ‰¿ç»§äººå¯ä»¥å°†è‡ªå·±çš„å æœ‰æœŸé—´ä¸å‰ä¸»çš„å æœ‰æœŸé—´åˆå¹¶è®¡ç®—</p>
              </div>
            </div>
          </div>
        </section>

        <!-- æ¶ˆç­æ—¶æ•ˆ -->
        <section id="extinctive-prescription" class="content-section">
          <h2>3. æ¶ˆç­æ—¶æ•ˆ</h2>
          
          <h3>æ¶ˆç­æ—¶æ•ˆçš„æœŸé—´</h3>
          <div class="extinctive-periods">
            <div class="period-diagram">
              <div class="period-path">
                <div class="period-start">
                  <div class="period-label">æƒåˆ©è¡Œä½¿å¯èƒ½æ—¶</div>
                  <div class="period-arrow">â†“</div>
                  <div class="period-duration">10å¹´</div>
                </div>
                <div class="period-divider">æˆ–</div>
                <div class="period-start">
                  <div class="period-label">çŸ¥é“æƒåˆ©æ—¶</div>
                  <div class="period-arrow">â†“</div>
                  <div class="period-duration">5å¹´</div>
                </div>
              </div>
              <div class="period-result">æ—¶æ•ˆå®Œæˆ</div>
            </div>
            <p class="period-note">â€» ä»¥è¾ƒæ—©åˆ°è¾¾çš„æœŸé—´ä¸ºå‡†</p>
          </div>

          <h3>"æƒåˆ©è¡Œä½¿å¯èƒ½æ—¶"çš„è§£é‡Š</h3>
          <div class="exercisable-time">
            <div class="time-table">
              <table>
                <thead>
                  <tr>
                    <th>å€ºåŠ¡ç±»å‹</th>
                    <th>ä¾‹å­</th>
                    <th>æ¶ˆç­æ—¶æ•ˆå¼€å§‹</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>ç¡®å®šæœŸé™ä»˜å€ºåŠ¡</td>
                    <td>4æœˆ1æ—¥äº¤è´§</td>
                    <td>æœŸé™åˆ°æ¥æ—¶</td>
                  </tr>
                  <tr>
                    <td>ä¸ç¡®å®šæœŸé™ä»˜å€ºåŠ¡</td>
                    <td>Açš„çˆ¶äº²æ­»äº¡æ—¶äº¤è´§</td>
                    <td>æœŸé™åˆ°æ¥æ—¶</td>
                  </tr>
                  <tr>
                    <td>åœæ­¢æ¡ä»¶ä»˜å€ºåŠ¡</td>
                    <td>Aè€ƒè¯•åˆæ ¼æ—¶äº¤è´§</td>
                    <td>æ¡ä»¶æˆå°±æ—¶</td>
                  </tr>
                  <tr>
                    <td>æ— æœŸé™å€ºåŠ¡</td>
                    <td>â€”</td>
                    <td>ç«‹å³å¼€å§‹</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <h3>ç‰¹æ®Šå€ºæƒçš„æ¶ˆç­æ—¶æ•ˆ</h3>
          <div class="special-debts">
            <div class="debt-type">
              <h4>ç”Ÿå‘½å¥åº·æŸå®³èµ”å¿å€ºæƒ</h4>
              <div class="debt-periods">
                <div class="debt-period">
                  <div class="period-condition">çŸ¥é“æŸå®³æ—¶</div>
                  <div class="period-arrow">â†’</div>
                  <div class="period-years">5å¹´</div>
                </div>
                <div class="debt-period">
                  <div class="period-condition">æƒåˆ©è¡Œä½¿å¯èƒ½æ—¶</div>
                  <div class="period-arrow">â†’</div>
                  <div class="period-years">20å¹´</div>
                </div>
              </div>
              <p class="debt-note">â€» è€ƒè™‘åˆ°æ…¢æ€§ç—…å¯èƒ½å¤šå¹´åæ‰è¢«å‘ç°ï¼Œç‰¹æ„å»¶é•¿è‡³20å¹´</p>
            </div>
          </div>

          <h3>ä¸é€‚ç”¨æ¶ˆç­æ—¶æ•ˆçš„æƒåˆ©</h3>
          <div class="non-extinctive">
            <div class="non-extinctive-item">
              <div class="item-icon">ğŸ </div>
              <div class="item-content">
                <h4>æ‰€æœ‰æƒ</h4>
                <p>æ‰€æœ‰æƒä¸å› æ¶ˆç­æ—¶æ•ˆè€Œæ¶ˆç­ï¼Œå³ä½¿30å¹´æœªä½¿ç”¨çš„åˆ«å¢…ï¼Œæ‰€æœ‰è€…ä»ç„¶æ˜¯æ‰€æœ‰è€…</p>
              </div>
            </div>
          </div>
        </section>

        <!-- æ—¶æ•ˆçš„æ›´æ–°ä¸å®ŒæˆçŠ¹äºˆ -->
        <section id="prescription-renewal" class="content-section">
          <h2>4. æ—¶æ•ˆçš„æ›´æ–°ä¸å®ŒæˆçŠ¹äºˆ</h2>
          
          <h3>åŸºæœ¬æ¦‚å¿µåŒºåˆ†</h3>
          <div class="renewal-concepts">
            <div class="concept-card">
              <div class="concept-icon">ğŸ”„</div>
              <div class="concept-content">
                <h4>æ—¶æ•ˆçš„æ›´æ–°</h4>
                <p>å°†å·²ç»ç»è¿‡çš„æœŸé—´å½’é›¶ï¼Œé‡æ–°å¼€å§‹è®¡ç®—</p>
              </div>
            </div>
            <div class="concept-card">
              <div class="concept-icon">â¸ï¸</div>
              <div class="concept-content">
                <h4>æ—¶æ•ˆçš„å®ŒæˆçŠ¹äºˆ</h4>
                <p>æ—¶æ•ˆå®Œæˆè¿‡ç¨‹æš‚åœï¼ŒæœŸé—´åœæ­¢è®¡ç®—</p>
              </div>
            </div>
          </div>

          <h3>è£åˆ¤ä¸Šçš„è¯·æ±‚</h3>
          <div class="judicial-request">
            <div class="request-flow">
              <div class="flow-step">
                <div class="step-icon">âš–ï¸</div>
                <div class="step-content">
                  <h4>æèµ·è¯‰è®¼</h4>
                  <p class="step-effect">â†’ æ—¶æ•ˆå®ŒæˆçŠ¹äºˆ</p>
                </div>
              </div>
              <div class="flow-branch">
                <div class="branch-option">
                  <div class="option-icon">âœ…</div>
                  <div class="option-content">
                    <h5>èƒœè¯‰</h5>
                    <p class="option-effect">â†’ æ—¶æ•ˆæ›´æ–°</p>
                  </div>
                </div>
                <div class="branch-option">
                  <div class="option-icon">âŒ</div>
                  <div class="option-content">
                    <h5>æ’¤è¯‰ãƒ»é©³å›</h5>
                    <p class="option-effect">â†’ 6ä¸ªæœˆå®ŒæˆçŠ¹äºˆ</p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <h3>å…¶ä»–ä¸­æ–­äº‹ç”±</h3>
          <div class="other-interruptions">
            <div class="interruption-item">
              <div class="interruption-icon">ğŸ“¨</div>
              <div class="interruption-content">
                <h4>è£åˆ¤å¤–è¯·æ±‚ï¼ˆå‚¬å‘Šï¼‰</h4>
                <p>å‘é€å†…å®¹è¯æ˜é‚®ä»¶ç­‰ â†’ <strong>6ä¸ªæœˆå®ŒæˆçŠ¹äºˆ</strong></p>
                <p class="interruption-note">â€» åªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œå†æ¬¡å‚¬å‘Šæ— æ•ˆ</p>
              </div>
            </div>
            <div class="interruption-item">
              <div class="interruption-icon">ğŸ¤</div>
              <div class="interruption-content">
                <h4>æ‰¿è®¤</h4>
                <p>å€ºåŠ¡äººæ‰¿è®¤å€ºåŠ¡ â†’ <strong>æ—¶æ•ˆæ›´æ–°</strong></p>
                <div class="acknowledgment-examples">
                  <div class="example">
                    <div class="example-icon">ğŸ’°</div>
                    <div class="example-text">å€ºåŠ¡çš„éƒ¨åˆ†æ¸…å¿</div>
                  </div>
                  <div class="example">
                    <div class="example-icon">â³</div>
                    <div class="example-text">è¯·æ±‚æ”¯ä»˜å»¶æœŸ</div>
                  </div>
                </div>
              </div>
            </div>
            <div class="interruption-item">
              <div class="interruption-icon">ğŸ›¡ï¸</div>
              <div class="interruption-content">
                <h4>ä¸´æ—¶æ‰£æŠ¼ãƒ»è´¢äº§ä¿å…¨</h4>
                <p>ç”³è¯·è´¢äº§ä¿å…¨ â†’ <strong>6ä¸ªæœˆå®ŒæˆçŠ¹äºˆ</strong></p>
              </div>
            </div>
          </div>
        </section>

        <!-- æ—¶æ•ˆçš„æ´ç”¨ä¸æ”¾å¼ƒ -->
        <section id="prescription-invocation" class="content-section">
          <h2>5. æ—¶æ•ˆçš„æ´ç”¨ä¸æ”¾å¼ƒ</h2>
          
          <h3>æ—¶æ•ˆçš„æ´ç”¨</h3>
          <div class="invocation-explanation">
            <div class="invocation-principle">
              <div class="principle-icon">â„¹ï¸</div>
              <div class="principle-content">
                <h4>æ´ç”¨çš„å¿…è¦æ€§</h4>
                <p>æ—¶æ•ˆå®Œæˆåä¸ä¼šè‡ªåŠ¨äº§ç”Ÿæ•ˆæœï¼Œå¿…é¡»ç”±å½“äº‹äººä¸»å¼ ï¼ˆæ´ç”¨ï¼‰æ‰èƒ½äº«å—æ—¶æ•ˆåˆ©ç›Š</p>
              </div>
            </div>

            <div class="invocation-process">
              <div class="process-step">
                <div class="step-number">1</div>
                <div class="step-content">
                  <h4>æ—¶æ•ˆå®Œæˆ</h4>
                  <p>ç»è¿‡æ³•å®šæœŸé—´ï¼Œæ—¶æ•ˆæ¡ä»¶æ»¡è¶³</p>
                </div>
              </div>
              <div class="process-arrow">â†’</div>
              <div class="process-step">
                <div class="step-number">2</div>
                <div class="step-content">
                  <h4>å¯é€‰æ‹©çŠ¶æ€</h4>
                  <p>å½“äº‹äººå¯ä»¥é€‰æ‹©æ˜¯å¦ä½¿ç”¨æ—¶æ•ˆåˆ©ç›Š</p>
                </div>
              </div>
              <div class="process-arrow">â†’</div>
              <div class="process-step">
                <div class="step-number">3</div>
                <div class="step-content">
                  <h4>æ´ç”¨æ„æ€è¡¨ç¤º</h4>
                  <p>"æˆ‘è¦ä½¿ç”¨æ—¶æ•ˆåˆ©ç›Š"çš„æ„æ€è¡¨ç¤º</p>
                </div>
              </div>
            </div>
          </div>

          <h3>å¯ä»¥æ´ç”¨æ—¶æ•ˆçš„äºº</h3>
          <div class="invocation-persons">
            <div class="persons-grid">
              <div class="person-item">
                <div class="person-icon">ğŸ‘¤</div>
                <div class="person-name">å€ºåŠ¡äºº</div>
              </div>
              <div class="person-item">
                <div class="person-icon">ğŸ¤</div>
                <div class="person-name">ä¿è¯äºº</div>
              </div>
              <div class="person-item">
                <div class="person-icon">ğŸ¢</div>
                <div class="person-name">ç‰©ä¸Šä¿è¯äºº</div>
              </div>
              <div class="person-item">
                <div class="person-icon">ğŸ”‘</div>
                <div class="person-name">æŠµæŠ¼ä¸åŠ¨äº§ç¬¬ä¸‰å–å¾—è€…</div>
              </div>
            </div>
            <p class="persons-note">â€» å¿…é¡»æ˜¯å› æ—¶æ•ˆè€Œç›´æ¥å—ç›Šçš„äºº</p>
          </div>

          <h3>æ—¶æ•ˆåˆ©ç›Šçš„æ”¾å¼ƒ</h3>
          <div class="abandonment-rules">
            <div class="abandonment-timing">
              <div class="timing-item invalid">
                <div class="timing-icon">ğŸš«</div>
                <div class="timing-content">
                  <h4>æ—¶æ•ˆå®Œæˆå‰</h4>
                  <p>ä¸å¾—æ”¾å¼ƒæ—¶æ•ˆåˆ©ç›Šï¼ˆæ”¾å¼ƒç‰¹çº¦æ— æ•ˆï¼‰</p>
                </div>
              </div>
              <div class="timing-item valid">
                <div class="timing-icon">âœ…</div>
                <div class="timing-content">
                  <h4>æ—¶æ•ˆå®Œæˆå</h4>
                  <p>å¯ä»¥æ”¾å¼ƒæ—¶æ•ˆåˆ©ç›Š</p>
                </div>
              </div>
            </div>

            <div class="abandonment-effect">
              <h4>æ‰¿è®¤çš„ç‰¹æ®Šæ•ˆæœ</h4>
              <div class="effect-warning">
                <div class="warning-icon">âš ï¸</div>
                <div class="warning-content">
                  <p>æ—¶æ•ˆå®Œæˆåï¼Œå€ºåŠ¡äººå³ä½¿ä¸çŸ¥é“æ—¶æ•ˆå®Œæˆè€Œæ‰¿è®¤å€ºåŠ¡ï¼Œä¹Ÿä¸èƒ½å†æ´ç”¨æ—¶æ•ˆ</p>
                </div>
              </div>
            </div>
          </div>

          <h3>æ—¶æ•ˆçš„æº¯åŠæ•ˆ</h3>
          <div class="retroactive-effect">
            <div class="retroactive-principle">
              <div class="principle-icon">â†©ï¸</div>
              <div class="principle-content">
                <h4>æ•ˆæœè¿½æº¯åˆ°èµ·ç®—æ—¥</h4>
                <p>æ—¶æ•ˆå®Œæˆåï¼Œå…¶æ³•å¾‹æ•ˆæœè¿½æº¯åˆ°æ—¶æ•ˆæœŸé—´çš„èµ·ç®—æ—¥</p>
              </div>
            </div>

            <div class="retroactive-examples">
              <div class="example-item">
                <h4>å–å¾—æ—¶æ•ˆçš„åœºåˆ</h4>
                <p>è§†ä¸ºä»ä¸€å¼€å§‹å°±æ˜¯æ‰€æœ‰è€… â†’ ä¸éœ€è¦æŸå®³èµ”å¿</p>
              </div>
              <div class="example-item">
                <h4>æ¶ˆç­æ—¶æ•ˆçš„åœºåˆ</h4>
                <p>è§†ä¸ºä»ä¸€å¼€å§‹å°±æ²¡æœ‰å€Ÿè´·å…³ç³» â†’ ä¸éœ€è¦æ”¯ä»˜è¿Ÿå»¶æŸå®³é‡‘</p>
              </div>
            </div>
          </div>
        </section>

        <!-- ç»ƒä¹ é¢˜ -->
        <section id="quiz" class="quiz-section">
          <h2>âœï¸ ç»ƒä¹ é¢˜</h2>
          
          <div 
            v-for="(quiz, index) in quizzes" 
            :key="index"
            class="quiz-item"
          >
            <div class="quiz-question">{{ quiz.question }}</div>
            <div class="quiz-options">
              <div 
                v-for="option in quiz.options" 
                :key="option.text"
                class="quiz-option"
                :class="{ 
                  'selected': selectedAnswers[index] === option.text,
                  'correct': showAnswers && option.correct,
                  'incorrect': showAnswers && selectedAnswers[index] === option.text && !option.correct
                }"
                @click="selectAnswer(index, option.text)"
              >
                {{ option.text }}
              </div>
            </div>
            <div class="quiz-actions">
              <button class="answer-btn" @click="toggleAnswer(index)">
                {{ showAnswerIndex === index ? 'éšè—ç­”æ¡ˆ' : 'æ˜¾ç¤ºç­”æ¡ˆ' }}
              </button>
            </div>
            <div 
              v-if="showAnswerIndex === index" 
              class="answer-explanation"
            >
              <strong>ç­”æ¡ˆï¼š</strong> {{ getCorrectAnswer(quiz) }}<br>
              <strong>ä¸­æ–‡è§£é‡Šï¼š</strong> {{ quiz.explanation }}
            </div>
          </div>

          <div class="quiz-footer-actions">
            <button class="btn btn-primary" @click="checkAllAnswers">
              æ£€æŸ¥å…¨éƒ¨ç­”æ¡ˆ
            </button>
            <button class="btn btn-outline" @click="resetQuiz">
              é‡æ–°ç»ƒä¹ 
            </button>
          </div>
        </section>

        <!-- åº•éƒ¨è¡ŒåŠ¨æŒ‰é’® -->
        <div class="action-buttons">
          <router-link to="/video?topic=prescription" class="action-button video">
            <span>ğŸ“º</span>
            è§‚çœ‹ç›¸å…³è§†é¢‘
          </router-link>
          <router-link to="/practice?topic=prescription" class="action-button">
            <span>ğŸ“</span>
            å¼€å§‹å¼ºåŒ–ç»ƒä¹ 
          </router-link>
          <router-link to="/notes?domain=rights" class="action-button">
            <span>ğŸ“š</span>
            è¿”å›æƒåˆ©å…³ç³»
          </router-link>
        </div>
      </main>
    </div>
  </div>
</template>

<script setup>
import { ref, computed, onMounted, onUnmounted } from 'vue'
import { useLearningStore } from '@/stores/learning'
import { useRouter } from 'vue-router'

const learningStore = useLearningStore()
const router = useRouter()

// ç”¨æˆ·å­¦ä¹ è¿›åº¦
const userProgress = ref(0)
const startTime = ref(new Date())

// é¡µé¢ç« èŠ‚å¯¼èˆª
const sections = [
  { id: 'key-terms', title: 'å…³é”®æœ¯è¯­', icon: 'ğŸ”¤' },
  { id: 'basic-concepts', title: 'åŸºæœ¬æ¦‚å¿µ', icon: 'ğŸ“–' },
  { id: 'acquisitive-prescription', title: 'å–å¾—æ—¶æ•ˆ', icon: 'ğŸ“ˆ' },
  { id: 'extinctive-prescription', title: 'æ¶ˆç­æ—¶æ•ˆ', icon: 'ğŸ“‰' },
  { id: 'prescription-renewal', title: 'æ›´æ–°ä¸çŠ¹äºˆ', icon: 'ğŸ”„' },
  { id: 'prescription-invocation', title: 'æ´ç”¨ä¸æ”¾å¼ƒ', icon: 'âš–ï¸' },
  { id: 'quiz', title: 'ç»ƒä¹ é¢˜', icon: 'âœï¸' }
]

// å…³é”®æœ¯è¯­æ•°æ®
const keyTerms = [
  {
    japanese: 'å–å¾—æ™‚åŠ¹ï¼ˆã—ã‚…ã¨ãã˜ã“ã†ï¼‰',
    chinese: 'å–å¾—æ—¶æ•ˆ',
    explanation: 'å› ä¸€å®šæœŸé—´çš„æŒç»­å æœ‰è€Œå–å¾—æƒåˆ©çš„åˆ¶åº¦',
    example: 'å æœ‰ä»–äººåœŸåœ°20å¹´åå–å¾—è¯¥åœŸåœ°æ‰€æœ‰æƒ'
  },
  {
    japanese: 'æ¶ˆæ»…æ™‚åŠ¹ï¼ˆã—ã‚‡ã†ã‚ã¤ã˜ã“ã†ï¼‰',
    chinese: 'æ¶ˆç­æ—¶æ•ˆ',
    explanation: 'å› æƒåˆ©äººåœ¨ä¸€å®šæœŸé—´å†…ä¸è¡Œä½¿æƒåˆ©è€Œå¯¼è‡´æƒåˆ©æ¶ˆç­çš„åˆ¶åº¦',
    example: 'å€Ÿæ¬¾10å¹´å†…æœªä¸»å¼ æƒåˆ©ï¼Œå€ºæƒæ¶ˆç­'
  },
  {
    japanese: 'æ™‚åŠ¹ã®æ´ç”¨ï¼ˆã˜ã“ã†ã®ãˆã‚“ã‚ˆã†ï¼‰',
    chinese: 'æ—¶æ•ˆçš„æ´ç”¨',
    explanation: 'ä¸»å¼ äº«å—æ—¶æ•ˆåˆ©ç›Šçš„æ„æ€è¡¨ç¤º',
    example: 'å€ºåŠ¡äººä¸»å¼ "å› æ—¶æ•ˆå®Œæˆï¼Œæˆ‘ä¸éœ€è¦å¿è¿˜å€ºåŠ¡"'
  },
  {
    japanese: 'æ™‚åŠ¹ã®æ›´æ–°ï¼ˆã˜ã“ã†ã®ã“ã†ã—ã‚“ï¼‰',
    chinese: 'æ—¶æ•ˆçš„æ›´æ–°',
    explanation: 'å› ç‰¹å®šäº‹ç”±ä½¿å·²ç»ç»è¿‡çš„æ—¶æ•ˆæœŸé—´å½’é›¶ï¼Œé‡æ–°å¼€å§‹è®¡ç®—',
    example: 'å€ºåŠ¡äººæ‰¿è®¤å€ºåŠ¡åï¼Œæ¶ˆç­æ—¶æ•ˆæœŸé—´é‡æ–°è®¡ç®—'
  },
  {
    japanese: 'æ™‚åŠ¹ã®å®ŒæˆçŒ¶äºˆï¼ˆã˜ã“ã†ã®ã‹ã‚“ã›ã„ã‚†ã†ã‚ˆï¼‰',
    chinese: 'æ—¶æ•ˆçš„å®ŒæˆçŠ¹äºˆ',
    explanation: 'å› ç‰¹å®šäº‹ç”±ä½¿æ—¶æ•ˆå®Œæˆè¿‡ç¨‹æš‚åœ',
    example: 'æèµ·è¯‰è®¼åï¼Œæ—¶æ•ˆå®Œæˆè¿‡ç¨‹æš‚åœ'
  }
]

// ç»ƒä¹ é¢˜æ•°æ®
const quizzes = [
  {
    question: 'ï¼¡ãŒï¼¢ã®æ‰€æœ‰åœ°ã‚’é•·æœŸé–“å æœ‰ã—ã¦ã„ã‚‹ã€‚ï¼¡ãŒå–„æ„ç„¡éå¤±ã§å æœ‰ã‚’é–‹å§‹ã—ã€æ‰€æœ‰ã®æ„æ€ã‚’ã‚‚ã£ã¦ã€å¹³ç©ã‹ã¤å…¬ç„¶ã«ï¼—å¹´é–“å æœ‰ã‚’ç¶šã‘ãŸå¾Œã€ï¼£ã«ï¼“å¹´é–“è³ƒè²¸ã—ãŸå ´åˆã€ï¼¡ã¯ã€ãã®åœŸåœ°ã®æ‰€æœ‰æ¨©ã‚’æ™‚åŠ¹å–å¾—ã™ã‚‹ã“ã¨ã¯ã§ããªã„ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: false },
      { text: 'âœ• (èª¤ã‚Š)', correct: true }
    ],
    explanation: 'å‡ºç§ŸæœŸé—´ä¹Ÿè®¡å…¥å æœ‰æœŸé—´ï¼Œå› ä¸ºAé€šè¿‡Cç»§ç»­å æœ‰ï¼Œåˆè®¡10å¹´æ»¡è¶³å–å¾—æ—¶æ•ˆè¦ä»¶ã€‚'
  },
  {
    question: 'ï¼¡æ‰€æœ‰ã®åœŸåœ°ã®å æœ‰è€…ãŒï¼¡ã‹ã‚‰ï¼¢ã€ï¼¢ã‹ã‚‰ï¼£ã¨ç§»ã£ãŸã€‚ï¼¢ãŒå¹³ç©ãƒ»å…¬ç„¶ãƒ»å–„æ„ãƒ»ç„¡éå¤±ã«æ‰€æœ‰ã®æ„æ€ã‚’ã‚‚ã£ã¦ï¼˜å¹´é–“å æœ‰ã—ã€ï¼£ãŒï¼¢ã‹ã‚‰åœŸåœ°ã®è­²æ¸¡ã‚’å—ã‘ã¦ï¼’å¹´é–“å æœ‰ã—ãŸå ´åˆã€å½“è©²åœŸåœ°ã®çœŸã®æ‰€æœ‰è€…ã¯ï¼¢ã§ã¯ãªã‹ã£ãŸã¨ï¼£ãŒçŸ¥ã£ã¦ã„ãŸã¨ã—ã¦ã‚‚ã€ï¼£ã¯10å¹´ã®å–å¾—æ™‚åŠ¹ã‚’ä¸»å¼µã§ãã‚‹ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: true },
      { text: 'âœ• (èª¤ã‚Š)', correct: false }
    ],
    explanation: 'å æœ‰æ‰¿ç»§æ—¶ï¼Œå–„æ„æ¶æ„çœ‹å æœ‰å¼€å§‹æ—¶çš„çŠ¶æ€ï¼ŒBæ˜¯å–„æ„æ— è¿‡å¤±ï¼ŒCåªéœ€å†å æœ‰2å¹´å³å¯å®Œæˆ10å¹´å–å¾—æ—¶æ•ˆã€‚'
  },
  {
    question: 'ï¼¢ã¯ã€ï¼¡æ‰€æœ‰ã®åœŸåœ°ã‚’ï¼¡ã®ã‚‚ã®ã§ã‚ã‚‹ã¨çŸ¥ã£ã¦å æœ‰ã‚’ç¶šã‘ã€ã“ã®åœŸåœ°ã®æ‰€æœ‰æ¨©ã‚’æ™‚åŠ¹ã«ã‚ˆã‚Šå–å¾—ã—ãŸã€‚ã“ã®å ´åˆã«ãŠã„ã¦ã€ï¼¢ãŒæ‰€æœ‰æ¨©ã‚’å–å¾—ã—ãŸæ™‚ç‚¹ã¯ã€æ™‚åŠ¹ãŒå®Œæˆã—ãŸã¨ãã§ã‚ã‚‹ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: false },
      { text: 'âœ• (èª¤ã‚Š)', correct: true }
    ],
    explanation: 'æ—¶æ•ˆå…·æœ‰æº¯åŠæ•ˆï¼Œæ•ˆæœè¿½æº¯åˆ°èµ·ç®—æ—¥ï¼Œä¸æ˜¯æ—¶æ•ˆå®Œæˆæ—¶ã€‚'
  },
  {
    question: 'Aã¯ã€Bã«å¯¾ã—å»ºç‰©ã‚’è³ƒè²¸ã—ã€æœˆé¡10ä¸‡å††ã®è³ƒæ–™å‚µæ¨©ã‚’æœ‰ã—ã¦ã„ã‚‹ã€‚AãŒã€Bã«å¯¾ã™ã‚‹è³ƒæ–™å‚µæ¨©ã«ã¤ãå†…å®¹è¨¼æ˜éƒµä¾¿ã«ã‚ˆã‚Šæ”¯æ‰•ã‚’è«‹æ±‚ã—ãŸã¨ãã¯ã€ãã®è«‹æ±‚ã«ã‚ˆã‚Šæ¶ˆæ»…æ™‚åŠ¹ã¯æ›´æ–°ã™ã‚‹ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: false },
      { text: 'âœ• (èª¤ã‚Š)', correct: true }
    ],
    explanation: 'è£åˆ¤å¤–è¯·æ±‚ï¼ˆå‚¬å‘Šï¼‰åªäº§ç”Ÿ6ä¸ªæœˆçš„å®ŒæˆçŠ¹äºˆï¼Œä¸äº§ç”Ÿæ—¶æ•ˆæ›´æ–°æ•ˆæœã€‚'
  },
  {
    question: 'Aã¯ã€Bã«å¯¾ã—å»ºç‰©ã‚’è³ƒè²¸ã—ã€æœˆé¡10ä¸‡å††ã®è³ƒæ–™å‚µæ¨©ã‚’æœ‰ã—ã¦ã„ã‚‹ã€‚BãŒã€è³ƒæ–™å‚µæ¨©ã®æ¶ˆæ»…æ™‚åŠ¹ãŒå®Œæˆã—ãŸå¾Œã«ãã®è³ƒæ–™å‚µæ¨©ã‚’æ‰¿èªã—ãŸã¨ãã¯ã€æ¶ˆæ»…æ™‚åŠ¹ã®å®Œæˆã‚’çŸ¥ã‚‰ãªã‹ã£ãŸã¨ãã§ã‚‚ã€ãã®å®Œæˆã—ãŸæ¶ˆæ»…æ™‚åŠ¹ã®æ´ç”¨ã‚’ã™ã‚‹ã“ã¨ã¯è¨±ã•ã‚Œãªã„ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: true },
      { text: 'âœ• (èª¤ã‚Š)', correct: false }
    ],
    explanation: 'æ—¶æ•ˆå®Œæˆåæ‰¿è®¤å€ºåŠ¡ï¼Œå³ä½¿ä¸çŸ¥é“æ—¶æ•ˆå®Œæˆçš„äº‹å®ï¼ŒåŸºäºè¯šä¿¡åŸåˆ™ä¹Ÿä¸èƒ½å†æ´ç”¨æ—¶æ•ˆã€‚'
  }
]

// ç­”é¢˜çŠ¶æ€
const selectedAnswers = ref(Array(quizzes.length).fill(null))
const showAnswerIndex = ref(null)
const showAnswers = ref(false)

// æ–¹æ³•
const scrollToSection = (sectionId) => {
  const element = document.getElementById(sectionId)
  if (element) {
    element.scrollIntoView({ behavior: 'smooth' })
  }
}

const selectAnswer = (index, answer) => {
  selectedAnswers.value[index] = answer
  // æ›´æ–°å­¦ä¹ è¿›åº¦
  updateProgress()
}

const toggleAnswer = (index) => {
  showAnswerIndex.value = showAnswerIndex.value === index ? null : index
}

const getCorrectAnswer = (quiz) => {
  const correctOption = quiz.options.find(option => option.correct)
  return correctOption ? correctOption.text : ''
}

const checkAllAnswers = () => {
  showAnswers.value = true
  updateProgress()
}

const resetQuiz = () => {
  selectedAnswers.value = Array(quizzes.length).fill(null)
  showAnswers.value = false
  showAnswerIndex.value = null
  userProgress.value = 0
}

const updateProgress = () => {
  const total = quizzes.length
  const correct = quizzes.reduce((count, quiz, index) => {
    const selected = selectedAnswers.value[index]
    if (!selected) return count
    
    const isCorrect = quiz.options.find(opt => opt.text === selected)?.correct || false
    return count + (isCorrect ? 1 : 0)
  }, 0)
  
  userProgress.value = Math.round((correct / total) * 100)
}

// è®°å½•å­¦ä¹ æ—¶é—´
const recordStudyTime = () => {
  const currentTime = new Date()
  const studyTime = Math.floor((currentTime - startTime.value) / 1000) // è½¬æ¢ä¸ºç§’
  learningStore.recordTopicStudyTime('prescription', studyTime)
}

// æ ‡è®°çŸ¥è¯†ç‚¹å®Œæˆ
const markTopicCompleted = () => {
  learningStore.completeTopic('prescription')
}

// åˆå§‹åŒ–
onMounted(() => {
  // ä»å­¦ä¹ å­˜å‚¨åŠ è½½è¿›åº¦
  const progress = learningStore.getTopicProgress('prescription')
  if (progress) {
    userProgress.value = progress.completionPercentage
  }
  
  // è®°å½•ç”¨æˆ·å¼€å§‹å­¦ä¹ è¿™ä¸ªçŸ¥è¯†ç‚¹
  learningStore.recordTopicStudyTime('prescription', 0)
  
  // è®¾ç½®å®šæ—¶å™¨ï¼Œæ¯30ç§’è®°å½•ä¸€æ¬¡å­¦ä¹ æ—¶é—´
  const timer = setInterval(() => {
    recordStudyTime()
  }, 30000)
  
  onUnmounted(() => {
    clearInterval(timer)
    // ç»„ä»¶å¸è½½æ—¶è®°å½•æ€»å­¦ä¹ æ—¶é—´
    recordStudyTime()
  })
})
</script>

<style scoped>
.prescription-page {
  min-height: 100vh;
  background-color: #f8f9fa;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 2rem;
}

/* ========= é¡µé¢å¤´éƒ¨ ========= */
.page-header {
  background: linear-gradient(135deg, rgba(42, 121, 96, 0.05), rgba(42, 121, 96, 0.02));
  border-radius: 12px;
  padding: 2rem;
  margin: 1rem 0 2rem;
  text-align: center;
}

.breadcrumb {
  font-size: 0.875rem;
  color: #6c757d;
  margin-bottom: 1rem;
}

.breadcrumb a {
  color: #2a7960;
  text-decoration: none;
}

.breadcrumb a:hover {
  text-decoration: underline;
}

.header-content h1 {
  font-size: 2.25rem;
  font-weight: 800;
  color: #1a472a;
  margin-bottom: 1rem;
}

.header-content p {
  font-size: 1.125rem;
  color: #6c757d;
  max-width: 700px;
  margin: 0 auto 2rem;
  line-height: 1.6;
}

.header-stats {
  display: flex;
  justify-content: center;
  gap: 3rem;
  flex-wrap: wrap;
}

.stat-item {
  text-align: center;
}

.stat-number {
  display: block;
  font-size: 1.75rem;
  font-weight: 700;
  color: #2a7960;
  margin-bottom: 0.25rem;
}

.stat-label {
  font-size: 0.875rem;
  color: #6c757d;
}

/* ========= ä¸»è¦å†…å®¹åŒºåŸŸ ========= */
.main-content {
  margin: 2rem 0;
}

/* ========= å¿«é€Ÿå¯¼èˆª ========= */
.quick-nav {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  margin-bottom: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.quick-nav h3 {
  font-size: 1.25rem;
  font-weight: 600;
  color: #1a472a;
  margin-bottom: 1rem;
}

.nav-links {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 0.75rem;
}

.nav-link {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  background: #f8f9fa;
  border-radius: 8px;
  text-decoration: none;
  color: #333;
  transition: all 0.2s ease;
  border: none;
  cursor: pointer;
  font-family: inherit;
  font-size: 0.875rem;
}

.nav-link:hover {
  background: #e9ecef;
  color: #1a472a;
  transform: translateY(-2px);
}

.nav-icon {
  font-size: 1.125rem;
}

/* ========= å­¦ä¹ ç›®æ ‡ ========= */
.learning-goals {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.learning-goals h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #1a472a;
  margin-bottom: 1.5rem;
}

.learning-goals ul {
  padding-left: 1.5rem;
}

.learning-goals li {
  margin-bottom: 0.75rem;
  line-height: 1.6;
}

/* ========= å…³é”®æœ¯è¯­ ========= */
.key-terms {
  margin-bottom: 2rem;
}

.key-terms h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #1a472a;
  margin-bottom: 1.5rem;
}

.terms-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
}

.term-card {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  border-left: 4px solid #2a7960;
}

.term-japanese {
  font-weight: bold;
  color: #2a7960;
  margin-bottom: 0.5rem;
  font-size: 0.875rem;
}

.term-chinese {
  font-weight: bold;
  color: #333;
  margin-bottom: 1rem;
  font-size: 1.125rem;
}

.term-explanation {
  margin-bottom: 1rem;
  line-height: 1.6;
}

.term-example {
  background: #eef7ff;
  padding: 1rem;
  border-radius: 5px;
  font-style: italic;
  border-left: 3px solid #a8c6ff;
  font-size: 0.875rem;
  line-height: 1.5;
}

/* ========= å†…å®¹åŒºå— ========= */
.content-section {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.content-section h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #1a472a;
  margin-bottom: 1.5rem;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid #e9ecef;
}

.content-section h3 {
  font-size: 1.25rem;
  font-weight: 600;
  color: #1a472a;
  margin: 1.5rem 0 1rem;
}

.content-section p {
  line-height: 1.6;
  margin-bottom: 1rem;
}

.content-section ul, .content-section ol {
  padding-left: 1.5rem;
  margin-bottom: 1.5rem;
}

.content-section li {
  margin-bottom: 0.5rem;
  line-height: 1.6;
}

/* ========= åŸºæœ¬æ¦‚å¿µæ ·å¼ ========= */
.prescription-types {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.type-card {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.type-icon {
  font-size: 2rem;
  flex-shrink: 0;
}

.type-content h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.type-content p {
  margin: 0;
}

.type-desc {
  font-size: 0.875rem;
  color: #6c757d;
  margin-top: 0.5rem;
}

.acquirable-rights {
  margin: 1.5rem 0;
}

.rights-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 1rem;
}

.right-item {
  text-align: center;
  padding: 1rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.right-icon {
  font-size: 1.5rem;
  margin-bottom: 0.5rem;
}

.right-name {
  font-weight: 600;
  color: #1a472a;
}

/* ========= å–å¾—æ—¶æ•ˆæ ·å¼ ========= */
.requirements {
  margin: 1.5rem 0;
}

.requirement-step {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  margin-bottom: 1.5rem;
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.step-number {
  width: 40px;
  height: 40px;
  background: #2a7960;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  flex-shrink: 0;
}

.step-content h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.example-box {
  margin-top: 1rem;
  padding: 1rem;
  background: #f0f7ff;
  border-radius: 4px;
  font-size: 0.875rem;
}

.timing-table {
  margin-top: 1rem;
}

.timing-table table {
  width: 100%;
  border-collapse: collapse;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  border-radius: 8px;
  overflow: hidden;
}

.timing-table th, .timing-table td {
  border: 1px solid #e9ecef;
  padding: 12px;
  text-align: center;
}

.timing-table th {
  background-color: #2a7960;
  color: white;
  font-weight: 600;
}

.timing-table tr:nth-child(even) {
  background-color: #f8f9fa;
}

.highlight {
  background-color: #e7f7e7 !important;
  color: #2e7d32;
  font-weight: bold;
}

.special-calculation {
  margin: 2rem 0;
}

.calculation-case {
  margin-bottom: 2rem;
  padding: 1.5rem;
  background: #f9f9f9;
  border-radius: 8px;
}

.calculation-case h4 {
  margin: 0 0 1rem 0;
  color: #1a472a;
}

.case-flow {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  margin: 1rem 0;
  flex-wrap: wrap;
}

.flow-step {
  text-align: center;
  padding: 1rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
  min-width: 120px;
}

.step-label {
  font-weight: 600;
  margin-bottom: 0.5rem;
  color: #1a472a;
}

.step-duration, .step-result {
  font-size: 0.875rem;
  color: #6c757d;
}

.flow-arrow {
  font-size: 1.25rem;
  color: #2a7960;
  font-weight: bold;
}

.case-note {
  font-size: 0.875rem;
  color: #6c757d;
  font-style: italic;
  margin-top: 0.5rem;
}

.succession-rules {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1rem;
  margin: 1.5rem 0;
}

.rule-item {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.rule-icon {
  font-size: 1.5rem;
  flex-shrink: 0;
}

.rule-content h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.rule-content p {
  margin: 0;
  color: #6c757d;
}

/* ========= æ¶ˆç­æ—¶æ•ˆæ ·å¼ ========= */
.extinctive-periods {
  margin: 1.5rem 0;
}

.period-diagram {
  text-align: center;
  padding: 2rem;
  background: #f0f7ff;
  border-radius: 8px;
  border: 1px solid #a8c6ff;
}

.period-path {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2rem;
  margin-bottom: 1.5rem;
  flex-wrap: wrap;
}

.period-start {
  text-align: center;
}

.period-label {
  font-weight: 600;
  margin-bottom: 0.5rem;
  color: #1a472a;
}

.period-arrow {
  font-size: 1.25rem;
  color: #2a7960;
  margin: 0.5rem 0;
}

.period-duration {
  font-weight: bold;
  color: #2a7960;
  font-size: 1.125rem;
}

.period-divider {
  font-weight: bold;
  color: #6c757d;
}

.period-result {
  font-weight: bold;
  color: #2a7960;
  font-size: 1.25rem;
  padding: 0.75rem 1.5rem;
  background: white;
  border-radius: 8px;
  display: inline-block;
  border: 2px solid #2a7960;
}

.period-note {
  text-align: center;
  font-size: 0.875rem;
  color: #6c757d;
  margin-top: 1rem;
}

.exercisable-time {
  margin: 1.5rem 0;
}

.time-table {
  overflow-x: auto;
}

.time-table table {
  width: 100%;
  border-collapse: collapse;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  border-radius: 8px;
  overflow: hidden;
}

.time-table th, .time-table td {
  border: 1px solid #e9ecef;
  padding: 12px;
  text-align: left;
}

.time-table th {
  background-color: #2a7960;
  color: white;
  font-weight: 600;
}

.time-table tr:nth-child(even) {
  background-color: #f8f9fa;
}

.special-debts {
  margin: 2rem 0;
}

.debt-type {
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.debt-type h4 {
  margin: 0 0 1rem 0;
  color: #1a472a;
}

.debt-periods {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2rem;
  margin: 1rem 0;
  flex-wrap: wrap;
}

.debt-period {
  text-align: center;
}

.period-condition {
  font-weight: 600;
  margin-bottom: 0.5rem;
  color: #1a472a;
}

.period-arrow {
  font-size: 1.25rem;
  color: #2a7960;
  margin: 0.5rem 0;
}

.period-years {
  font-weight: bold;
  color: #2a7960;
  font-size: 1.125rem;
}

.debt-note {
  font-size: 0.875rem;
  color: #6c757d;
  font-style: italic;
  margin-top: 1rem;
}

.non-extinctive {
  margin: 1.5rem 0;
}

.non-extinctive-item {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  padding: 1.5rem;
  background: #fff9e6;
  border-radius: 8px;
  border: 1px solid #ffcc00;
}

.item-icon {
  font-size: 2rem;
  flex-shrink: 0;
}

.item-content h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.item-content p {
  margin: 0;
  color: #6c757d;
}

/* ========= æ—¶æ•ˆæ›´æ–°æ ·å¼ ========= */
.renewal-concepts {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.concept-card {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.concept-icon {
  font-size: 2rem;
  flex-shrink: 0;
}

.concept-content h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.concept-content p {
  margin: 0;
  color: #6c757d;
}

.judicial-request {
  margin: 2rem 0;
}

.request-flow {
  padding: 2rem;
  background: #f0f7ff;
  border-radius: 8px;
  border: 1px solid #a8c6ff;
}

.flow-step {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.step-icon {
  font-size: 2rem;
  flex-shrink: 0;
}

.step-content h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.step-effect {
  font-weight: bold;
  color: #2a7960;
  margin: 0;
}

.flow-branch {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
}

.branch-option {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.option-icon {
  font-size: 1.5rem;
  flex-shrink: 0;
}

.option-content h5 {
  margin: 0 0 0.25rem 0;
  color: #1a472a;
}

.option-effect {
  font-weight: bold;
  color: #2a7960;
  margin: 0;
  font-size: 0.875rem;
}

.other-interruptions {
  margin: 2rem 0;
}

.interruption-item {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  margin-bottom: 1.5rem;
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.interruption-icon {
  font-size: 2rem;
  flex-shrink: 0;
}

.interruption-content h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.interruption-content p {
  margin: 0 0 0.5rem 0;
}

.interruption-note {
  font-size: 0.875rem;
  color: #6c757d;
  font-style: italic;
  margin: 0;
}

.acknowledgment-examples {
  display: flex;
  gap: 1rem;
  margin-top: 1rem;
}

.example {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  background: #f8f9fa;
  border-radius: 4px;
  font-size: 0.875rem;
}

.example-icon {
  font-size: 1rem;
}

.example-text {
  margin: 0;
}

/* ========= æ—¶æ•ˆæ´ç”¨æ ·å¼ ========= */
.invocation-explanation {
  margin: 1.5rem 0;
}

.invocation-principle {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
  margin-bottom: 2rem;
}

.principle-icon {
  font-size: 2rem;
  flex-shrink: 0;
}

.principle-content h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.principle-content p {
  margin: 0;
  color: #6c757d;
}

.invocation-process {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  margin: 1.5rem 0;
  flex-wrap: wrap;
}

.process-step {
  text-align: center;
  padding: 1.5rem 1rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
  min-width: 150px;
}

.process-step .step-number {
  margin: 0 auto 1rem;
}

.process-step h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.process-step p {
  margin: 0;
  font-size: 0.875rem;
  color: #6c757d;
}

.process-arrow {
  font-size: 1.5rem;
  color: #2a7960;
  font-weight: bold;
}

.invocation-persons {
  margin: 2rem 0;
}

.persons-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
  margin-bottom: 1rem;
}

.person-item {
  text-align: center;
  padding: 1.5rem 1rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.person-icon {
  font-size: 2rem;
  margin-bottom: 0.5rem;
}

.person-name {
  font-weight: 600;
  color: #1a472a;
}

.persons-note {
  text-align: center;
  font-size: 0.875rem;
  color: #6c757d;
  font-style: italic;
}

.abandonment-rules {
  margin: 2rem 0;
}

.abandonment-timing {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1rem;
  margin-bottom: 2rem;
}

.timing-item {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  padding: 1.5rem;
  border-radius: 8px;
}

.timing-item.invalid {
  background: #ffe7e7;
  border: 1px solid #dc3545;
}

.timing-item.valid {
  background: #e7f7e7;
  border: 1px solid #28a745;
}

.timing-icon {
  font-size: 2rem;
  flex-shrink: 0;
}

.timing-content h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.timing-content p {
  margin: 0;
}

.abandonment-effect {
  padding: 1.5rem;
  background: #fff9e6;
  border-radius: 8px;
  border: 1px solid #ffcc00;
}

.abandonment-effect h4 {
  margin: 0 0 1rem 0;
  color: #1a472a;
}

.effect-warning {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
}

.warning-icon {
  font-size: 1.5rem;
  flex-shrink: 0;
}

.warning-content p {
  margin: 0;
  color: #6c757d;
}

.retroactive-effect {
  margin: 2rem 0;
}

.retroactive-principle {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
  margin-bottom: 1.5rem;
}

.retroactive-principle .principle-icon {
  font-size: 2rem;
}

.retroactive-principle h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.retroactive-principle p {
  margin: 0;
  color: #6c757d;
}

.retroactive-examples {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1rem;
}

.example-item {
  padding: 1.5rem;
  background: #f0f7ff;
  border-radius: 8px;
  border: 1px solid #a8c6ff;
}

.example-item h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.example-item p {
  margin: 0;
  color: #6c757d;
}

/* ========= ç»ƒä¹ é¢˜æ ·å¼ ========= */
.quiz-section {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.quiz-section h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #1a472a;
  margin-bottom: 1.5rem;
}

.quiz-item {
  background: #f9f9f9;
  border-radius: 12px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
}

.quiz-question {
  font-weight: bold;
  margin-bottom: 1.25rem;
  font-size: 1.1rem;
  line-height: 1.5;
}

.quiz-options {
  display: flex;
  gap: 1rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
}

.quiz-option {
  display: flex;
  align-items: center;
  cursor: pointer;
  padding: 0.75rem 1rem;
  border: 2px solid #ddd;
  border-radius: 5px;
  transition: all 0.3s ease;
  background: white;
  min-width: 120px;
  justify-content: center;
}

.quiz-option:hover {
  background: #f0f0f0;
}

.quiz-option.selected {
  border-color: #2a7960;
  background: #e9f7f0;
}

.quiz-option.correct {
  border-color: #28a745;
  background: #e7f7e7;
  color: #2e7d32;
}

.quiz-option.incorrect {
  border-color: #dc3545;
  background: #ffe7e7;
  color: #c62828;
}

.quiz-actions {
  margin-bottom: 1rem;
}

.answer-btn {
  background: #2a7960;
  color: white;
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 5px;
  cursor: pointer;
  transition: background 0.3s ease;
  margin-right: 0.5rem;
  font-size: 0.875rem;
}

.answer-btn:hover {
  background: #1a472a;
}

.answer-explanation {
  margin-top: 1rem;
  padding: 1rem;
  background: #f5f5f5;
  border-radius: 5px;
  line-height: 1.6;
}

.quiz-footer-actions {
  display: flex;
  gap: 1rem;
  justify-content: center;
  margin-top: 2rem;
  flex-wrap: wrap;
}

/* ========= æŒ‰é’®æ ·å¼ ========= */
.btn {
  padding: 0.75rem 1.5rem;
  border-radius: 8px;
  font-size: 0.875rem;
  font-weight: 600;
  text-align: center;
  text-decoration: none;
  transition: all 0.3s ease;
  border: none;
  cursor: pointer;
  font-family: inherit;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
}

.btn-primary {
  background: #2a7960;
  color: white;
}

.btn-primary:hover {
  background: #1a472a;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(42, 121, 96, 0.3);
}

.btn-outline {
  background: transparent;
  color: #2a7960;
  border: 1px solid #2a7960;
}

.btn-outline:hover {
  background: #e9f7f0;
  transform: translateY(-2px);
}

/* ========= åº•éƒ¨è¡ŒåŠ¨æŒ‰é’® ========= */
.action-buttons {
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin-top: 3rem;
  padding-top: 2rem;
  border-top: 1px solid #e9ecef;
  flex-wrap: wrap;
}

.action-button {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  background: linear-gradient(135deg, #2a7960, #1a472a);
  color: white;
  text-decoration: none;
  border-radius: 12px;
  font-weight: 600;
  transition: all 0.3s ease;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.action-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
}

.action-button.video {
  background: linear-gradient(135deg, #2a7960, #205e4a);
}

/* ========= å“åº”å¼è®¾è®¡ ========= */
@media (max-width: 768px) {
  .container {
    padding: 0 1rem;
  }
  
  .page-header {
    padding: 1.5rem 1rem;
  }
  
  .header-content h1 {
    font-size: 1.75rem;
  }
  
  .header-stats {
    gap: 1.5rem;
  }
  
  .stat-number {
    font-size: 1.5rem;
  }
  
  .nav-links {
    grid-template-columns: 1fr;
  }
  
  .terms-grid {
    grid-template-columns: 1fr;
  }
  
  .prescription-types {
    grid-template-columns: 1fr;
  }
  
  .rights-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .case-flow {
    flex-direction: column;
  }
  
  .flow-arrow {
    transform: rotate(90deg);
  }
  
  .succession-rules {
    grid-template-columns: 1fr;
  }
  
  .period-path {
    flex-direction: column;
  }
  
  .debt-periods {
    flex-direction: column;
  }
  
  .renewal-concepts {
    grid-template-columns: 1fr;
  }
  
  .flow-branch {
    grid-template-columns: 1fr;
  }
  
  .invocation-process {
    flex-direction: column;
  }
  
  .process-arrow {
    transform: rotate(90deg);
  }
  
  .persons-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .abandonment-timing {
    grid-template-columns: 1fr;
  }
  
  .retroactive-examples {
    grid-template-columns: 1fr;
  }
  
  .quiz-options {
    flex-direction: column;
  }
  
  .quiz-option {
    min-width: auto;
  }
  
  .action-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .action-button {
    width: 100%;
    max-width: 300px;
    justify-content: center;
  }
  
  .content-section, 
  .learning-goals, 
  .quiz-section, 
  .quick-nav {
    padding: 1.5rem;
  }
}

@media (max-width: 480px) {
  .header-stats {
    flex-direction: column;
    gap: 1rem;
  }
  
  .rights-grid {
    grid-template-columns: 1fr;
  }
  
  .persons-grid {
    grid-template-columns: 1fr;
  }
  
  .quiz-footer-actions {
    flex-direction: column;
  }
  
  .btn {
    width: 100%;
    justify-content: center;
  }
}
</style>
<!-- src/views/notes/rights/PaymentAndSetoff.vue -->
<template>
  <div class="payment-setoff-page">
    <!-- é¡µé¢å¤´éƒ¨ -->
    <div class="page-header">
      <div class="header-content">
        <div class="breadcrumb">
          <router-link to="/notes">ä¸­æ–‡ç¬”è®°</router-link> &gt; 
          <router-link to="/notes?domain=rights">æƒåˆ©å…³ç³»</router-link> &gt; 
          <span>å¼æµå’Œç›¸æ€</span>
        </div>
        <h1>å¼æµå’Œç›¸æ€</h1>
        <p>æ—¥æœ¬æ°‘æ³•ä¸­çš„å€ºåŠ¡æ¸…å¿å’Œå€ºæƒæŠµæ¶ˆåˆ¶åº¦ï¼Œæ¶‰åŠè¿˜å€ºçš„æœ‰æ•ˆè¦ä»¶ã€è¿˜å€ºä»£ä½ã€ç›¸æ€çš„æˆç«‹æ¡ä»¶å’Œç¦æ­¢æƒ…å½¢ç­‰é‡è¦å†…å®¹</p>
        
        <!-- å­¦ä¹ ç»Ÿè®¡ -->
        <div class="header-stats">
          <div class="stat-item">
            <span class="stat-number">15</span>
            <span class="stat-label">æ ¸å¿ƒè¦ç‚¹</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">45åˆ†é’Ÿ</span>
            <span class="stat-label">å»ºè®®å­¦ä¹ æ—¶é—´</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">5</span>
            <span class="stat-label">ç»ƒä¹ é¢˜</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">{{ userProgress }}%</span>
            <span class="stat-label">æŒæ¡è¿›åº¦</span>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
      <main class="main-content">
        <!-- å¿«é€Ÿå¯¼èˆª -->
        <div class="quick-nav">
          <h3>æœ¬é¡µå¯¼èˆª</h3>
          <div class="nav-links">
            <a 
              v-for="section in sections" 
              :key="section.id"
              :href="`#${section.id}`"
              class="nav-link"
              @click.prevent="scrollToSection(section.id)"
            >
              <span class="nav-icon">{{ section.icon }}</span>
              {{ section.title }}
            </a>
          </div>
        </div>

        <!-- å­¦ä¹ ç›®æ ‡ -->
        <section class="learning-goals">
          <h2>ğŸ¯ å­¦ä¹ ç›®æ ‡</h2>
          <ul>
            <li>ç†è§£å¼æµï¼ˆè¿˜å€ºï¼‰çš„åŸºæœ¬æ¦‚å¿µå’Œæœ‰æ•ˆè¦ä»¶</li>
            <li>æŒæ¡å¯ä»¥è¿˜å€ºçš„äººå’Œå‘è°è¿˜å€ºæœ‰æ•ˆçš„è§„åˆ™</li>
            <li>ç†Ÿæ‚‰è¿˜å€ºçš„æä¾›ã€å……å½“å’Œä»£ä½çš„æ³•å¾‹è§„å®š</li>
            <li>æŒæ¡ç›¸æ€ï¼ˆæŠµæ¶ˆï¼‰çš„æˆç«‹æ¡ä»¶å’Œæ³•å¾‹æ•ˆåŠ›</li>
            <li>äº†è§£ç›¸æ€ç¦æ­¢çš„ç‰¹æ®Šæƒ…å½¢å’Œå®åŠ¡åº”ç”¨</li>
          </ul>
        </section>

        <!-- å…³é”®æœ¯è¯­ -->
        <section id="key-terms" class="key-terms">
          <h2>ğŸ”¤ å…³é”®æœ¯è¯­</h2>
          <div class="terms-grid">
            <div 
              v-for="term in keyTerms" 
              :key="term.japanese"
              class="term-card"
            >
              <div class="term-japanese">{{ term.japanese }}</div>
              <div class="term-chinese">{{ term.chinese }}</div>
              <div class="term-explanation">{{ term.explanation }}</div>
              <div class="term-example">{{ term.example }}</div>
            </div>
          </div>
        </section>

        <!-- å¼æµçš„åŸºæœ¬æ¦‚å¿µ -->
        <section id="basic-concepts" class="content-section">
          <h2>1. å¼æµçš„åŸºæœ¬æ¦‚å¿µ</h2>
          
          <h3>å¼æµçš„å®šä¹‰</h3>
          <div class="concept-explanation">
            <p>å¼æµæ˜¯æŒ‡å€ºåŠ¡äººæŒ‰ç…§å€ºåŠ¡å†…å®¹å±¥è¡Œä¹‰åŠ¡ï¼Œä½¿å€ºæƒæ¶ˆç­çš„æ³•å¾‹è¡Œä¸ºã€‚è¿™æ˜¯å€ºæƒæ¶ˆç­çš„æœ€ä¸»è¦åŸå› ã€‚</p>
            
            <div class="example-box">
              <h4>ğŸ“ é‡è¦ç‰¹å¾</h4>
              <ul>
                <li>åŸåˆ™ä¸Šè°è¿˜å€ºéƒ½å¯ä»¥</li>
                <li>æœ‰åˆ©å®³å…³ç³»çš„ç¬¬ä¸‰è€…å³ä½¿è¿èƒŒå€ºåŠ¡äººæ„æ€ï¼Œè¿˜å€ºä¹Ÿæœ‰æ•ˆ</li>
                <li>è¿˜å€ºåå¯ä»¥è¯·æ±‚äº¤ä»˜æ”¶æ®</li>
              </ul>
            </div>
          </div>

          <h3>æ¡ˆä¾‹è¯´æ˜</h3>
          <div class="effect-timing">
            <div class="timing-item">
              <div class="timing-icon">ğŸ’°</div>
              <div class="timing-content">
                <h4>ä¿è¯äººè¿˜å€ºæ¡ˆä¾‹</h4>
                <p>Aå€Ÿç»™B 100ä¸‡æ—¥å…ƒï¼ŒBçš„ä¿è¯äººCæ›¿Bè¿˜æ¬¾ç»™Aã€‚è™½ç„¶Båå¯¹ï¼Œä½†Cä½œä¸ºæœ‰åˆ©å®³å…³ç³»çš„ç¬¬ä¸‰è€…ï¼Œè¿˜å€ºæœ‰æ•ˆï¼ŒAçš„å€ºæƒæ¶ˆç­ã€‚</p>
              </div>
            </div>
          </div>
        </section>

        <!-- å¯ä»¥è¿˜å€ºçš„äºº -->
        <section id="who-can-pay" class="content-section">
          <h2>2. å¯ä»¥è¿˜å€ºçš„äºº</h2>
          
          <h3>åŸºæœ¬åŸåˆ™</h3>
          <div class="heir-order">
            <p>å¯¹å€ºæƒäººæ¥è¯´ï¼Œå€ºåŠ¡ç”±è°æ¸…å¿éƒ½å¯ä»¥ï¼Œä¸ä¸€å®šéè¦å€ºåŠ¡äººæœ¬äººã€‚</p>
            
            <div class="order-flow">
              <div class="flow-step">
                <div class="step-number">âœ“</div>
                <div class="step-content">
                  <h4>å¯ä»¥è¿˜å€ºçš„äºº</h4>
                  <p>å€ºåŠ¡äººæœ¬äººã€ä¿è¯äººã€åˆ©å®³å…³ç³»ç¬¬ä¸‰äººç­‰</p>
                  <div class="step-note">åŸåˆ™ï¼šè°éƒ½å¯ä»¥è¿˜å€º</div>
                </div>
              </div>
            </div>
          </div>

          <h3>ä¾‹å¤–æƒ…å½¢</h3>
          <div class="important-notes">
            <div class="note-item">
              <h4>ğŸš« è¿˜å€ºæ— æ•ˆçš„æƒ…å½¢</h4>
              <ul>
                <li><strong>å€ºåŠ¡æ€§è´¨ä¸å…è®¸ï¼š</strong>å¦‚å¿…é¡»ç”±ç‰¹å®šäººå±¥è¡Œçš„å€ºåŠ¡ï¼ˆç‰¹å®šè‰ºæœ¯å®¶çš„æ¼”å‡ºã€ä¸“ä¸šåŒ»ç”Ÿçš„è¯Šç–—ï¼‰</li>
                <li><strong>å½“äº‹äººæœ‰ç‰¹çº¦ï¼š</strong>çº¦å®šåªèƒ½ç”±å€ºåŠ¡äººæœ¬äººæ¸…å¿</li>
                <li><strong>æ— åˆ©å®³å…³ç³»çš„ç¬¬ä¸‰è€…ï¼š</strong>è¿èƒŒå€ºæƒäººæˆ–å€ºåŠ¡äººæ„æ€æ—¶ï¼Œè¿˜å€ºå¯èƒ½æ— æ•ˆ</li>
              </ul>
            </div>
          </div>

          <h3>åˆ©å®³å…³ç³»äººçš„èŒƒå›´</h3>
          <div class="comparison-table-container">
            <table class="comparison-table">
              <thead>
                <tr>
                  <th>âœ… æœ‰åˆ©å®³å…³ç³»çš„äºº</th>
                  <th>âŒ æ— åˆ©å®³å…³ç³»çš„äºº</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>ä¿è¯äºº</td>
                  <td>çˆ¶æ¯</td>
                </tr>
                <tr>
                  <td>åé¡ºä½æŠµæŠ¼æƒäºº</td>
                  <td>å…„å¼Ÿ</td>
                </tr>
                <tr>
                  <td>ç¬¬ä¸‰å–å¾—è€…</td>
                  <td>æœ‹å‹</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>

        <!-- å‘è°è¿˜å€ºæœ‰æ•ˆ -->
        <section id="valid-payment" class="content-section">
          <h2>3. å‘è°è¿˜å€ºæœ‰æ•ˆ</h2>
          
          <h3>åŸºæœ¬åŸåˆ™</h3>
          <div class="concept-explanation">
            <p>å‘å€ºæƒäººæˆ–å…¶ä»£ç†äººè¿˜å€ºæœ‰æ•ˆã€‚åŸºäºæ³•ä»¤è§„å®šæˆ–å½“äº‹äººæ„æ€è¡¨ç¤ºï¼Œå‘æœ‰å—é¢†æƒè€…è¿˜å€ºæ—¶ï¼Œå€ºæƒæ¶ˆç­ã€‚</p>
          </div>

          <h3>è¡¨è§è¿˜å€º</h3>
          <div class="example-box">
            <h4>ğŸ“ è¡¨è§è¿˜å€ºçš„æ¦‚å¿µ</h4>
            <p>å€ºåŠ¡è€…å‘éçœŸæ­£å€ºæƒè€…è¿˜å€ºï¼Œä½†åŸºäºæŸç§å¤–è§‚è¡¨ç°ï¼Œå€ºåŠ¡è€…å–„æ„æ— è¿‡å¤±æ—¶ï¼Œè¿˜å€ºæœ‰æ•ˆã€‚</p>
          </div>

          <div class="case-scenario">
            <h4>å…¸å‹æ¡ˆä¾‹åˆ†æ</h4>
            <div class="scenario-steps">
              <div class="scenario-step">
                <div class="step-number">1</div>
                <div class="step-content">
                  <p><strong>Aæ˜¯å€ºæƒäºº</strong>ï¼ŒæŒæœ‰å¯¹Bçš„å€ºæƒ</p>
                </div>
              </div>
              <div class="scenario-step">
                <div class="step-number">2</div>
                <div class="step-content">
                  <p><strong>Cæ‹¿ç€Açš„å°ç« å’Œå­˜æŠ˜</strong>ï¼Œå¤–è§‚ä¸Šåƒå€ºæƒäºº</p>
                </div>
              </div>
              <div class="scenario-step">
                <div class="step-number">3</div>
                <div class="step-content">
                  <p><strong>Bå–„æ„åœ°å‘Cè¿˜å€º</strong>ï¼ŒåŸºäºäº¤æ˜“é€šå¿µï¼Œè¿˜å€ºæœ‰æ•ˆ</p>
                </div>
              </div>
            </div>
            <div class="scenario-result">
              <p><strong>ç»“æœï¼š</strong>è™½ç„¶Cä¸æ˜¯çœŸæ­£å€ºæƒäººï¼Œä½†Bå–„æ„æ— è¿‡å¤±ï¼Œè¿˜å€ºæœ‰æ•ˆï¼ŒAçš„å€ºæƒæ¶ˆç­ã€‚</p>
            </div>
          </div>
        </section>

        <!-- è¿˜å€ºçš„æä¾›å’Œæ–¹æ³• -->
        <section id="payment-offer" class="content-section">
          <h2>4. è¿˜å€ºçš„æä¾›å’Œæ–¹æ³•</h2>
          
          <h3>è¿˜å€ºæä¾›çš„æ„ä¹‰</h3>
          <div class="concept-explanation">
            <p>å€ºåŠ¡äººåšå¥½è¿˜å€ºå‡†å¤‡å¹¶å‚¬å‘Šå€ºæƒäººå—é¢†ï¼š</p>
            <ul>
              <li>å¯ä»¥å¯¹æŠ—åŒæ—¶å±¥è¡ŒæŠ—è¾©æƒ</li>
              <li>å…é™¤å€ºåŠ¡ä¸å±¥è¡Œè´£ä»»</li>
            </ul>
          </div>

          <h3>æä¾›æ–¹æ³•</h3>
          <div class="payment-methods">
            <div class="method-item">
              <div class="method-icon">ğŸ’µ</div>
              <div class="method-content">
                <h4>ç°å®æä¾›</h4>
                <p>æ‹¿ç€é’±æˆ–ç›®çš„ç‰©å»å€ºæƒäººå¤„äº¤ä»˜</p>
                <div class="method-note">åŸåˆ™æ–¹æ³•</div>
              </div>
            </div>
            <div class="method-item">
              <div class="method-icon">ğŸ—£ï¸</div>
              <div class="method-content">
                <h4>å£å¤´æä¾›</h4>
                <p>å€ºæƒäººæ‹’ç»å—é¢†æ—¶ï¼Œé€šçŸ¥è¿˜å€ºå‡†å¤‡å®Œæ¯•</p>
                <div class="method-note">ä¾‹å¤–æ–¹æ³•</div>
              </div>
            </div>
          </div>

          <div class="important-notes">
            <div class="note-item">
              <h4>âš ï¸ é‡è¦æ³¨æ„</h4>
              <p>è‡ªå¼€æ”¯ç¥¨å› ç¼ºä¹æ”¯ä»˜ç¡®å®æ€§ï¼Œä¸èƒ½ç®—ä½œç°å®æä¾›ã€‚ï¼ˆåˆ¤ä¾‹ï¼‰</p>
            </div>
          </div>
        </section>

        <!-- è¿˜å€ºçš„å……å½“ -->
        <section id="payment-allocation" class="content-section">
          <h2>5. è¿˜å€ºçš„å……å½“</h2>
          
          <h3>åœºæ™¯è¯´æ˜</h3>
          <div class="concept-explanation">
            <p>åŒä¸€å€ºæƒäººå¯¹å€ºåŠ¡äººæŒæœ‰å¤šç¬”å€ºæƒæ—¶ï¼Œéƒ¨åˆ†è¿˜å€ºä¸è¶³ä»¥æ¶ˆç­æ‰€æœ‰å€ºåŠ¡ï¼Œéœ€è¦ç¡®å®šå¿è¿˜å“ªç¬”å€ºåŠ¡ã€‚</p>
            
            <div class="example-box">
              <h4>ğŸ“ å…·ä½“åœºæ™¯</h4>
              <p>Bä¹°æˆ¿å­æ—¶å€Ÿäº†A 100ä¸‡ï¼ŒBä¹°æ±½è½¦æ—¶åˆå€Ÿäº†A 80ä¸‡ã€‚å½“Bæ‰‹é‡Œåªæœ‰50ä¸‡æƒ³å…ˆè¿˜ä¸€éƒ¨åˆ†æ—¶ï¼Œè¿™50ä¸‡ç”¨æ¥è¿˜å“ªç¬”å€ºåŠ¡ï¼Ÿ</p>
            </div>
          </div>

          <h3>å……å½“é¡ºåº</h3>
          <div class="allocation-order">
            <div class="allocation-step">
              <div class="step-number">1</div>
              <div class="step-content">
                <h4>åˆæ„å……å½“æœ€ä¼˜å…ˆ</h4>
                <p>å€ºæƒäººå’Œå€ºåŠ¡äººåå•†å†³å®š</p>
                <div class="step-note">åŒæ–¹åˆæ„</div>
              </div>
            </div>
            <div class="allocation-step">
              <div class="step-number">2</div>
              <div class="step-content">
                <h4>æŒ‡å®šå……å½“</h4>
                <p>æ— åˆæ„æ—¶ï¼Œå€ºæƒäººæˆ–å€ºåŠ¡äººæŒ‡å®š</p>
                <div class="step-note">å•æ–¹æŒ‡å®š</div>
              </div>
            </div>
            <div class="allocation-step">
              <div class="step-number">3</div>
              <div class="step-content">
                <h4>æ³•å®šå……å½“</h4>
                <p>æ— æŒ‡å®šæ—¶ï¼Œä¾æ³•å®šé¡ºåºï¼šè´¹ç”¨ â†’ åˆ©æ¯ â†’ æœ¬é‡‘</p>
                <div class="step-note">æ³•å¾‹å¼ºåˆ¶</div>
              </div>
            </div>
          </div>
        </section>

        <!-- è¿˜å€ºä»£ä½å’Œä»£ç‰©è¿˜å€º -->
        <section id="subrogation" class="content-section">
          <h2>6. è¿˜å€ºä»£ä½å’Œä»£ç‰©è¿˜å€º</h2>
          
          <h3>è¿˜å€ºä»£ä½</h3>
          <div class="concept-explanation">
            <p>ç¬¬ä¸‰äººè¿˜å€ºåï¼Œåœ¨å…¶æ±‚å¿æƒèŒƒå›´å†…ä»£ä½è¡Œä½¿åŸå€ºæƒäººçš„æƒåˆ©ã€‚</p>
          </div>

          <h3>è¿˜å€ºä»£ä½è¦ä»¶</h3>
          <div class="subrogation-conditions">
            <div class="condition-item">
              <div class="condition-icon">âœ…</div>
              <div class="condition-content">
                <h4>æœ‰æ­£å½“åˆ©ç›Šçš„ç¬¬ä¸‰è€…</h4>
                <p>è¿˜å€ºåè‡ªåŠ¨ä»£ä½</p>
                <div class="condition-status">è‡ªåŠ¨ä»£ä½</div>
              </div>
            </div>
            <div class="condition-item">
              <div class="condition-icon">ğŸ”„</div>
              <div class="condition-content">
                <h4>æ— æ­£å½“åˆ©ç›Šçš„ç¬¬ä¸‰è€…</h4>
                <p>éœ€è¦å€ºæƒäººé€šçŸ¥æˆ–å€ºåŠ¡äººæ‰¿è¯º</p>
                <div class="condition-status">éœ€è¦å¯¹æŠ—è¦ä»¶</div>
              </div>
            </div>
          </div>

          <h3>ä»£ç‰©è¿˜å€º</h3>
          <div class="example-box">
            <h4>ğŸ“ ä»£ç‰©è¿˜å€ºæ¡ˆä¾‹</h4>
            <p>å€ºæƒè€…Aå€Ÿç»™å€ºåŠ¡è€…B 10ä¸‡æ—¥å…ƒï¼ŒBæ²¡æœ‰é’±è¿˜æ—¶ï¼ŒBå¯ä»¥æŠŠè‡ªå·±ä»·å€¼10ä¸‡æ—¥å…ƒçš„ç”µè„‘ç»™å€ºæƒè€…Aï¼Œä¹Ÿå¯ä»¥æŠµæ¶ˆå€ºåŠ¡ã€‚</p>
            <p><strong>è¦ä»¶ï¼š</strong>éœ€è¦å½“äº‹äººåˆæ„</p>
          </div>
        </section>

        <!-- ç›¸æ€çš„åŸºæœ¬æ¦‚å¿µå’Œæ¡ä»¶ -->
        <section id="setoff-basics" class="content-section">
          <h2>7. ç›¸æ€çš„åŸºæœ¬æ¦‚å¿µå’Œæ¡ä»¶</h2>
          
          <h3>ç›¸æ€çš„å®šä¹‰</h3>
          <div class="concept-explanation">
            <p>ä¸¤äººäº’è´ŸåŒç§å€ºåŠ¡æ—¶ï¼Œå„ä»¥å…¶å€ºæƒå……å½“å€ºåŠ¡çš„æ¸…å¿ï¼Œä»è€Œä½¿å„è‡ªçš„å€ºåŠ¡åœ¨å¯¹ç­‰é¢åº¦å†…ç›¸äº’æ¶ˆç­ã€‚</p>
          </div>

          <h3>ç›¸æ€é€‚çŠ¶è¦ä»¶</h3>
          <div class="setoff-conditions">
            <div class="condition-item">
              <div class="condition-icon">1</div>
              <div class="condition-content">
                <h4>å€ºæƒå¯¹ç«‹</h4>
                <p>ABäº’è´Ÿå€ºåŠ¡</p>
                <div class="condition-status">å¿…é¡»æ»¡è¶³</div>
              </div>
            </div>
            <div class="condition-item">
              <div class="condition-icon">2</div>
              <div class="condition-content">
                <h4>å€ºæƒåŒç§</h4>
                <p>åŒä¸ºé‡‘é’±å€ºåŠ¡ç­‰</p>
                <div class="condition-status">å¿…é¡»æ»¡è¶³</div>
              </div>
            </div>
            <div class="condition-item">
              <div class="condition-icon">3</div>
              <div class="condition-content">
                <h4>å€ºæƒæœ‰æ•ˆ</h4>
                <p>å³ä½¿åœ¨æ—¶æ•ˆå®Œæˆå‰ä¸ºç›¸æ€é€‚çŠ¶ï¼Œæ—¶æ•ˆå®Œæˆåä»å¯ç›¸æ€</p>
                <div class="condition-status">å¿…é¡»æ»¡è¶³</div>
              </div>
            </div>
            <div class="condition-item">
              <div class="condition-icon">4</div>
              <div class="condition-content">
                <h4>å‡å·²åˆ°æœŸ</h4>
                <p>åŒæ–¹å€ºåŠ¡å‡åˆ°æ¸…å¿æœŸ</p>
                <div class="condition-status">åŸåˆ™è¦æ±‚</div>
              </div>
            </div>
            <div class="condition-item">
              <div class="condition-icon">5</div>
              <div class="condition-content">
                <h4>æ€§è´¨å…è®¸</h4>
                <p>å€ºåŠ¡æ€§è´¨å…è®¸ç›¸æ€</p>
                <div class="condition-status">å¿…é¡»æ»¡è¶³</div>
              </div>
            </div>
          </div>

          <h3>è‡ªåŠ¨å€ºæƒå’Œå—åŠ¨å€ºæƒ</h3>
          <div class="example-box">
            <h4>ğŸ“ æ¦‚å¿µè¯´æ˜</h4>
            <p><strong>è‡ªåŠ¨å€ºæƒï¼š</strong>ä¸»å¼ ç›¸æ€ä¸€æ–¹æŒæœ‰çš„å€ºæƒ</p>
            <p><strong>å—åŠ¨å€ºæƒï¼š</strong>è¢«ä¸»å¼ ç›¸æ€ä¸€æ–¹æŒæœ‰çš„å€ºæƒ</p>
            <p><strong>è°ä¸»å¼ ï¼Œè°çš„å€ºæƒå°±æ˜¯è‡ªåŠ¨å€ºæƒ</strong></p>
          </div>
        </section>

        <!-- ç›¸æ€çš„ç¦æ­¢æƒ…å½¢ -->
        <section id="setoff-prohibition" class="content-section">
          <h2>8. ç›¸æ€çš„ç¦æ­¢æƒ…å½¢</h2>
          
          <h3>ä¸æ³•è¡Œä¸ºåŠ å®³è€…</h3>
          <div class="prohibition-cases">
            <div class="case-item">
              <div class="case-icon">ğŸš—</div>
              <div class="case-content">
                <h4>æ¶æ„çš„ä¸æ³•è¡Œä¸º</h4>
                <p>Aå¯¹Bæœ‰100ä¸‡å€ºæƒï¼ŒABå‘ç”ŸçŸ›ç›¾ï¼ŒAç ¸äº†Bçš„è½¦ï¼Œæ±½è½¦ä¿®ç†è´¹100ä¸‡</p>
                <div class="case-result">
                  <p><strong>åŠ å®³è€…Aä¸èƒ½ä¸»å¼ ç›¸æ€</strong>ï¼Œä½†è¢«å®³è€…Bå¯ä»¥ä¸»å¼ ç›¸æ€</p>
                </div>
              </div>
            </div>
            <div class="case-item">
              <div class="case-icon">ğŸ¥</div>
              <div class="case-content">
                <h4>äººèº«ä¾µå®³çš„æŸå®³èµ”å¿</h4>
                <p>Aå¯¹Bæœ‰100ä¸‡å€ºæƒï¼ŒAå¼€è½¦ä¸å°å¿ƒæ’äº†Bï¼ŒåŒ»è¯è´¹100ä¸‡</p>
                <div class="case-result">
                  <p><strong>åŠ å®³è€…Aä¸èƒ½ä¸»å¼ ç›¸æ€</strong>ï¼Œè¢«å®³è€…Bå¯ä»¥ä¸»å¼ ç›¸æ€</p>
                </div>
              </div>
            </div>
          </div>

          <h3>å€ºæƒå†»ç»“</h3>
          <div class="freeze-scenario">
            <h4>å†»ç»“åå–å¾—å€ºæƒçš„ç›¸æ€ç¦æ­¢</h4>
            <div class="scenario-steps">
              <div class="scenario-step">
                <div class="step-number">1</div>
                <div class="step-content">
                  <p>Bå€Ÿç»™Aæ—¥å…ƒ100ä¸‡ï¼ˆBå¾—åˆ°å¯¹Açš„å€ºæƒï¼‰</p>
                </div>
              </div>
              <div class="scenario-step">
                <div class="step-number">2</div>
                <div class="step-content">
                  <p>Bä»Cå€Ÿæ¬¾100ä¸‡ï¼ŒBçš„å¯¹Aå€ºæƒè¢«å†»ç»“</p>
                </div>
              </div>
              <div class="scenario-step">
                <div class="step-number">3</div>
                <div class="step-content">
                  <p>Bä»Aå€Ÿæ¬¾100ä¸‡ï¼ˆAå¾—åˆ°å¯¹Bçš„å€ºæƒï¼‰</p>
                </div>
              </div>
            </div>
            <div class="scenario-result warning">
              <p><strong>ç»“æœï¼š</strong>Açš„å€ºæƒæ˜¯åœ¨Bçš„å—åŠ¨å€ºæƒå†»ç»“åå–å¾—çš„ï¼Œæ‰€ä»¥Aä¸èƒ½ä¸»å¼ ç›¸æ€</p>
            </div>
          </div>

          <div class="freeze-scenario">
            <h4>å†»ç»“å‰å–å¾—å€ºæƒçš„ç›¸æ€å…è®¸</h4>
            <div class="scenario-steps">
              <div class="scenario-step">
                <div class="step-number">1</div>
                <div class="step-content">
                  <p>Bå€Ÿç»™Aæ—¥å…ƒ100ä¸‡ï¼ˆBå¾—åˆ°å¯¹Açš„å€ºæƒï¼‰</p>
                </div>
              </div>
              <div class="scenario-step">
                <div class="step-number">2</div>
                <div class="step-content">
                  <p>Bä»Aå€Ÿæ¬¾100ä¸‡ï¼ˆABäº’ç›¸æŒæœ‰å€ºæƒï¼‰</p>
                </div>
              </div>
              <div class="scenario-step">
                <div class="step-number">3</div>
                <div class="step-content">
                  <p>Bä»Cå€Ÿæ¬¾100ä¸‡ï¼ŒBçš„å¯¹Aå€ºæƒè¢«å†»ç»“</p>
                </div>
              </div>
            </div>
            <div class="scenario-result success">
              <p><strong>ç»“æœï¼š</strong>Açš„å€ºæƒæ˜¯åœ¨Bçš„å—åŠ¨å€ºæƒå†»ç»“å‰å¾—åˆ°çš„ï¼Œæ‰€ä»¥Aå¯ä»¥ä¸»å¼ ç›¸æ€</p>
            </div>
          </div>
        </section>

        <!-- ç›¸æ€çš„æ–¹æ³•å’Œæ•ˆåŠ› -->
        <section id="setoff-method" class="content-section">
          <h2>9. ç›¸æ€çš„æ–¹æ³•å’Œæ•ˆåŠ›</h2>
          
          <h3>æ³•å¾‹æ€§è´¨</h3>
          <div class="legal-nature">
            <div class="nature-item">
              <div class="nature-icon">âš¡</div>
              <div class="nature-content">
                <h4>å½¢æˆæƒ</h4>
                <p>å•æ–¹æ„æ€è¡¨ç¤ºå³å¯äº§ç”Ÿæ³•å¾‹æ•ˆæœ</p>
              </div>
            </div>
            <div class="nature-item">
              <div class="nature-icon">â†©ï¸</div>
              <div class="nature-content">
                <h4>æº¯åŠæ•ˆåŠ›</h4>
                <p>æ•ˆåŠ›æº¯åŠè‡³ç›¸æ€é€‚çŠ¶ä¹‹æ—¶</p>
              </div>
            </div>
            <div class="nature-item">
              <div class="nature-icon">ğŸš«</div>
              <div class="nature-content">
                <h4>æ— æ¡ä»¶æ€§</h4>
                <p>ä¸èƒ½é™„å¸¦æ¡ä»¶æˆ–æœŸé™</p>
              </div>
            </div>
          </div>

          <h3>ç¦æ­¢é™„æ¡ä»¶å’ŒæœŸé™çš„ç†ç”±</h3>
          <div class="prohibition-reasons">
            <div class="reason-item">
              <h4>å¦‚æœå…è®¸é™„æ¡ä»¶</h4>
              <p>ç›¸æ€çš„æ•ˆåŠ›å°†å˜å¾—ä¸ç¡®å®šï¼Œå› ä¸ºæ¡ä»¶çš„æˆå°±ä¸å¦æ˜¯ä¸ç¡®å®šçš„ï¼Œè¿™å°†å¯¼è‡´ç›¸æ€çš„æ•ˆæœä¹Ÿå¤„äºä¸ç¡®å®šçŠ¶æ€ã€‚</p>
            </div>
            <div class="reason-item">
              <h4>å¦‚æœå…è®¸é™„æœŸé™</h4>
              <p>ç›¸æ€çš„æ•ˆåŠ›å°†è¢«æ¨è¿Ÿåˆ°æŸä¸€ç‰¹å®šæ—¶é—´ç‚¹ï¼Œè¿™ä¸ä»…è¿èƒŒäº†ç›¸æ€çš„å³æ—¶æ€§åŸåˆ™ï¼Œè¿˜å¯èƒ½å¼•å‘æ›´å¤šçš„æ³•å¾‹çº çº·ã€‚</p>
            </div>
          </div>
        </section>

        <!-- ç»ƒä¹ é¢˜ -->
        <section id="quiz" class="quiz-section">
          <h2>âœï¸ ç»ƒä¹ é¢˜</h2>
          
          <div 
            v-for="(quiz, index) in quizzes" 
            :key="index"
            class="quiz-item"
          >
            <div class="quiz-question">{{ quiz.question }}</div>
            <div class="quiz-options">
              <div 
                v-for="option in quiz.options" 
                :key="option.text"
                class="quiz-option"
                :class="{ 
                  'selected': selectedAnswers[index] === option.text,
                  'correct': showAnswers && option.correct,
                  'incorrect': showAnswers && selectedAnswers[index] === option.text && !option.correct
                }"
                @click="selectAnswer(index, option.text)"
              >
                {{ option.text }}
              </div>
            </div>
            <div class="quiz-actions">
              <button class="answer-btn" @click="toggleAnswer(index)">
                {{ showAnswerIndex === index ? 'éšè—ç­”æ¡ˆ' : 'æ˜¾ç¤ºç­”æ¡ˆ' }}
              </button>
            </div>
            <div 
              v-if="showAnswerIndex === index" 
              class="answer-explanation"
            >
              <strong>ç­”æ¡ˆï¼š</strong> {{ getCorrectAnswer(quiz) }}<br>
              <strong>ä¸­æ–‡è§£é‡Šï¼š</strong> {{ quiz.explanation }}
            </div>
          </div>

          <div class="quiz-footer-actions">
            <button class="btn btn-primary" @click="checkAllAnswers">
              æ£€æŸ¥å…¨éƒ¨ç­”æ¡ˆ
            </button>
            <button class="btn btn-outline" @click="resetQuiz">
              é‡æ–°ç»ƒä¹ 
            </button>
          </div>
        </section>

        <!-- åº•éƒ¨è¡ŒåŠ¨æŒ‰é’® -->
        <div class="action-buttons">
          <router-link to="/video?topic=payment-setoff" class="action-button video">
            <span>ğŸ“º</span>
            è§‚çœ‹ç›¸å…³è§†é¢‘
          </router-link>
          <router-link to="/practice?topic=payment-setoff" class="action-button">
            <span>ğŸ“</span>
            å¼€å§‹å¼ºåŒ–ç»ƒä¹ 
          </router-link>
          <router-link to="/notes?domain=rights" class="action-button">
            <span>ğŸ“š</span>
            è¿”å›æƒåˆ©å…³ç³»
          </router-link>
        </div>
      </main>
    </div>
  </div>
</template>

<script setup>
import { ref, computed, onMounted, onUnmounted } from 'vue'
import { useLearningStore } from '@/stores/learning'
import { useRouter } from 'vue-router'

const learningStore = useLearningStore()
const router = useRouter()

// ç”¨æˆ·å­¦ä¹ è¿›åº¦
const userProgress = ref(0)
const startTime = ref(new Date())

// é¡µé¢ç« èŠ‚å¯¼èˆª
const sections = [
  { id: 'key-terms', title: 'å…³é”®æœ¯è¯­', icon: 'ğŸ”¤' },
  { id: 'basic-concepts', title: 'å¼æµåŸºæœ¬æ¦‚å¿µ', icon: 'ğŸ“–' },
  { id: 'who-can-pay', title: 'å¯ä»¥è¿˜å€ºçš„äºº', icon: 'ğŸ‘¥' },
  { id: 'valid-payment', title: 'å‘è°è¿˜å€ºæœ‰æ•ˆ', icon: 'âœ…' },
  { id: 'payment-offer', title: 'è¿˜å€ºçš„æä¾›', icon: 'ğŸ’µ' },
  { id: 'payment-allocation', title: 'è¿˜å€ºçš„å……å½“', icon: 'ğŸ“Š' },
  { id: 'subrogation', title: 'è¿˜å€ºä»£ä½', icon: 'ğŸ”„' },
  { id: 'setoff-basics', title: 'ç›¸æ€åŸºæœ¬æ¦‚å¿µ', icon: 'âš–ï¸' },
  { id: 'setoff-prohibition', title: 'ç›¸æ€ç¦æ­¢', icon: 'ğŸš«' },
  { id: 'setoff-method', title: 'ç›¸æ€æ–¹æ³•', icon: 'âš¡' },
  { id: 'quiz', title: 'ç»ƒä¹ é¢˜', icon: 'âœï¸' }
]

// å…³é”®æœ¯è¯­æ•°æ®
const keyTerms = [
  {
    japanese: 'å¼æµï¼ˆã¹ã‚“ã•ã„ï¼‰',
    chinese: 'è¿˜å€º/å€ºåŠ¡æ¸…å¿',
    explanation: 'å€ºåŠ¡äººæŒ‰ç…§å€ºåŠ¡å†…å®¹å±¥è¡Œä¹‰åŠ¡ï¼Œä½¿å€ºæƒæ¶ˆç­çš„è¡Œä¸º',
    example: 'Aå€Ÿç»™B 10ä¸‡æ—¥å…ƒï¼ŒBè¿˜æ¬¾ç»™Aï¼Œå€ºåŠ¡æ¶ˆç­'
  },
  {
    japanese: 'ç›¸æ®ºï¼ˆãã†ã•ã„ï¼‰',
    chinese: 'æŠµæ¶ˆ',
    explanation: 'ä¸¤äººäº’è´ŸåŒç§å€ºåŠ¡æ—¶ï¼Œå„ä»¥å…¶å€ºæƒå……å½“å€ºåŠ¡çš„æ¸…å¿',
    example: 'Aæ¬ B 10ä¸‡ï¼ŒBæ¬ A 8ä¸‡ï¼Œç›¸æ€åAåªéœ€è¿˜B 2ä¸‡'
  },
  {
    japanese: 'å¼æ¸ˆã«ã‚ˆã‚‹ä»£ä½ï¼ˆã¹ã‚“ã•ã„ã«ã‚ˆã‚‹ã ã„ã„ï¼‰',
    chinese: 'è¿˜å€ºä»£ä½',
    explanation: 'ç¬¬ä¸‰äººè¿˜å€ºåï¼Œåœ¨å…¶æ±‚å¿æƒèŒƒå›´å†…ä»£ä½è¡Œä½¿åŸå€ºæƒäººçš„æƒåˆ©',
    example: 'ä¿è¯äººCæ›¿å€ºåŠ¡äººBè¿˜å€ºåï¼Œå¯ä»¥ä»£ä½å‘Bè¡Œä½¿å€ºæƒ'
  },
  {
    japanese: 'ä»£ç‰©å¼æ¸ˆï¼ˆã ã„ã¶ã¤ã¹ã‚“ã•ã„ï¼‰',
    chinese: 'ä»£ç‰©è¿˜å€º',
    explanation: 'ä»¥ä»–ç‰©ä»£æ›¿åŸå®šç»™ä»˜æ¥æ¸…å¿å€ºåŠ¡',
    example: 'Bæ¬ A 10ä¸‡ï¼Œç”¨ä»·å€¼10ä¸‡çš„ç”µè„‘æŠµå€º'
  },
  {
    japanese: 'ç›¸æ®ºé©çŠ¶ï¼ˆãã†ã•ã„ã¦ãã˜ã‚‡ã†ï¼‰',
    chinese: 'ç›¸æ€é€‚çŠ¶',
    explanation: 'æ»¡è¶³ç›¸æ€æˆç«‹è¦ä»¶çš„çŠ¶æ€',
    example: 'ABäº’è´Ÿé‡‘é’±å€ºåŠ¡ï¼Œä¸”å‡å·²åˆ°æœŸï¼Œå¤„äºå¯ç›¸æ€çŠ¶æ€'
  }
]

// ç»ƒä¹ é¢˜æ•°æ®
const quizzes = [
  {
    question: 'å‚µå‹™ã®æ€§è³ªãŒç¬¬ä¸‰è€…ã«ã‚ˆã‚‹å¼æ¸ˆã‚’è¨±ã•ãªã„å ´åˆã€åˆ©å®³é–¢ä¿‚ã®ãªã„ç¬¬ä¸‰è€…ãŒå‚µå‹™è€…ã®æ„æ€ã«åã—ã¦å¼æ¸ˆã—ã¦ã‚‚ã€ãã®å¼æ¸ˆã¯æœ‰åŠ¹ã§ã‚ã‚‹ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: false },
      { text: 'âœ• (èª¤ã‚Š)', correct: true }
    ],
    explanation: 'å€ºåŠ¡æ€§è´¨ä¸å…è®¸ç¬¬ä¸‰è€…è¿˜å€ºæ—¶ï¼Œå³ä½¿æ˜¯æœ‰åˆ©å®³å…³ç³»çš„ç¬¬ä¸‰è€…è¿èƒŒå€ºåŠ¡äººæ„æ€è¿˜å€ºä¹Ÿæ— æ•ˆã€‚'
  },
  {
    question: 'ç›¸æ®ºã¯ã€åŒæ–¹ã®å‚µå‹™ãŒå¼æ¸ˆæœŸã«ã‚ã‚‹ã¨ãã«ã®ã¿ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: false },
      { text: 'âœ• (èª¤ã‚Š)', correct: true }
    ],
    explanation: 'è‡ªåŠ¨å€ºæƒåˆ°æœŸæ—¶ï¼Œå³ä½¿å—åŠ¨å€ºæƒæœªåˆ°æœŸï¼Œå¦‚æœè‡ªåŠ¨å€ºæƒäººä¸»å¼ ç›¸æ€ï¼Œè§†ä¸ºå—åŠ¨å€ºæƒäººæ”¾å¼ƒæœŸé™åˆ©ç›Šï¼Œä¹Ÿå¯ä»¥ç›¸æ€ã€‚'
  },
  {
    question: 'ä¸æ³•è¡Œç‚ºã«ã‚ˆã‚‹æå®³è³ å„Ÿå‚µå‹™ã¯ã€è¢«å®³è€…å´ã‹ã‚‰ç›¸æ®ºã‚’ä¸»å¼µã™ã‚‹ã“ã¨ã¯ã§ãã‚‹ãŒã€åŠ å®³è€…å´ã‹ã‚‰ç›¸æ®ºã‚’ä¸»å¼µã™ã‚‹ã“ã¨ã¯ã§ããªã„ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: true },
      { text: 'âœ• (èª¤ã‚Š)', correct: false }
    ],
    explanation: 'ä¸æ³•è¡Œä¸ºçš„æŸå®³èµ”å¿å€ºåŠ¡ï¼Œè¢«å®³è€…å¯ä»¥ä¸»å¼ ç›¸æ€ï¼Œä½†åŠ å®³è€…ä¸èƒ½ä¸»å¼ ç›¸æ€ã€‚'
  },
  {
    question: 'å‚µæ¨©ãŒå·®ã—æŠ¼ã•ãˆã‚‰ã‚ŒãŸå¾Œã§å–å¾—ã—ãŸè‡ªå‹•å‚µæ¨©ã‚’ã‚‚ã£ã¦ã€å·®ã—æŠ¼ã•ãˆã‚‰ã‚ŒãŸå—å‹•å‚µæ¨©ã¨ç›¸æ®ºã™ã‚‹ã“ã¨ã¯ã§ãã‚‹ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: false },
      { text: 'âœ• (èª¤ã‚Š)', correct: true }
    ],
    explanation: 'å€ºæƒè¢«å†»ç»“åå–å¾—çš„è‡ªåŠ¨å€ºæƒï¼Œä¸èƒ½ä¸è¢«å†»ç»“çš„å—åŠ¨å€ºæƒç›¸æ€ï¼Œå¦åˆ™å¤±å»å€ºæƒå†»ç»“çš„æ„ä¹‰ã€‚'
  },
  {
    question: 'ç›¸æ®ºã®æ„æ€è¡¨ç¤ºã«ã¯ã€æ¡ä»¶ã‚„æœŸé™ã‚’ä»˜ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: false },
      { text: 'âœ• (èª¤ã‚Š)', correct: true }
    ],
    explanation: 'ç›¸æ€æ˜¯å½¢æˆæƒï¼ŒåŸºäºå…¶å³æ—¶æ€§å’Œæ— æ¡ä»¶æ€§çš„æœ¬è´¨ï¼Œä¸èƒ½é™„å¸¦æ¡ä»¶æˆ–æœŸé™ã€‚'
  }
]

// ç­”é¢˜çŠ¶æ€
const selectedAnswers = ref(Array(quizzes.length).fill(null))
const showAnswerIndex = ref(null)
const showAnswers = ref(false)

// æ–¹æ³•
const scrollToSection = (sectionId) => {
  const element = document.getElementById(sectionId)
  if (element) {
    element.scrollIntoView({ behavior: 'smooth' })
  }
}

const selectAnswer = (index, answer) => {
  selectedAnswers.value[index] = answer
  // æ›´æ–°å­¦ä¹ è¿›åº¦
  updateProgress()
}

const toggleAnswer = (index) => {
  showAnswerIndex.value = showAnswerIndex.value === index ? null : index
}

const getCorrectAnswer = (quiz) => {
  const correctOption = quiz.options.find(option => option.correct)
  return correctOption ? correctOption.text : ''
}

const checkAllAnswers = () => {
  showAnswers.value = true
  updateProgress()
}

const resetQuiz = () => {
  selectedAnswers.value = Array(quizzes.length).fill(null)
  showAnswers.value = false
  showAnswerIndex.value = null
  userProgress.value = 0
}

const updateProgress = () => {
  const total = quizzes.length
  const correct = quizzes.reduce((count, quiz, index) => {
    const selected = selectedAnswers.value[index]
    if (!selected) return count
    
    const isCorrect = quiz.options.find(opt => opt.text === selected)?.correct || false
    return count + (isCorrect ? 1 : 0)
  }, 0)
  
  userProgress.value = Math.round((correct / total) * 100)
}

// è®°å½•å­¦ä¹ æ—¶é—´
const recordStudyTime = () => {
  const currentTime = new Date()
  const studyTime = Math.floor((currentTime - startTime.value) / 1000) // è½¬æ¢ä¸ºç§’
  learningStore.recordTopicStudyTime('payment-setoff', studyTime)
}

// æ ‡è®°çŸ¥è¯†ç‚¹å®Œæˆ
const markTopicCompleted = () => {
  learningStore.completeTopic('payment-setoff')
}

// åˆå§‹åŒ–
onMounted(() => {
  // ä»å­¦ä¹ å­˜å‚¨åŠ è½½è¿›åº¦
  const progress = learningStore.getTopicProgress('payment-setoff')
  if (progress) {
    userProgress.value = progress.completionPercentage
  }
  
  // è®°å½•ç”¨æˆ·å¼€å§‹å­¦ä¹ è¿™ä¸ªçŸ¥è¯†ç‚¹
  learningStore.recordTopicStudyTime('payment-setoff', 0)
  
  // è®¾ç½®å®šæ—¶å™¨ï¼Œæ¯30ç§’è®°å½•ä¸€æ¬¡å­¦ä¹ æ—¶é—´
  const timer = setInterval(() => {
    recordStudyTime()
  }, 30000)
  
  onUnmounted(() => {
    clearInterval(timer)
    // ç»„ä»¶å¸è½½æ—¶è®°å½•æ€»å­¦ä¹ æ—¶é—´
    recordStudyTime()
  })
})
</script>

<style scoped>
.payment-setoff-page {
  min-height: 100vh;
  background-color: #f8f9fa;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 2rem;
}

/* ========= é¡µé¢å¤´éƒ¨ ========= */
.page-header {
  background: linear-gradient(135deg, rgba(42, 121, 96, 0.05), rgba(42, 121, 96, 0.02));
  border-radius: 12px;
  padding: 2rem;
  margin: 1rem 0 2rem;
  text-align: center;
}

.breadcrumb {
  font-size: 0.875rem;
  color: #6c757d;
  margin-bottom: 1rem;
}

.breadcrumb a {
  color: #2a7960;
  text-decoration: none;
}

.breadcrumb a:hover {
  text-decoration: underline;
}

.header-content h1 {
  font-size: 2.25rem;
  font-weight: 800;
  color: #1a472a;
  margin-bottom: 1rem;
}

.header-content p {
  font-size: 1.125rem;
  color: #6c757d;
  max-width: 700px;
  margin: 0 auto 2rem;
  line-height: 1.6;
}

.header-stats {
  display: flex;
  justify-content: center;
  gap: 3rem;
  flex-wrap: wrap;
}

.stat-item {
  text-align: center;
}

.stat-number {
  display: block;
  font-size: 1.75rem;
  font-weight: 700;
  color: #2a7960;
  margin-bottom: 0.25rem;
}

.stat-label {
  font-size: 0.875rem;
  color: #6c757d;
}

/* ========= ä¸»è¦å†…å®¹åŒºåŸŸ ========= */
.main-content {
  margin: 2rem 0;
}

/* ========= å¿«é€Ÿå¯¼èˆª ========= */
.quick-nav {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  margin-bottom: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.quick-nav h3 {
  font-size: 1.25rem;
  font-weight: 600;
  color: #1a472a;
  margin-bottom: 1rem;
}

.nav-links {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 0.75rem;
}

.nav-link {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  background: #f8f9fa;
  border-radius: 8px;
  text-decoration: none;
  color: #333;
  transition: all 0.2s ease;
  border: none;
  cursor: pointer;
  font-family: inherit;
  font-size: 0.875rem;
}

.nav-link:hover {
  background: #e9ecef;
  color: #1a472a;
  transform: translateY(-2px);
}

.nav-icon {
  font-size: 1.125rem;
}

/* ========= å­¦ä¹ ç›®æ ‡ ========= */
.learning-goals {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.learning-goals h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #1a472a;
  margin-bottom: 1.5rem;
}

.learning-goals ul {
  padding-left: 1.5rem;
}

.learning-goals li {
  margin-bottom: 0.75rem;
  line-height: 1.6;
}

/* ========= å…³é”®æœ¯è¯­ ========= */
.key-terms {
  margin-bottom: 2rem;
}

.key-terms h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #1a472a;
  margin-bottom: 1.5rem;
}

.terms-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
}

.term-card {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  border-left: 4px solid #2a7960;
}

.term-japanese {
  font-weight: bold;
  color: #2a7960;
  margin-bottom: 0.5rem;
  font-size: 0.875rem;
}

.term-chinese {
  font-weight: bold;
  color: #333;
  margin-bottom: 1rem;
  font-size: 1.125rem;
}

.term-explanation {
  margin-bottom: 1rem;
  line-height: 1.6;
}

.term-example {
  background: #eef7ff;
  padding: 1rem;
  border-radius: 5px;
  font-style: italic;
  border-left: 3px solid #a8c6ff;
  font-size: 0.875rem;
  line-height: 1.5;
}

/* ========= å†…å®¹åŒºå— ========= */
.content-section {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.content-section h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #1a472a;
  margin-bottom: 1.5rem;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid #e9ecef;
}

.content-section h3 {
  font-size: 1.25rem;
  font-weight: 600;
  color: #1a472a;
  margin: 1.5rem 0 1rem;
}

.content-section p {
  line-height: 1.6;
  margin-bottom: 1rem;
}

.content-section ul, .content-section ol {
  padding-left: 1.5rem;
  margin-bottom: 1.5rem;
}

.content-section li {
  margin-bottom: 0.5rem;
  line-height: 1.6;
}

/* ========= åŸºæœ¬æ¦‚å¿µæ ·å¼ ========= */
.concept-explanation {
  margin-bottom: 2rem;
}

.example-box {
  background: #f0f7ff;
  border-radius: 8px;
  padding: 1.5rem;
  margin-top: 1rem;
  border-left: 4px solid #2a7960;
}

.example-box h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.effect-timing {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
}

.timing-item {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.timing-icon {
  font-size: 2rem;
  flex-shrink: 0;
}

.timing-content h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.timing-content p {
  margin: 0;
  color: #6c757d;
}

/* ========= å¯ä»¥è¿˜å€ºçš„äººæ ·å¼ ========= */
.heir-order {
  margin-bottom: 2rem;
}

.order-flow {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.flow-step {
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
  text-align: center;
}

.step-number {
  width: 40px;
  height: 40px;
  background: #2a7960;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  margin: 0 auto 1rem;
}

.step-content h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.step-content p {
  margin: 0 0 1rem 0;
  font-size: 0.875rem;
  color: #6c757d;
}

.step-note {
  padding: 0.5rem;
  background: #e9f7f0;
  border-radius: 4px;
  font-size: 0.875rem;
  color: #2a7960;
  font-weight: bold;
}

.important-notes {
  margin: 1.5rem 0;
}

.note-item {
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.note-item h4 {
  margin: 0 0 1rem 0;
  color: #1a472a;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.note-item ul {
  padding-left: 1.25rem;
  margin: 0;
}

.note-item li {
  margin-bottom: 0.5rem;
  line-height: 1.6;
}

.comparison-table-container {
  overflow-x: auto;
  margin: 1.5rem 0;
}

.comparison-table {
  width: 100%;
  border-collapse: collapse;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  border-radius: 8px;
  overflow: hidden;
}

.comparison-table th, .comparison-table td {
  border: 1px solid #e9ecef;
  padding: 12px;
  text-align: center;
}

.comparison-table th {
  background-color: #2a7960;
  color: white;
  font-weight: 600;
}

.comparison-table tr:nth-child(even) {
  background-color: #f8f9fa;
}

/* ========= å‘è°è¿˜å€ºæœ‰æ•ˆæ ·å¼ ========= */
.case-scenario {
  margin: 2rem 0;
}

.scenario-steps {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.scenario-step {
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
  text-align: center;
}

.scenario-step .step-number {
  width: 40px;
  height: 40px;
  background: #2a7960;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  margin: 0 auto 1rem;
}

.scenario-step p {
  margin: 0;
}

.scenario-result {
  padding: 1.5rem;
  background: #e7f7e7;
  border-radius: 8px;
  text-align: center;
  font-weight: bold;
}

.scenario-result.warning {
  background: #fff9e6;
  border-left: 4px solid #ffcc00;
}

.scenario-result.success {
  background: #e7f7e7;
  border-left: 4px solid #2e7d32;
}

/* ========= è¿˜å€ºçš„æä¾›å’Œæ–¹æ³•æ ·å¼ ========= */
.payment-methods {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.method-item {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.method-icon {
  font-size: 2rem;
  flex-shrink: 0;
}

.method-content h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.method-content p {
  margin: 0;
  color: #6c757d;
}

.method-note {
  margin-top: 1rem;
  padding: 0.5rem;
  background: #f5f5f5;
  border-radius: 4px;
  font-size: 0.875rem;
  font-weight: bold;
}

/* ========= è¿˜å€ºçš„å……å½“æ ·å¼ ========= */
.allocation-order {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.allocation-step {
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
  text-align: center;
}

.allocation-step .step-number {
  width: 40px;
  height: 40px;
  background: #2a7960;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  margin: 0 auto 1rem;
}

.allocation-step h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.allocation-step p {
  margin: 0 0 1rem 0;
  color: #6c757d;
}

/* ========= è¿˜å€ºä»£ä½æ ·å¼ ========= */
.subrogation-conditions {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.condition-item {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.condition-icon {
  font-size: 2rem;
  flex-shrink: 0;
}

.condition-content h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.condition-content p {
  margin: 0;
  color: #6c757d;
}

.condition-status {
  margin-top: 1rem;
  padding: 0.5rem;
  border-radius: 4px;
  font-size: 0.875rem;
  font-weight: bold;
  text-align: center;
}

.condition-status.can-substitute {
  background: #e7f7e7;
  color: #2e7d32;
}

.condition-status.cannot-substitute {
  background: #ffe7e7;
  color: #c62828;
}

/* ========= ç›¸æ€åŸºæœ¬æ¦‚å¿µæ ·å¼ ========= */
.setoff-conditions {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.setoff-conditions .condition-item {
  text-align: center;
}

.setoff-conditions .condition-icon {
  width: 40px;
  height: 40px;
  background: #2a7960;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  margin: 0 auto;
}

/* ========= ç›¸æ€ç¦æ­¢æ ·å¼ ========= */
.prohibition-cases {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.case-item {
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.case-icon {
  font-size: 2rem;
  margin-bottom: 1rem;
}

.case-content h4 {
  margin: 0 0 1rem 0;
  color: #1a472a;
}

.case-content p {
  margin: 0 0 1rem 0;
  color: #6c757d;
}

.case-result {
  padding: 1rem;
  background: #fff9e6;
  border-radius: 4px;
  font-weight: bold;
}

.freeze-scenario {
  margin: 2rem 0;
}

/* ========= ç›¸æ€æ–¹æ³•æ ·å¼ ========= */
.legal-nature {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.nature-item {
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
  text-align: center;
}

.nature-icon {
  font-size: 2rem;
  margin-bottom: 1rem;
}

.nature-content h4 {
  margin: 0 0 0.5rem 0;
  color: #1a472a;
}

.prohibition-reasons {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin: 2rem 0;
}

.reason-item {
  padding: 1.5rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.reason-item h4 {
  margin: 0 0 1rem 0;
  color: #1a472a;
}

/* ========= ç»ƒä¹ é¢˜æ ·å¼ ========= */
.quiz-section {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.quiz-section h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #1a472a;
  margin-bottom: 1.5rem;
}

.quiz-item {
  background: #f9f9f9;
  border-radius: 12px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
}

.quiz-question {
  font-weight: bold;
  margin-bottom: 1.25rem;
  font-size: 1.1rem;
  line-height: 1.5;
}

.quiz-options {
  display: flex;
  gap: 1rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
}

.quiz-option {
  display: flex;
  align-items: center;
  cursor: pointer;
  padding: 0.75rem 1rem;
  border: 2px solid #ddd;
  border-radius: 5px;
  transition: all 0.3s ease;
  background: white;
  min-width: 120px;
  justify-content: center;
}

.quiz-option:hover {
  background: #f0f0f0;
}

.quiz-option.selected {
  border-color: #2a7960;
  background: #e9f7f0;
}

.quiz-option.correct {
  border-color: #28a745;
  background: #e7f7e7;
  color: #2e7d32;
}

.quiz-option.incorrect {
  border-color: #dc3545;
  background: #ffe7e7;
  color: #c62828;
}

.quiz-actions {
  margin-bottom: 1rem;
}

.answer-btn {
  background: #2a7960;
  color: white;
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 5px;
  cursor: pointer;
  transition: background 0.3s ease;
  margin-right: 0.5rem;
  font-size: 0.875rem;
}

.answer-btn:hover {
  background: #1a472a;
}

.answer-explanation {
  margin-top: 1rem;
  padding: 1rem;
  background: #f5f5f5;
  border-radius: 5px;
  line-height: 1.6;
}

.quiz-footer-actions {
  display: flex;
  gap: 1rem;
  justify-content: center;
  margin-top: 2rem;
  flex-wrap: wrap;
}

/* ========= æŒ‰é’®æ ·å¼ ========= */
.btn {
  padding: 0.75rem 1.5rem;
  border-radius: 8px;
  font-size: 0.875rem;
  font-weight: 600;
  text-align: center;
  text-decoration: none;
  transition: all 0.3s ease;
  border: none;
  cursor: pointer;
  font-family: inherit;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
}

.btn-primary {
  background: #2a7960;
  color: white;
}

.btn-primary:hover {
  background: #1a472a;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(42, 121, 96, 0.3);
}

.btn-outline {
  background: transparent;
  color: #2a7960;
  border: 1px solid #2a7960;
}

.btn-outline:hover {
  background: #e9f7f0;
  transform: translateY(-2px);
}

/* ========= åº•éƒ¨è¡ŒåŠ¨æŒ‰é’® ========= */
.action-buttons {
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin-top: 3rem;
  padding-top: 2rem;
  border-top: 1px solid #e9ecef;
  flex-wrap: wrap;
}

.action-button {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  background: linear-gradient(135deg, #2a7960, #1a472a);
  color: white;
  text-decoration: none;
  border-radius: 12px;
  font-weight: 600;
  transition: all 0.3s ease;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.action-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
}

.action-button.video {
  background: linear-gradient(135deg, #2a7960, #205e4a);
}

/* ========= å“åº”å¼è®¾è®¡ ========= */
@media (max-width: 768px) {
  .container {
    padding: 0 1rem;
  }
  
  .page-header {
    padding: 1.5rem 1rem;
  }
  
  .header-content h1 {
    font-size: 1.75rem;
  }
  
  .header-stats {
    gap: 1.5rem;
  }
  
  .stat-number {
    font-size: 1.5rem;
  }
  
  .nav-links {
    grid-template-columns: 1fr;
  }
  
  .terms-grid {
    grid-template-columns: 1fr;
  }
  
  .effect-timing {
    grid-template-columns: 1fr;
  }
  
  .order-flow {
    grid-template-columns: 1fr;
  }
  
  .payment-methods {
    grid-template-columns: 1fr;
  }
  
  .allocation-order {
    grid-template-columns: 1fr;
  }
  
  .subrogation-conditions {
    grid-template-columns: 1fr;
  }
  
  .setoff-conditions {
    grid-template-columns: 1fr;
  }
  
  .prohibition-cases {
    grid-template-columns: 1fr;
  }
  
  .legal-nature {
    grid-template-columns: 1fr;
  }
  
  .prohibition-reasons {
    grid-template-columns: 1fr;
  }
  
  .quiz-options {
    flex-direction: column;
  }
  
  .quiz-option {
    min-width: auto;
  }
  
  .action-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .action-button {
    width: 100%;
    max-width: 300px;
    justify-content: center;
  }
  
  .content-section, 
  .learning-goals, 
  .quiz-section, 
  .quick-nav {
    padding: 1.5rem;
  }
}

@media (max-width: 480px) {
  .header-stats {
    flex-direction: column;
    gap: 1rem;
  }
  
  .quiz-footer-actions {
    flex-direction: column;
  }
  
  .btn {
    width: 100%;
    justify-content: center;
  }
}
</style>
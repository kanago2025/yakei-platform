<!-- src/views/notes/business/CompensationLimit.vue -->
<template>
  <div class="compensation-limit-page">
    <!-- é¡µé¢å¤´éƒ¨ -->
    <div class="page-header">
      <div class="header-content">
        <div class="breadcrumb">
          <router-link to="/notes">ä¸­æ–‡ç¬”è®°</router-link> &gt; 
          <router-link to="/notes?domain=business">å®…å»ºä¸šæ³•</router-link> &gt; 
          <span>æŠ¥é…¬é¢çš„é™åˆ¶</span>
        </div>
        <h1>æŠ¥é…¬é¢çš„é™åˆ¶</h1>
        <p>å®…å»ºä¸šè€…ä¸­ä»‹æœåŠ¡è´¹çš„æ³•å®šä¸Šé™è®¡ç®—è§„åˆ™ï¼ŒåŒ…æ‹¬ä¹°å–ã€äº¤æ¢ã€ç§Ÿèµç­‰ä¸åŒäº¤æ˜“ç±»å‹çš„æŠ¥é…¬è®¡ç®—æ–¹æ³•</p>
        
        <!-- å­¦ä¹ ç»Ÿè®¡ -->
        <div class="header-stats">
          <div class="stat-item">
            <span class="stat-number">18</span>
            <span class="stat-label">æ ¸å¿ƒè¦ç‚¹</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">45åˆ†é’Ÿ</span>
            <span class="stat-label">å»ºè®®å­¦ä¹ æ—¶é—´</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">5</span>
            <span class="stat-label">ç»ƒä¹ é¢˜</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">{{ userProgress }}%</span>
            <span class="stat-label">æŒæ¡è¿›åº¦</span>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
      <main class="main-content">
        <!-- å¿«é€Ÿå¯¼èˆª -->
        <div class="quick-nav">
          <h3>æœ¬é¡µå¯¼èˆª</h3>
          <div class="nav-links">
            <a 
              v-for="section in sections" 
              :key="section.id"
              :href="`#${section.id}`"
              class="nav-link"
              @click.prevent="scrollToSection(section.id)"
            >
              <span class="nav-icon">{{ section.icon }}</span>
              {{ section.title }}
            </a>
          </div>
        </div>

        <!-- å­¦ä¹ ç›®æ ‡ -->
        <section class="learning-goals">
          <h2>ğŸ“š å­¦ä¹ ç›®æ ‡</h2>
          <ul>
            <li>æŒæ¡ä¹°å–ã€äº¤æ¢åœºåˆçš„æŠ¥é…¬é¢è®¡ç®—æ–¹æ³•</li>
            <li>ç†è§£åª’ä»‹ä¸ä»£ç†å¥‘çº¦çš„æŠ¥é…¬é¢å·®å¼‚</li>
            <li>ç†Ÿæ‚‰ç§Ÿèµåœºåˆçš„æŠ¥é…¬é¢é™åˆ¶è§„åˆ™</li>
            <li>äº†è§£ä½å»‰ç©ºå®¶ç‰¹ä¾‹çš„é€‚ç”¨æ¡ä»¶</li>
            <li>æŒæ¡æ¶ˆè´¹ç¨åœ¨æŠ¥é…¬è®¡ç®—ä¸­çš„å¤„ç†æ–¹æ³•</li>
          </ul>
        </section>

        <!-- å…³é”®æœ¯è¯­ -->
        <section id="key-terms" class="key-terms">
          <h2>ğŸ§‘â€âš–ï¸ å…³é”®æœ¯è¯­</h2>
          <div class="terms-grid">
            <div 
              v-for="term in keyTerms" 
              :key="term.japanese"
              class="term-card"
            >
              <div class="term-japanese">{{ term.japanese }}</div>
              <div class="term-chinese">{{ term.chinese }}</div>
              <div class="term-explanation">{{ term.explanation }}</div>
              <div class="term-example">{{ term.example }}</div>
            </div>
          </div>
        </section>

        <!-- åŸºæœ¬æ¦‚å¿µä¸å¿…è¦ç»è´¹ -->
        <section id="basic-concepts" class="content-section">
          <h2>1. åŸºæœ¬æ¦‚å¿µä¸å¿…è¦ç»è´¹</h2>
          
          <h3>æŠ¥é…¬çš„å®šä¹‰</h3>
          <div class="concept-box">
            <p>æŠ¥é…¬æ˜¯æŒ‡å®…å»ºä¸šè€…åœ¨è¿›è¡Œ<strong>åª’ä»‹</strong>æˆ–<strong>ä»£ç†</strong>ä¸šåŠ¡æ—¶æ”¶å–çš„ä¸­ä»‹æ‰‹ç»­è´¹ã€‚æ ¹æ®<strong>å®…åœ°å»ºç‰©å–å¼•ä¸šæ³•ç¬¬46æ¡</strong>ï¼ŒæŠ¥é…¬é¢å¿…é¡»éµå®ˆå›½åœŸäº¤é€šå¤§è‡£è§„å®šçš„ä¸Šé™ã€‚</p>
          </div>

          <h3>å¿…è¦ç»è´¹çš„å¤„ç†</h3>
          <div class="expense-handling">
            <div class="expense-item">
              <div class="expense-icon">ğŸ’°</div>
              <div class="expense-content">
                <h4>åŒ…å«åœ¨æŠ¥é…¬å†…çš„è´¹ç”¨</h4>
                <ul>
                  <li>ä¸€èˆ¬å¹¿å‘Šè´¹ç­‰ä¸šåŠ¡ç»è´¹</li>
                  <li>æ—¥å¸¸è¿è¥æˆæœ¬</li>
                  <li>æ ‡å‡†æœåŠ¡èŒƒå›´å†…è´¹ç”¨</li>
                </ul>
              </div>
            </div>
            <div class="expense-item">
              <div class="expense-icon">ğŸ“</div>
              <div class="expense-content">
                <h4>å¯å¦è¡Œæ”¶å–çš„è´¹ç”¨</h4>
                <ul>
                  <li>ä¾å®¢æˆ·ç‰¹åˆ«è¦æ±‚äº§ç”Ÿçš„<strong>å®é™…è´¹ç”¨</strong></li>
                  <li>è¿œç¨‹ç°åœ°è°ƒæŸ¥è´¹</li>
                  <li>ç‰¹æ®Šå¹¿å‘Šå®£ä¼ è´¹</li>
                  <li class="important">éœ€äº‹å…ˆè·å¾—å®¢æˆ·åŒæ„</li>
                </ul>
              </div>
            </div>
          </div>
        </section>

        <!-- ä¹°å–ã€äº¤æ¢çš„æŠ¥é…¬è®¡ç®— -->
        <section id="sale-calculation" class="content-section">
          <h2>2. ä¹°å–ã€äº¤æ¢çš„æŠ¥é…¬è®¡ç®—</h2>
          
          <h3>é€Ÿç®—æ³•è®¡ç®—å…¬å¼</h3>
          <div class="table-container">
            <table class="calculation-table">
              <thead>
                <tr>
                  <th>ä¹°å–ä»·æ ¼</th>
                  <th>è®¡ç®—å…¬å¼</th>
                  <th>è®¡ç®—ç¤ºä¾‹ï¼ˆ500ä¸‡æ—¥å…ƒï¼‰</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><strong>200ä¸‡æ—¥å…ƒä»¥ä¸‹</strong></td>
                  <td>ä¹°å–ä»·æ ¼çš„5%</td>
                  <td>200ä¸‡Ã—5% = 10ä¸‡æ—¥å…ƒ</td>
                </tr>
                <tr>
                  <td><strong>200ä¸‡è¶…ï½400ä¸‡æ—¥å…ƒä»¥ä¸‹</strong></td>
                  <td>ä¹°å–ä»·æ ¼çš„4% + 2ä¸‡æ—¥å…ƒ</td>
                  <td>300ä¸‡Ã—4% + 2ä¸‡ = 14ä¸‡æ—¥å…ƒ</td>
                </tr>
                <tr>
                  <td><strong>400ä¸‡æ—¥å…ƒè¶…</strong></td>
                  <td>ä¹°å–ä»·æ ¼çš„3% + 6ä¸‡æ—¥å…ƒ</td>
                  <td>500ä¸‡Ã—3% + 6ä¸‡ = 21ä¸‡æ—¥å…ƒ</td>
                </tr>
              </tbody>
            </table>
          </div>

          <h3>ä¸åŒå¥‘çº¦ç±»å‹çš„æŠ¥é…¬é™åˆ¶</h3>
          <div class="contract-types">
            <div class="contract-type">
              <h4>ğŸ  åª’ä»‹å¥‘çº¦</h4>
              <div class="contract-details">
                <div class="detail-item">
                  <span class="detail-label">ä»å•æ–¹å®¢æˆ·ï¼š</span>
                  <span class="detail-value">åŸºå‡†é¢ä»¥å†…</span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">ä»åŒæ–¹å®¢æˆ·ï¼š</span>
                  <span class="detail-value">åŸºå‡†é¢çš„2å€ä»¥å†…</span>
                </div>
                <div class="example">
                  <strong>ä¾‹ï¼š</strong>1000ä¸‡æ—¥å…ƒä¹°å–ï¼ŒåŸºå‡†é¢36ä¸‡æ—¥å…ƒ<br>
                  ä»å•æ–¹æœ€å¤š36ä¸‡ï¼Œä»åŒæ–¹æœ€å¤š72ä¸‡æ—¥å…ƒ
                </div>
              </div>
            </div>
            <div class="contract-type">
              <h4>ğŸ“‘ ä»£ç†å¥‘çº¦</h4>
              <div class="contract-details">
                <div class="detail-item">
                  <span class="detail-label">ä»å•æ–¹å®¢æˆ·ï¼š</span>
                  <span class="detail-value">åŸºå‡†é¢çš„2å€ä»¥å†…</span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">ä»åŒæ–¹å®¢æˆ·ï¼š</span>
                  <span class="detail-value">åŒä¸€äº¤æ˜“ä¸­åˆè®¡ä¸å¾—è¶…è¿‡åŸºå‡†é¢çš„2å€</span>
                </div>
                <div class="example">
                  <strong>ä¾‹ï¼š</strong>1000ä¸‡æ—¥å…ƒä¹°å–ï¼ŒåŸºå‡†é¢36ä¸‡æ—¥å…ƒ<br>
                  ä»å•æ–¹æœ€å¤š72ä¸‡ï¼ŒåŒæ–¹åˆè®¡ä¸è¶…è¿‡72ä¸‡æ—¥å…ƒ
                </div>
              </div>
            </div>
          </div>

          <h3>å¤æ•°ä¸šè€…å‚ä¸çš„æƒ…å†µ</h3>
          <div class="multiple-agents">
            <div class="notice-box important">
              <strong>é‡è¦è§„åˆ™ï¼š</strong>åŒä¸€äº¤æ˜“ä¸­æ‰€æœ‰ä¸šè€…æ”¶å–çš„æŠ¥é…¬æ€»é¢ä¸å¾—è¶…è¿‡åŸºå‡†é¢çš„2å€
            </div>
            
            <div class="agent-scenario">
              <h4>åœºæ™¯ç¤ºä¾‹</h4>
              <div class="scenario-diagram">
                <div class="parties">
                  <div class="party seller">å–æ–¹A</div>
                  <div class="arrow">â†’</div>
                  <div class="agent agent-a">ä¸šè€…Aï¼ˆä»£ç†ï¼‰</div>
                  <div class="arrow">â†’</div>
                  <div class="transaction">ä¹°å–å¥‘çº¦</div>
                  <div class="arrow">â†’</div>
                  <div class="agent agent-b">ä¸šè€…Bï¼ˆåª’ä»‹ï¼‰</div>
                  <div class="arrow">â†’</div>
                  <div class="party buyer">ä¹°æ–¹B</div>
                </div>
              </div>
              <div class="scenario-calculation">
                <p><strong>5000ä¸‡æ—¥å…ƒåœŸåœ°ä¹°å–ï¼š</strong></p>
                <ul>
                  <li>åŸºå‡†é¢ï¼š5000ä¸‡Ã—3% + 6ä¸‡ = 156ä¸‡æ—¥å…ƒ</li>
                  <li>ä¸šè€…Aï¼ˆä»£ç†ï¼‰ï¼šæœ€å¤š156ä¸‡æ—¥å…ƒ</li>
                  <li>ä¸šè€…Bï¼ˆåª’ä»‹ï¼‰ï¼šæœ€å¤š156ä¸‡æ—¥å…ƒ</li>
                  <li><strong>ä½†åŒæ–¹åˆè®¡ä¸å¾—è¶…è¿‡312ä¸‡æ—¥å…ƒ</strong></li>
                </ul>
              </div>
            </div>
          </div>
        </section>

        <!-- ç§Ÿèµçš„æŠ¥é…¬é™åˆ¶ -->
        <section id="rental-limits" class="content-section">
          <h2>3. ç§Ÿèµçš„æŠ¥é…¬é™åˆ¶</h2>
          
          <div class="rental-comparison">
            <div class="rental-type">
              <h4>ğŸ¡ å±…ä½ç”¨å»ºç­‘ç‰©ç§Ÿèµ</h4>
              <div class="rental-details">
                <div class="detail-group">
                  <h5>åª’ä»‹å¥‘çº¦</h5>
                  <ul>
                    <li>è´·ä¸»ã€å€Ÿä¸»åˆè®¡ï¼š<strong>ç§Ÿé‡‘1ä¸ªæœˆä»½ä»¥å†…</strong></li>
                    <li>æœªè·æ‰¿è¯ºæ—¶ï¼šä»å•æ–¹å®¢æˆ·æœ€å¤šæ”¶å–<strong>1/2ä¸ªæœˆä»½</strong></li>
                    <li>è·å¾—æ‰¿è¯ºæ—¶ï¼šä»å•æ–¹å®¢æˆ·æœ€å¤šæ”¶å–<strong>1ä¸ªæœˆä»½</strong></li>
                  </ul>
                </div>
                <div class="detail-group">
                  <h5>ä»£ç†å¥‘çº¦</h5>
                  <ul>
                    <li>è´·ä¸»ã€å€Ÿä¸»åˆè®¡ï¼š<strong>ç§Ÿé‡‘1ä¸ªæœˆä»½ä»¥å†…</strong></li>
                    <li>åˆ†é…æ¯”ä¾‹è‡ªç”±</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="rental-type">
              <h4>ğŸ¢ å±…ä½ç”¨ä»¥å¤–å»ºç­‘ç‰©ç§Ÿèµ</h4>
              <div class="rental-details">
                <div class="detail-group">
                  <h5>åª’ä»‹/ä»£ç†å¥‘çº¦</h5>
                  <ul>
                    <li>è´·ä¸»ã€å€Ÿä¸»åˆè®¡ï¼š<strong>ç§Ÿé‡‘1ä¸ªæœˆä»½ä»¥å†…</strong></li>
                    <li>åˆ†é…æ¯”ä¾‹è‡ªç”±</li>
                  </ul>
                </div>
                <div class="detail-group important">
                  <h5>æƒåˆ©é‡‘æ”¶å—æ—¶</h5>
                  <ul>
                    <li>å¯å°†æƒåˆ©é‡‘è§†ä¸ºä¹°å–ä»£é‡‘è®¡ç®—æŠ¥é…¬</li>
                    <li>ä¸ç§Ÿé‡‘è®¡ç®—æ¯”è¾ƒï¼Œå–<strong>è¾ƒé«˜è€…</strong></li>
                    <li>æƒåˆ©é‡‘ï¼šæƒåˆ©è®¾å®šå¯¹ä»·ä¸”ä¸è¿”è¿˜çš„é‡‘é’±</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <h3>æƒåˆ©é‡‘è®¡ç®—ç¤ºä¾‹</h3>
          <div class="rights-fee-example">
            <div class="example-scenario">
              <p><strong>åœºæ™¯ï¼š</strong>å•†é“ºç§Ÿèµï¼Œæœˆç§Ÿé‡‘20ä¸‡æ—¥å…ƒï¼Œæƒåˆ©é‡‘100ä¸‡æ—¥å…ƒ</p>
              <div class="calculation-steps">
                <div class="step">
                  <span class="step-label">ç§Ÿé‡‘è®¡ç®—ï¼š</span>
                  <span class="step-value">20ä¸‡æ—¥å…ƒï¼ˆ1ä¸ªæœˆä»½ï¼‰</span>
                </div>
                <div class="step">
                  <span class="step-label">æƒåˆ©é‡‘è®¡ç®—ï¼š</span>
                  <span class="step-value">100ä¸‡Ã—3% + 6ä¸‡ = 9ä¸‡æ—¥å…ƒ</span>
                </div>
                <div class="step result">
                  <span class="step-label">é‡‡ç”¨é‡‘é¢ï¼š</span>
                  <span class="step-value">20ä¸‡æ—¥å…ƒï¼ˆå–è¾ƒé«˜è€…ï¼‰</span>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- ä½å»‰ç©ºå®¶ç‰¹ä¾‹ -->
        <section id="vacant-house" class="content-section">
          <h2>4. ä½å»‰ç©ºå®¶ç‰¹ä¾‹</h2>
          
          <div class="special-exception">
            <div class="exception-type">
              <h4>ğŸ’° ä¹°å–ã€äº¤æ¢ç‰¹ä¾‹</h4>
              <div class="exception-conditions">
                <h5>é€‚ç”¨æ¡ä»¶</h5>
                <ul>
                  <li>ä¸å«ç¨ä»£é‡‘<strong>800ä¸‡æ—¥å…ƒä»¥ä¸‹</strong>çš„å®…åœ°æˆ–å»ºç­‘ç‰©</li>
                  <li>ä½¿ç”¨çŠ¶æ€ä¸é—®</li>
                  <li>é€šå¸¸éœ€è¦æ›´å¤šç°åœ°è°ƒæŸ¥è´¹ç”¨</li>
                </ul>
              </div>
              <div class="exception-limits">
                <h5>æŠ¥é…¬ä¸Šé™</h5>
                <ul>
                  <li><strong>åª’ä»‹ï¼š</strong>ä»å•æ–¹å®¢æˆ·30ä¸‡æ—¥å…ƒ+æ¶ˆè´¹ç¨ä»¥å†…</li>
                  <li><strong>ä»£ç†ï¼š</strong>ä»å•æ–¹å®¢æˆ·60ä¸‡æ—¥å…ƒ+æ¶ˆè´¹ç¨ä»¥å†…</li>
                </ul>
              </div>
            </div>
            <div class="exception-type">
              <h4>ğŸšï¸ ç§Ÿèµç‰¹ä¾‹</h4>
              <div class="exception-conditions">
                <h5>é€‚ç”¨æ¡ä»¶</h5>
                <ul>
                  <li>é•¿æœŸç©ºç½®ä¸”å°†æ¥ä¹Ÿæ— ä½¿ç”¨å¯èƒ½çš„å®…åœ°æˆ–å»ºç­‘ç‰©</li>
                  <li>ç°é•¿æœŸæ— äººå±…ä½</li>
                  <li>å°†æ¥ä¹Ÿæ— å±…ä½æˆ–äº‹ä¸šä½¿ç”¨å¯èƒ½</li>
                  <li>ç§Ÿé‡‘ä¸é—®</li>
                </ul>
              </div>
              <div class="exception-limits">
                <h5>æŠ¥é…¬ä¸Šé™</h5>
                <ul>
                  <li><strong>ä»è´·ä¸»ï¼š</strong>ç§Ÿé‡‘2.2å€+æ¶ˆè´¹ç¨ä»¥å†…</li>
                  <li><strong>ä»å€Ÿä¸»ï¼š</strong>åŸåˆ™ä¸Šç§Ÿé‡‘1.1å€+æ¶ˆè´¹ç¨ä»¥å†…</li>
                  <li>å±…ä½ç”¨éœ€è·å¾—å€Ÿä¸»æ‰¿è¯º</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="exam-hint">
            <h4>ğŸ’¡ è€ƒé¢˜æç¤º</h4>
            <p>å½“é¢˜ç›®ä¸­å‡ºç°<strong>"é€šå¸¸ã‚ˆã‚Šã‚‚ç¾åœ°èª¿æŸ»è²»ç”¨ç­‰ã‚’è¦ã™ã‚‹ã‚‚ã®"</strong>æè¿°æ—¶ï¼Œé€šå¸¸è€ƒå¯Ÿä½å»‰ç©ºå®¶ç‰¹ä¾‹ã€‚</p>
          </div>
        </section>

        <!-- æ¶ˆè´¹ç¨å¤„ç† -->
        <section id="consumption-tax" class="content-section">
          <h2>5. æ¶ˆè´¹ç¨å¤„ç†</h2>
          
          <h3>åœŸåœ°ä¸å»ºç­‘ç‰©çš„åŒºåˆ«</h3>
          <div class="tax-differences">
            <div class="tax-type">
              <h4>ğŸŒ³ åœŸåœ°</h4>
              <ul>
                <li><strong>éè¯¾ç¨å¯¹è±¡</strong></li>
                <li>ç›´æ¥ä½¿ç”¨ä¸å«ç¨ä»·æ ¼è®¡ç®—</li>
                <li>æ— éœ€è€ƒè™‘æ¶ˆè´¹ç¨</li>
              </ul>
            </div>
            <div class="tax-type">
              <h4>ğŸ  å»ºç­‘ç‰©</h4>
              <ul>
                <li><strong>è¯¾ç¨å¯¹è±¡</strong></li>
                <li>éœ€å°†ä¸å«ç¨ä»·æ ¼è®¡å…¥è®¡ç®—</li>
                <li>æœ€ååŠ ä¸Šæ¶ˆè´¹ç¨é¢</li>
              </ul>
            </div>
          </div>

          <h3>æ¶ˆè´¹ç¨ç‡</h3>
          <div class="tax-rates">
            <div class="rate-item">
              <span class="rate-type">æ¶ˆè´¹ç¨è¯¾ç¨äº‹ä¸šè€…ï¼š</span>
              <span class="rate-value">10%</span>
            </div>
            <div class="rate-item">
              <span class="rate-type">æ¶ˆè´¹ç¨å…ç¨äº‹ä¸šè€…ï¼š</span>
              <span class="rate-value">4%ï¼ˆå¯åŠ ç®—ã¿ãªã—ä»•å…¥ç‡ï¼‰</span>
            </div>
          </div>

          <h3>è®¡ç®—é¡ºåºç¤ºä¾‹</h3>
          <div class="calculation-example">
            <div class="example-case">
              <p><strong>æ¡ˆä¾‹ï¼š</strong>åœŸåœ°5000ä¸‡æ—¥å…ƒ + å»ºç­‘ç‰©2000ä¸‡æ—¥å…ƒï¼ˆå«ç¨ï¼‰ï¼Œä¸šè€…ä¸ºæ¶ˆè´¹ç¨è¯¾ç¨äº‹ä¸šè€…</p>
              <div class="calculation-steps">
                <div class="step">
                  <span class="step-number">1</span>
                  <span class="step-desc">åœŸåœ°ï¼š5000ä¸‡æ—¥å…ƒï¼ˆéè¯¾ç¨ï¼‰</span>
                </div>
                <div class="step">
                  <span class="step-number">2</span>
                  <span class="step-desc">å»ºç­‘ç‰©ï¼š2000ä¸‡ Ã· 1.1 = 1818ä¸‡æ—¥å…ƒï¼ˆä¸å«ç¨ï¼‰</span>
                </div>
                <div class="step">
                  <span class="step-number">3</span>
                  <span class="step-desc">åˆè®¡ï¼š5000ä¸‡ + 1818ä¸‡ = 6818ä¸‡æ—¥å…ƒ</span>
                </div>
                <div class="step">
                  <span class="step-number">4</span>
                  <span class="step-desc">åŸºå‡†é¢ï¼š6818ä¸‡ Ã— 3% + 6ä¸‡ = 210.54ä¸‡æ—¥å…ƒ</span>
                </div>
                <div class="step">
                  <span class="step-number">5</span>
                  <span class="step-desc">å«ç¨æŠ¥é…¬ï¼š210.54ä¸‡ Ã— 1.1 = 231.594ä¸‡æ—¥å…ƒ</span>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- ç»ƒä¹ é¢˜ -->
        <section id="quiz" class="quiz-section">
          <h2>â“ åˆ¤æ–­é¢˜</h2>
          
          <div 
            v-for="(quiz, index) in quizzes" 
            :key="index"
            class="quiz-item"
          >
            <div class="quiz-question">{{ quiz.question }}</div>
            <div class="quiz-options">
              <div 
                v-for="option in quiz.options" 
                :key="option.text"
                class="quiz-option"
                :class="{ 
                  'selected': selectedAnswers[index] === option.text,
                  'correct': showAnswers && option.correct,
                  'incorrect': showAnswers && selectedAnswers[index] === option.text && !option.correct
                }"
                @click="selectAnswer(index, option.text)"
              >
                {{ option.text }}
              </div>
            </div>
            <div class="quiz-actions">
              <button class="answer-btn" @click="toggleAnswer(index)">
                {{ showAnswerIndex === index ? 'éšè—ç­”æ¡ˆ' : 'æ˜¾ç¤ºç­”æ¡ˆ' }}
              </button>
            </div>
            <div 
              v-if="showAnswerIndex === index" 
              class="answer-explanation"
            >
              <strong>ç­”æ¡ˆï¼š</strong> {{ getCorrectAnswer(quiz) }}<br>
              <strong>ä¸­æ–‡è§£é‡Šï¼š</strong> {{ quiz.explanation }}
            </div>
          </div>

          <div class="quiz-footer-actions">
            <button class="btn btn-primary" @click="checkAllAnswers">
              æ£€æŸ¥å…¨éƒ¨ç­”æ¡ˆ
            </button>
            <button class="btn btn-outline" @click="resetQuiz">
              é‡æ–°ç»ƒä¹ 
            </button>
          </div>
        </section>

        <!-- åº•éƒ¨è¡ŒåŠ¨æŒ‰é’® -->
        <div class="action-buttons">
          <router-link to="/video?topic=compensation-limit" class="action-button video">
            <span>ğŸ“º</span>
            è§‚çœ‹ç›¸å…³è§†é¢‘
          </router-link>
          <router-link to="/practice?topic=compensation" class="action-button">
            <span>ğŸ“</span>
            å¼€å§‹å¼ºåŒ–ç»ƒä¹ 
          </router-link>
          <router-link to="/notes?domain=business" class="action-button">
            <span>ğŸ“š</span>
            è¿”å›å®…å»ºä¸šæ³•
          </router-link>
        </div>
      </main>
    </div>
  </div>
</template>

<script setup>
import { ref, computed, onMounted, onUnmounted } from 'vue'
import { useLearningStore } from '@/stores/learning'
import { useRouter } from 'vue-router'

const learningStore = useLearningStore()
const router = useRouter()

// ç”¨æˆ·å­¦ä¹ è¿›åº¦
const userProgress = ref(0)
const startTime = ref(new Date())

// é¡µé¢ç« èŠ‚å¯¼èˆª
const sections = [
  { id: 'key-terms', title: 'å…³é”®æœ¯è¯­', icon: 'ğŸ§‘â€âš–ï¸' },
  { id: 'basic-concepts', title: 'åŸºæœ¬æ¦‚å¿µ', icon: 'ğŸ“š' },
  { id: 'sale-calculation', title: 'ä¹°å–è®¡ç®—', icon: 'ğŸ’°' },
  { id: 'rental-limits', title: 'ç§Ÿèµé™åˆ¶', icon: 'ğŸ ' },
  { id: 'vacant-house', title: 'ç©ºå®¶ç‰¹ä¾‹', icon: 'ğŸšï¸' },
  { id: 'consumption-tax', title: 'æ¶ˆè´¹ç¨', icon: 'ğŸ§¾' },
  { id: 'quiz', title: 'ç»ƒä¹ é¢˜', icon: 'â“' }
]

// å…³é”®æœ¯è¯­æ•°æ®
const keyTerms = [
  {
    japanese: 'åª’ä»‹ï¼ˆã°ã„ã‹ã„ï¼‰',
    chinese: 'ä¸­ä»‹',
    explanation: 'å®…å»ºä¸šè€…ä½œä¸ºä¸­é—´äººä¿ƒæˆäº¤æ˜“åŒæ–¹ç­¾è®¢å¥‘çº¦',
    example: 'å–æ–¹å’Œä¹°æ–¹é€šè¿‡åŒä¸€ä¸­ä»‹å…¬å¸æˆäº¤'
  },
  {
    japanese: 'ä»£ç†ï¼ˆã ã„ã‚Šï¼‰',
    chinese: 'ä»£ç†',
    explanation: 'å®…å»ºä¸šè€…ä»¥ä¸€æ–¹å½“äº‹äººçš„åä¹‰ç­¾è®¢å¥‘çº¦',
    example: 'ä¸­ä»‹å…¬å¸ä½œä¸ºå–æ–¹çš„ä»£ç†äººä¸ä¹°æ–¹ç­¾è®¢ä¹°å–åˆåŒ'
  },
  {
    japanese: 'å ±é…¬é¡ã®åˆ¶é™ï¼ˆã»ã†ã—ã‚…ã†ãŒãã®ã›ã„ã’ã‚“ï¼‰',
    chinese: 'æŠ¥é…¬é¢çš„é™åˆ¶',
    explanation: 'æ³•å¾‹è§„å®šçš„å®…å»ºä¸šè€…å¯ä»¥æ”¶å–æŠ¥é…¬çš„ä¸Šé™é¢åº¦',
    example: '1000ä¸‡æ—¥å…ƒä¹°å–çš„åª’ä»‹æŠ¥é…¬ä¸Šé™ä¸º36ä¸‡æ—¥å…ƒ'
  },
  {
    japanese: 'æ¨©åˆ©é‡‘ï¼ˆã‘ã‚“ã‚Šãã‚“ï¼‰',
    chinese: 'æƒåˆ©é‡‘',
    explanation: 'ç§Ÿèµå¥‘çº¦ä¸­ä½œä¸ºæƒåˆ©è®¾å®šå¯¹ä»·æ”¯ä»˜ä¸”ä¸è¿”è¿˜çš„é‡‘é’±',
    example: 'å•†é“ºç§Ÿèµæ—¶æ”¯ä»˜ç»™æˆ¿ä¸œçš„å…¥é—¨é‡‘'
  },
  {
    japanese: 'ç©ºãå®¶ç­‰ï¼ˆã‚ãã‚„ã¨ã†ï¼‰',
    chinese: 'ç©ºç½®æˆ¿å±‹ç­‰',
    explanation: 'é•¿æœŸæ— äººå±…ä½ä¸”å°†æ¥ä¹Ÿæ— ä½¿ç”¨å¯èƒ½çš„å®…åœ°æˆ–å»ºç­‘ç‰©',
    example: 'é—²ç½®å¤šå¹´çš„è€æœ½ä½å®…'
  }
]

// ç»ƒä¹ é¢˜æ•°æ®
const quizzes = [
  {
    question: 'å®…åœ°å»ºç‰©å–å¼•æ¥­è€…ã¯ã€ä¾é ¼è€…ã®ä¾é ¼ã«åŸºã¥ã„ã¦åºƒå‘Šã‚’ã—ãŸå ´åˆã€å ±é…¬ã¨ã¯åˆ¥ã«ãã®åºƒå‘Šæ–™é‡‘ã‚’è«‹æ±‚ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: true },
      { text: 'âœ• (èª¤ã‚Š)', correct: false }
    ],
    explanation: 'åŸºäºå®¢æˆ·è¦æ±‚äº§ç”Ÿçš„å¹¿å‘Šå®é™…è´¹ç”¨ï¼Œå¯åœ¨æŠ¥é…¬å¤–å¦è¡Œæ”¶å–ã€‚'
  },
  {
    question: 'å±…ä½ç”¨å»ºç‰©ã®è²¸å€Ÿã®åª’ä»‹ã«ä¿‚ã‚‹å ±é…¬ã®é¡ã¯ã€æ¨©åˆ©é‡‘ã®æˆå—ãŒã‚ã‚‹å ´åˆã€å½“è©²æ¨©åˆ©é‡‘ã®é¡ã‚’å£²è²·ã«ä¿‚ã‚‹ä»£é‡‘ã®é¡ã¨ã¿ãªã—ã¦ç®—å®šã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: false },
      { text: 'âœ• (èª¤ã‚Š)', correct: true }
    ],
    explanation: 'å±…ä½ç”¨å»ºç­‘ç‰©ç§Ÿèµçš„æŠ¥é…¬è®¡ç®—ä¸èƒ½ä½¿ç”¨æƒåˆ©é‡‘è®¡ç®—æ–¹æ³•ã€‚'
  },
  {
    question: 'å®…åœ°å»ºç‰©å–å¼•æ¥­è€…ãŒå£²è²·ã®åª’ä»‹ã¨ä»£ç†ã®ä¸¡æ–¹ã®ä¾é ¼ã‚’å—ã‘ã¦ã„ã‚‹å ´åˆã€å ±é…¬ã®åˆè¨ˆé¡ã¯åŸºæº–é¡ã®4å€ã¾ã§å—é ˜ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: false },
      { text: 'âœ• (èª¤ã‚Š)', correct: true }
    ],
    explanation: 'åŒä¸€äº¤æ˜“ä¸­ï¼Œæ— è®ºåª’ä»‹è¿˜æ˜¯ä»£ç†ï¼ŒæŠ¥é…¬æ€»é¢ä¸å¾—è¶…è¿‡åŸºå‡†é¢çš„2å€ã€‚'
  },
  {
    question: 'ç©ºãå®¶ç­‰ã®å£²è²·ã«ãŠã‘ã‚‹ä½å»‰ç©ºå®¶ç‰¹ä¾‹ã¯ã€æ¶ˆè²»ç¨æŠœãã®ä»£é‡‘ãŒ800ä¸‡å††ä»¥ä¸‹ã®å®…åœ°åˆã¯å»ºç‰©ã«é©ç”¨ã•ã‚Œã‚‹ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: true },
      { text: 'âœ• (èª¤ã‚Š)', correct: false }
    ],
    explanation: 'ä½å»‰ç©ºå®¶ç‰¹ä¾‹çš„é€‚ç”¨æ¡ä»¶æ˜¯ä¸å«ç¨ä»£é‡‘800ä¸‡æ—¥å…ƒä»¥ä¸‹ã€‚'
  },
  {
    question: 'åœŸåœ°ã®å£²è²·ã«ãŠã‘ã‚‹å ±é…¬è¨ˆç®—ã§ã¯ã€æ¶ˆè²»ç¨ã‚’è€ƒæ…®ã™ã‚‹å¿…è¦ãŒãªã„ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: true },
      { text: 'âœ• (èª¤ã‚Š)', correct: false }
    ],
    explanation: 'åœŸåœ°æ˜¯éè¯¾ç¨å¯¹è±¡ï¼Œç›´æ¥ä½¿ç”¨ä¹°å–ä»·æ ¼è®¡ç®—æŠ¥é…¬å³å¯ã€‚'
  }
]

// ç­”é¢˜çŠ¶æ€
const selectedAnswers = ref(Array(quizzes.length).fill(null))
const showAnswerIndex = ref(null)
const showAnswers = ref(false)

// æ–¹æ³•
const scrollToSection = (sectionId) => {
  const element = document.getElementById(sectionId)
  if (element) {
    element.scrollIntoView({ behavior: 'smooth' })
  }
}

const selectAnswer = (index, answer) => {
  selectedAnswers.value[index] = answer
  // æ›´æ–°å­¦ä¹ è¿›åº¦
  updateProgress()
}

const toggleAnswer = (index) => {
  showAnswerIndex.value = showAnswerIndex.value === index ? null : index
}

const getCorrectAnswer = (quiz) => {
  const correctOption = quiz.options.find(option => option.correct)
  return correctOption ? correctOption.text : ''
}

const checkAllAnswers = () => {
  showAnswers.value = true
  updateProgress()
}

const resetQuiz = () => {
  selectedAnswers.value = Array(quizzes.length).fill(null)
  showAnswers.value = false
  showAnswerIndex.value = null
  userProgress.value = 0
}

const updateProgress = () => {
  const total = quizzes.length
  const correct = quizzes.reduce((count, quiz, index) => {
    const selected = selectedAnswers.value[index]
    if (!selected) return count
    
    const isCorrect = quiz.options.find(opt => opt.text === selected)?.correct || false
    return count + (isCorrect ? 1 : 0)
  }, 0)
  
  userProgress.value = Math.round((correct / total) * 100)
}

// è®°å½•å­¦ä¹ æ—¶é—´
const recordStudyTime = () => {
  const currentTime = new Date()
  const studyTime = Math.floor((currentTime - startTime.value) / 1000) // è½¬æ¢ä¸ºç§’
  learningStore.recordTopicStudyTime('compensation-limit', studyTime)
}

// æ ‡è®°çŸ¥è¯†ç‚¹å®Œæˆ
const markTopicCompleted = () => {
  learningStore.completeTopic('compensation-limit')
}

// åˆå§‹åŒ–
onMounted(() => {
  // ä»å­¦ä¹ å­˜å‚¨åŠ è½½è¿›åº¦
  const progress = learningStore.getTopicProgress('compensation-limit')
  if (progress) {
    userProgress.value = progress.completionPercentage
  }
  
  // è®°å½•ç”¨æˆ·å¼€å§‹å­¦ä¹ è¿™ä¸ªçŸ¥è¯†ç‚¹
  learningStore.recordTopicStudyTime('compensation-limit', 0)
  
  // è®¾ç½®å®šæ—¶å™¨ï¼Œæ¯30ç§’è®°å½•ä¸€æ¬¡å­¦ä¹ æ—¶é—´
  const timer = setInterval(() => {
    recordStudyTime()
  }, 30000)
  
  onUnmounted(() => {
    clearInterval(timer)
    // ç»„ä»¶å¸è½½æ—¶è®°å½•æ€»å­¦ä¹ æ—¶é—´
    recordStudyTime()
  })
})
</script>

<style scoped>
.compensation-limit-page {
  min-height: 100vh;
  background-color: #f8f9fa;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 2rem;
}

/* ========= é¡µé¢å¤´éƒ¨ ========= */
.page-header {
  background: linear-gradient(135deg, rgba(42, 121, 96, 0.05), rgba(42, 121, 96, 0.02));
  border-radius: 12px;
  padding: 2rem;
  margin: 1rem 0 2rem;
  text-align: center;
}

.breadcrumb {
  font-size: 0.875rem;
  color: #6c757d;
  margin-bottom: 1rem;
}

.breadcrumb a {
  color: #2a7960;
  text-decoration: none;
}

.breadcrumb a:hover {
  text-decoration: underline;
}

.header-content h1 {
  font-size: 2.25rem;
  font-weight: 800;
  color: #1a472a;
  margin-bottom: 1rem;
}

.header-content p {
  font-size: 1.125rem;
  color: #6c757d;
  max-width: 700px;
  margin: 0 auto 2rem;
  line-height: 1.6;
}

.header-stats {
  display: flex;
  justify-content: center;
  gap: 3rem;
  flex-wrap: wrap;
}

.stat-item {
  text-align: center;
}

.stat-number {
  display: block;
  font-size: 1.75rem;
  font-weight: 700;
  color: #2a7960;
  margin-bottom: 0.25rem;
}

.stat-label {
  font-size: 0.875rem;
  color: #6c757d;
}

/* ========= ä¸»è¦å†…å®¹åŒºåŸŸ ========= */
.main-content {
  margin: 2rem 0;
}

/* ========= å¿«é€Ÿå¯¼èˆª ========= */
.quick-nav {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  margin-bottom: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.quick-nav h3 {
  font-size: 1.25rem;
  font-weight: 600;
  color: #1a472a;
  margin-bottom: 1rem;
}

.nav-links {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 0.75rem;
}

.nav-link {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  background: #f8f9fa;
  border-radius: 8px;
  text-decoration: none;
  color: #333;
  transition: all 0.2s ease;
  border: none;
  cursor: pointer;
  font-family: inherit;
  font-size: 0.875rem;
}

.nav-link:hover {
  background: #e9ecef;
  color: #1a472a;
  transform: translateY(-2px);
}

.nav-icon {
  font-size: 1.125rem;
}

/* ========= å­¦ä¹ ç›®æ ‡ ========= */
.learning-goals {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.learning-goals h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #1a472a;
  margin-bottom: 1.5rem;
}

.learning-goals ul {
  padding-left: 1.5rem;
}

.learning-goals li {
  margin-bottom: 0.75rem;
  line-height: 1.6;
}

/* ========= å…³é”®æœ¯è¯­ ========= */
.key-terms {
  margin-bottom: 2rem;
}

.key-terms h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #1a472a;
  margin-bottom: 1.5rem;
}

.terms-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
}

.term-card {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  border-left: 4px solid #2a7960;
}

.term-japanese {
  font-weight: bold;
  color: #2a7960;
  margin-bottom: 0.5rem;
  font-size: 0.875rem;
}

.term-chinese {
  font-weight: bold;
  color: #333;
  margin-bottom: 1rem;
  font-size: 1.125rem;
}

.term-explanation {
  margin-bottom: 1rem;
  line-height: 1.6;
}

.term-example {
  background: #eef7ff;
  padding: 1rem;
  border-radius: 5px;
  font-style: italic;
  border-left: 3px solid #a8c6ff;
  font-size: 0.875rem;
  line-height: 1.5;
}

/* ========= å†…å®¹åŒºå— ========= */
.content-section {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.content-section h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #1a472a;
  margin-bottom: 1.5rem;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid #e9ecef;
}

.content-section h3 {
  font-size: 1.25rem;
  font-weight: 600;
  color: #1a472a;
  margin: 1.5rem 0 1rem;
}

.content-section p {
  line-height: 1.6;
  margin-bottom: 1rem;
}

.content-section ul, .content-section ol {
  padding-left: 1.5rem;
  margin-bottom: 1.5rem;
}

.content-section li {
  margin-bottom: 0.5rem;
  line-height: 1.6;
}

/* ========= åŸºæœ¬æ¦‚å¿µæ ·å¼ ========= */
.concept-box {
  background: #f0f7ff;
  padding: 1.5rem;
  border-radius: 8px;
  border-left: 4px solid #2a7960;
  margin: 1.5rem 0;
}

.expense-handling {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
  margin: 2rem 0;
}

.expense-item {
  display: flex;
  gap: 1rem;
  padding: 1.5rem;
  background: white;
  border-radius: 12px;
  border: 1px solid #e9ecef;
}

.expense-icon {
  font-size: 2rem;
  flex-shrink: 0;
}

.expense-content h4 {
  margin: 0 0 1rem 0;
  color: #1a472a;
}

.expense-content ul {
  padding-left: 1.25rem;
  margin: 0;
}

.expense-content li {
  margin-bottom: 0.5rem;
  line-height: 1.6;
}

.expense-content li.important {
  color: #dc3545;
  font-weight: bold;
}

/* ========= è¡¨æ ¼æ ·å¼ ========= */
.table-container {
  overflow-x: auto;
  margin: 1.5rem 0;
}

.calculation-table {
  width: 100%;
  border-collapse: collapse;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  border-radius: 8px;
  overflow: hidden;
}

.calculation-table th, .calculation-table td {
  border: 1px solid #e9ecef;
  padding: 12px;
  text-align: left;
}

.calculation-table th {
  background-color: #2a7960;
  color: white;
  font-weight: 600;
  text-align: center;
}

.calculation-table tr:nth-child(even) {
  background-color: #f8f9fa;
}

.calculation-table tr:hover {
  background-color: #e9ecef;
}

/* ========= å¥‘çº¦ç±»å‹æ ·å¼ ========= */
.contract-types {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
  margin: 2rem 0;
}

.contract-type {
  padding: 1.5rem;
  background: white;
  border-radius: 12px;
  border: 1px solid #e9ecef;
}

.contract-type h4 {
  margin: 0 0 1rem 0;
  color: #1a472a;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.contract-details {
  margin: 0;
}

.detail-item {
  display: flex;
  justify-content: space-between;
  margin-bottom: 0.75rem;
  padding-bottom: 0.75rem;
  border-bottom: 1px solid #f0f0f0;
}

.detail-label {
  font-weight: 500;
}

.detail-value {
  color: #2a7960;
  font-weight: 600;
}

.example {
  margin-top: 1rem;
  padding: 1rem;
  background: #f8f9fa;
  border-radius: 8px;
  font-size: 0.875rem;
  line-height: 1.5;
}

/* ========= å¤æ•°ä¸šè€…æ ·å¼ ========= */
.multiple-agents {
  margin: 2rem 0;
}

.notice-box {
  background: #fff9e6;
  border: 1px solid #ffcc00;
  border-radius: 12px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
}

.notice-box.important {
  background: #ffe7e7;
  border-color: #dc3545;
}

.agent-scenario {
  padding: 1.5rem;
  background: white;
  border-radius: 12px;
  border: 1px solid #e9ecef;
}

.scenario-diagram {
  margin: 1.5rem 0;
  padding: 1.5rem;
  background: #f8f9fa;
  border-radius: 8px;
}

.parties {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.party, .agent, .transaction {
  padding: 0.75rem 1rem;
  background: white;
  border-radius: 5px;
  border: 1px solid #e9ecef;
  font-weight: 500;
}

.agent {
  background: #e7f7e7;
  border-color: #28a745;
}

.arrow {
  color: #2a7960;
  font-weight: bold;
}

.scenario-calculation {
  margin-top: 1.5rem;
  padding: 1.5rem;
  background: #f0f7ff;
  border-radius: 8px;
}

.scenario-calculation ul {
  padding-left: 1.5rem;
  margin: 1rem 0 0 0;
}

.scenario-calculation li {
  margin-bottom: 0.5rem;
  line-height: 1.6;
}

/* ========= ç§Ÿèµæ¯”è¾ƒæ ·å¼ ========= */
.rental-comparison {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
  margin: 2rem 0;
}

.rental-type {
  padding: 1.5rem;
  background: white;
  border-radius: 12px;
  border: 1px solid #e9ecef;
}

.rental-type h4 {
  margin: 0 0 1rem 0;
  color: #1a472a;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.rental-details {
  margin: 0;
}

.detail-group {
  margin-bottom: 1.5rem;
}

.detail-group h5 {
  margin: 0 0 0.75rem 0;
  color: #333;
  font-size: 1rem;
}

.detail-group ul {
  padding-left: 1.25rem;
  margin: 0;
}

.detail-group li {
  margin-bottom: 0.5rem;
  line-height: 1.6;
}

.detail-group.important {
  background: #fff9e6;
  padding: 1rem;
  border-radius: 8px;
  border-left: 3px solid #ffcc00;
}

/* ========= æƒåˆ©é‡‘ç¤ºä¾‹æ ·å¼ ========= */
.rights-fee-example {
  margin: 2rem 0;
}

.example-scenario {
  padding: 1.5rem;
  background: white;
  border-radius: 12px;
  border: 1px solid #e9ecef;
}

.calculation-steps {
  margin-top: 1rem;
}

.step {
  display: flex;
  justify-content: space-between;
  margin-bottom: 0.75rem;
  padding: 0.75rem;
  background: #f8f9fa;
  border-radius: 5px;
}

.step.result {
  background: #e7f7e7;
  font-weight: bold;
}

.step-label {
  font-weight: 500;
}

.step-value {
  color: #2a7960;
  font-weight: 600;
}

/* ========= ç‰¹ä¾‹æ ·å¼ ========= */
.special-exception {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
  margin: 2rem 0;
}

.exception-type {
  padding: 1.5rem;
  background: white;
  border-radius: 12px;
  border: 1px solid #e9ecef;
}

.exception-type h4 {
  margin: 0 0 1rem 0;
  color: #1a472a;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.exception-conditions, .exception-limits {
  margin-bottom: 1.5rem;
}

.exception-conditions h5, .exception-limits h5 {
  margin: 0 0 0.75rem 0;
  color: #333;
  font-size: 1rem;
}

.exception-conditions ul, .exception-limits ul {
  padding-left: 1.25rem;
  margin: 0;
}

.exception-conditions li, .exception-limits li {
  margin-bottom: 0.5rem;
  line-height: 1.6;
}

.exam-hint {
  padding: 1.5rem;
  background: #e7f7e7;
  border-radius: 12px;
  border: 1px solid #28a745;
}

.exam-hint h4 {
  margin: 0 0 1rem 0;
  color: #2e7d32;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.exam-hint p {
  margin: 0;
  line-height: 1.6;
}

/* ========= æ¶ˆè´¹ç¨æ ·å¼ ========= */
.tax-differences {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
  margin: 2rem 0;
}

.tax-type {
  padding: 1.5rem;
  background: white;
  border-radius: 12px;
  border: 1px solid #e9ecef;
  text-align: center;
}

.tax-type h4 {
  margin: 0 0 1rem 0;
  color: #1a472a;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  justify-content: center;
}

.tax-type ul {
  padding-left: 1.25rem;
  margin: 0;
  text-align: left;
}

.tax-type li {
  margin-bottom: 0.5rem;
  line-height: 1.6;
}

.tax-rates {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
  margin: 2rem 0;
}

.rate-item {
  display: flex;
  justify-content: space-between;
  padding: 1rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.rate-type {
  font-weight: 500;
}

.rate-value {
  color: #2a7960;
  font-weight: 600;
}

.calculation-example {
  margin: 2rem 0;
}

.example-case {
  padding: 1.5rem;
  background: white;
  border-radius: 12px;
  border: 1px solid #e9ecef;
}

.calculation-steps {
  margin-top: 1.5rem;
}

.step-number {
  display: inline-block;
  width: 24px;
  height: 24px;
  background: #2a7960;
  color: white;
  border-radius: 50%;
  text-align: center;
  line-height: 24px;
  margin-right: 1rem;
  font-size: 0.75rem;
  font-weight: bold;
}

.step-desc {
  font-size: 0.875rem;
}

/* ========= ç»ƒä¹ é¢˜æ ·å¼ ========= */
.quiz-section {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.quiz-section h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #1a472a;
  margin-bottom: 1.5rem;
}

.quiz-item {
  background: #f9f9f9;
  border-radius: 12px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
}

.quiz-question {
  font-weight: bold;
  margin-bottom: 1.25rem;
  font-size: 1.1rem;
  line-height: 1.5;
}

.quiz-options {
  display: flex;
  gap: 1rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
}

.quiz-option {
  display: flex;
  align-items: center;
  cursor: pointer;
  padding: 0.75rem 1rem;
  border: 2px solid #ddd;
  border-radius: 5px;
  transition: all 0.3s ease;
  background: white;
  min-width: 120px;
  justify-content: center;
}

.quiz-option:hover {
  background: #f0f0f0;
}

.quiz-option.selected {
  border-color: #2a7960;
  background: #e9f7f0;
}

.quiz-option.correct {
  border-color: #28a745;
  background: #e7f7e7;
  color: #2e7d32;
}

.quiz-option.incorrect {
  border-color: #dc3545;
  background: #ffe7e7;
  color: #c62828;
}

.quiz-actions {
  margin-bottom: 1rem;
}

.answer-btn {
  background: #2a7960;
  color: white;
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 5px;
  cursor: pointer;
  transition: background 0.3s ease;
  margin-right: 0.5rem;
  font-size: 0.875rem;
}

.answer-btn:hover {
  background: #1a472a;
}

.answer-explanation {
  margin-top: 1rem;
  padding: 1rem;
  background: #f5f5f5;
  border-radius: 5px;
  line-height: 1.6;
}

.quiz-footer-actions {
  display: flex;
  gap: 1rem;
  justify-content: center;
  margin-top: 2rem;
  flex-wrap: wrap;
}

/* ========= æŒ‰é’®æ ·å¼ ========= */
.btn {
  padding: 0.75rem 1.5rem;
  border-radius: 8px;
  font-size: 0.875rem;
  font-weight: 600;
  text-align: center;
  text-decoration: none;
  transition: all 0.3s ease;
  border: none;
  cursor: pointer;
  font-family: inherit;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
}

.btn-primary {
  background: #2a7960;
  color: white;
}

.btn-primary:hover {
  background: #1a472a;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(42, 121, 96, 0.3);
}

.btn-outline {
  background: transparent;
  color: #2a7960;
  border: 1px solid #2a7960;
}

.btn-outline:hover {
  background: #e9f7f0;
  transform: translateY(-2px);
}

/* ========= åº•éƒ¨è¡ŒåŠ¨æŒ‰é’® ========= */
.action-buttons {
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin-top: 3rem;
  padding-top: 2rem;
  border-top: 1px solid #e9ecef;
  flex-wrap: wrap;
}

.action-button {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  background: linear-gradient(135deg, #2a7960, #1a472a);
  color: white;
  text-decoration: none;
  border-radius: 12px;
  font-weight: 600;
  transition: all 0.3s ease;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.action-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
}

.action-button.video {
  background: linear-gradient(135deg, #2a7960, #205e4a);
}

/* ========= å“åº”å¼è®¾è®¡ ========= */
@media (max-width: 768px) {
  .container {
    padding: 0 1rem;
  }
  
  .page-header {
    padding: 1.5rem 1rem;
  }
  
  .header-content h1 {
    font-size: 1.75rem;
  }
  
  .header-stats {
    gap: 1.5rem;
  }
  
  .stat-number {
    font-size: 1.5rem;
  }
  
  .nav-links {
    grid-template-columns: 1fr;
  }
  
  .terms-grid {
    grid-template-columns: 1fr;
  }
  
  .expense-handling {
    grid-template-columns: 1fr;
  }
  
  .contract-types {
    grid-template-columns: 1fr;
  }
  
  .rental-comparison {
    grid-template-columns: 1fr;
  }
  
  .special-exception {
    grid-template-columns: 1fr;
  }
  
  .tax-differences {
    grid-template-columns: 1fr;
  }
  
  .tax-rates {
    grid-template-columns: 1fr;
  }
  
  .quiz-options {
    flex-direction: column;
  }
  
  .quiz-option {
    min-width: auto;
  }
  
  .action-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .action-button {
    width: 100%;
    max-width: 300px;
    justify-content: center;
  }
  
  .content-section, 
  .learning-goals, 
  .quiz-section, 
  .quick-nav {
    padding: 1.5rem;
  }
}

@media (max-width: 480px) {
  .header-stats {
    flex-direction: column;
    gap: 1rem;
  }
  
  .parties {
    flex-direction: column;
    align-items: center;
  }
  
  .quiz-footer-actions {
    flex-direction: column;
  }
  
  .btn {
    width: 100%;
    justify-content: center;
  }
  
  .detail-item {
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .step {
    flex-direction: column;
    gap: 0.5rem;
  }
}
</style>
<!-- src/views/notes/yefa/BusinessMeaning.vue -->
<template>
  <div class="business-meaning">
    <!-- é¡µé¢å¤´éƒ¨ -->
    <div class="page-header">
      <div class="header-content">
        <div class="breadcrumb">
          <router-link to="/notes">ä¸­æ–‡ç¬”è®°</router-link> &gt; 
          <router-link to="/notes?domain=business">å®…å»ºä¸šæ³•</router-link> &gt; 
          <span>å®…å»ºä¸šçš„å«ä¹‰</span>
        </div>
        <h1>å®…å»ºä¸šçš„å«ä¹‰</h1>
        <p>å®…å»ºå£«è€ƒè¯•åŸºç¡€çŸ¥è¯†ç‚¹ï¼Œç†è§£å®…å»ºä¸šå®šä¹‰å’Œå…è®¸åˆ¶åº¦çš„å…¥é—¨ç« èŠ‚</p>
        
        <!-- å­¦ä¹ ç»Ÿè®¡ -->
        <div class="header-stats">
          <div class="stat-item">
            <span class="stat-number">15</span>
            <span class="stat-label">æ ¸å¿ƒè¦ç‚¹</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">30åˆ†é’Ÿ</span>
            <span class="stat-label">å»ºè®®å­¦ä¹ æ—¶é—´</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">3</span>
            <span class="stat-label">ç»ƒä¹ é¢˜</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">{{ userProgress }}%</span>
            <span class="stat-label">æŒæ¡è¿›åº¦</span>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
      <main class="main-content">
        <!-- å¿«é€Ÿå¯¼èˆª -->
        <div class="quick-nav">
          <h3>æœ¬é¡µå¯¼èˆª</h3>
          <div class="nav-links">
            <a 
              v-for="section in sections" 
              :key="section.id"
              :href="`#${section.id}`"
              class="nav-link"
              @click.prevent="scrollToSection(section.id)"
            >
              <span class="nav-icon">{{ section.icon }}</span>
              {{ section.title }}
            </a>
          </div>
        </div>

        <!-- å­¦ä¹ ç›®æ ‡ -->
        <section class="learning-goals">
          <h2>ğŸ“š å­¦ä¹ ç›®æ ‡</h2>
          <ul>
            <li>ç†è§£å®…å»ºä¸šæ³•çš„ç«‹æ³•ç›®çš„å’Œæ¶ˆè´¹è€…ä¿æŠ¤ç†å¿µ</li>
            <li>æŒæ¡å®…å»ºä¸šçš„å››å¤§åˆ¤æ–­è¦ç´ </li>
            <li>èƒ½å¤ŸåŒºåˆ†éœ€è¦å…è®¸å’Œä¸éœ€è¦å…è®¸çš„æƒ…å†µ</li>
            <li>ç†Ÿæ‚‰è¿‘å¹´æ³•æ”¹æ­£å¯¹å®åŠ¡æ“ä½œçš„å½±å“</li>
            <li>äº†è§£å…è®¸ä¸éœ€è¦çš„ç‰¹æ®Šæƒ…å†µ</li>
          </ul>
        </section>

        <!-- å…³é”®æœ¯è¯­ -->
        <section id="key-terms" class="key-terms">
          <h2>ğŸ§‘â€âš–ï¸ å…³é”®æœ¯è¯­</h2>
          <div class="terms-grid">
            <div 
              v-for="term in keyTerms" 
              :key="term.japanese"
              class="term-card"
            >
              <div class="term-japanese">{{ term.japanese }}</div>
              <div class="term-chinese">{{ term.chinese }}</div>
              <div class="term-explanation">{{ term.explanation }}</div>
              <div class="term-example">{{ term.example }}</div>
            </div>
          </div>
        </section>

        <!-- å®…å»ºä¸šæ³•æ¦‚è¿° -->
        <section id="basic-concepts" class="content-section">
          <h2>1. å®…å»ºä¸šæ³•æ¦‚è¿°</h2>
          <p><strong>å®…å»ºä¸šæ³•</strong>æ˜¯æ—¥æœ¬è§„èŒƒä¸åŠ¨äº§äº¤æ˜“çš„æ ¸å¿ƒæ³•å¾‹ï¼Œæ—¨åœ¨ä¿æŠ¤æ¶ˆè´¹è€…æƒç›Šï¼Œç¡®ä¿äº¤æ˜“å…¬æ­£é€æ˜ã€‚</p>
          
          <div class="case-scenario">
            <strong>å®åŠ¡èƒŒæ™¯ï¼š</strong>
            ä¸åŠ¨äº§äº¤æ˜“æ¶‰åŠå·¨é¢èµ„é‡‘ä¸”ä¿¡æ¯å¤æ‚ï¼Œæ™®é€šæ¶ˆè´¹è€…åœ¨ä¸“ä¸šçŸ¥è¯†ä¸Šå¤„äºå¼±åŠ¿ã€‚å®…å»ºä¸šæ³•é€šè¿‡è®¾ç«‹ä¸“é—¨è§„åˆ™ï¼Œé˜²æ­¢æ¬ºè¯ˆã€è™šå‡å®£ä¼ ç­‰ä¸å½“è¡Œä¸ºï¼Œä¿éšœäº¤æ˜“å®‰å…¨ã€‚
          </div>
          
          <div class="highlight-box">
            <strong>ç«‹æ³•ç›®çš„ï¼š</strong>
            <ul>
              <li><strong>ä¿æŠ¤æ¶ˆè´¹è€…</strong>ï¼šå¼¥è¡¥æ¶ˆè´¹è€…ä¸“ä¸šçŸ¥è¯†ä¸è¶³</li>
              <li><strong>ç¡®ä¿äº¤æ˜“å®‰å…¨</strong>ï¼šé˜²æ­¢é‡å¤§è¯¯è§£å’Œäº¤æ˜“é£é™©</li>
              <li><strong>è§„èŒƒå¸‚åœºç§©åº</strong>ï¼šå»ºç«‹è¯šä¿¡çš„ä¸åŠ¨äº§äº¤æ˜“ä½“ç³»</li>
            </ul>
          </div>
        </section>

        <!-- å®…å»ºä¸šçš„å››å¤§è¦ç´  -->
        <section id="four-elements" class="content-section">
          <h2>2. å®…å»ºä¸šçš„å››å¤§åˆ¤æ–­è¦ç´ </h2>
          <p>åˆ¤æ–­ä¸€ä¸ªè¡Œä¸ºæ˜¯å¦å±äºå®…å»ºä¸šï¼Œéœ€è¦åŒæ—¶æ»¡è¶³ä»¥ä¸‹å››ä¸ªæ¡ä»¶ï¼š</p>

          <div class="elements-diagram">
            <div class="element-item">
              <div class="element-number">â‘ </div>
              <div class="element-content">
                <h3>å®…åœ°æˆ–å»ºç‰©</h3>
                <p>æ¶‰åŠå®…åœ°æˆ–å»ºç­‘ç‰©çš„äº¤æ˜“</p>
              </div>
            </div>
            <div class="element-connector">+</div>
            <div class="element-item">
              <div class="element-number">â‘¡</div>
              <div class="element-content">
                <h3>å–å¼•è¡Œä¸º</h3>
                <p>å±äºæ³•å®šçš„äº¤æ˜“è¡Œä¸º</p>
              </div>
            </div>
            <div class="element-connector">+</div>
            <div class="element-item">
              <div class="element-number">â‘¢</div>
              <div class="element-content">
                <h3>ä¸šåŠ¡æ€§è´¨</h3>
                <p>å…·æœ‰åå¤æŒç»­çš„ç‰¹å¾</p>
              </div>
            </div>
            <div class="element-connector">=</div>
            <div class="element-result">
              <div class="result-text">éœ€è¦å…è®¸</div>
            </div>
          </div>

          <div class="highlight-box">
            <strong>è®°å¿†å£è¯€ï¼š</strong>
            "æœ‰åœ°æœ‰æˆ¿ + åœ¨åšäº¤æ˜“ + åå¤æŒç»­ = éœ€è¦æ‰§ç…§"
          </div>
        </section>

        <!-- è¦ç´ ä¸€ï¼šå®…åœ° -->
        <section id="element-land" class="content-section">
          <h2>3. è¦ç´ ä¸€ï¼šå®…åœ°ï¼ˆ3ç§æƒ…å½¢ï¼‰</h2>
          
          <div class="table-container">
            <table class="comparison-table">
              <thead>
                <tr>
                  <th>ç±»å‹</th>
                  <th>å…·ä½“å†…å®¹</th>
                  <th>å…¸å‹æ¡ˆä¾‹</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><strong>ç°æœ‰å»ºç­‘ç‰©åœŸåœ°</strong></td>
                  <td>ç°åœ¨æœ‰å»ºç­‘ç‰©å»ºåœ¨ä¸Šé¢çš„åœŸåœ°</td>
                  <td>å¸¦æˆ¿å±‹çš„åœŸåœ°ã€å…¬å¯“ç”¨åœ°</td>
                </tr>
                <tr>
                  <td><strong>å»ºè®¾ç›®çš„åœŸåœ°</strong></td>
                  <td>ä»¥å»ºé€ å»ºç­‘ç‰©ä¸ºç›®çš„è¿›è¡Œäº¤æ˜“çš„åœŸåœ°</td>
                  <td>ç©ºåœ°ä½†è®¡åˆ’å»ºä½å®…å‡ºå”®</td>
                </tr>
                <tr>
                  <td><strong>ç”¨é€”åœ°åŸŸå†…åœŸåœ°</strong></td>
                  <td>åŸå¸‚è§„åˆ’ä¸­ç”¨é€”åŒºåŸŸå†…çš„åœŸåœ°</td>
                  <td>å¸‚è¡—åŒ–åŒºåŸŸå†…çš„åœŸåœ°</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="case-scenario">
            <strong>ç‰¹åˆ«æ³¨æ„ï¼š</strong>
            <ul>
              <li>ä¸ç™»è®°ç°¿ä¸Šçš„"åœ°ç›®"æ— å…³ï¼ˆå³ä½¿ç™»è®°ä¸º"å±±æ—"ï¼Œå®é™…ç”¨ä½œå®…åœ°å°±æŒ‰å®…åœ°å¤„ç†ï¼‰</li>
              <li>ç”¨é€”åœ°åŸŸå†…çš„<strong>å…¬å›­ã€é“è·¯ã€æ²³å·ç­‰å…¬å…±è®¾æ–½ç”¨åœ°é™¤å¤–</strong></li>
              <li>ç”¨é€”åœ°åŸŸå¤–çš„åŸé‡ï¼Œå¦‚ä½œä¸ºåŸé‡äº¤æ˜“ï¼Œä¸å±äºå®…åœ°</li>
            </ul>
          </div>
        </section>

        <!-- è¦ç´ äºŒï¼šå»ºç‰© -->
        <section id="element-building" class="content-section">
          <h2>4. è¦ç´ äºŒï¼šå»ºç‰©</h2>
          
          <h3>åŸºæœ¬å®šä¹‰</h3>
          <p>æœ‰å±‹é¡¶ã€æŸ±å­ã€å¢™å£çš„å»ºç­‘ç‰©</p>
          
          <h3>åŒ…å«èŒƒå›´</h3>
          <ul>
            <li><strong>æ•´æ ‹å»ºç­‘ç‰©</strong>ï¼šç‹¬æ ‹ä½å®…ã€å…¬å¯“ã€ä»“åº“ã€å•†ä¸šå¤§æ¥¼</li>
            <li><strong>å»ºç­‘ç‰©çš„ä¸€éƒ¨åˆ†</strong>ï¼šå…¬å¯“çš„ä¸€ä¸ªæˆ¿é—´ã€åŠå…¬å®¤çš„ä¸€é—´</li>
          </ul>

          <div class="highlight-box">
            <strong>è®°å¿†æŠ€å·§ï¼š</strong>
            ç¬¦åˆ"å®¶å¾’å››å£"çš„åŸºæœ¬ç‰¹å¾â€”â€”æœ‰å¢™ã€æœ‰æŸ±ã€æœ‰é¡¶ã€‚ä¸´æ—¶æ­å»ºçš„å¸ç¯·æ˜æ˜¾ä¸å±äºå»ºç‰©ã€‚
          </div>
        </section>

        <!-- è¦ç´ ä¸‰ï¼šå–å¼• -->
        <section id="element-transaction" class="content-section">
          <h2>5. è¦ç´ ä¸‰ï¼šå–å¼•ï¼ˆ8ç§è¡Œä¸ºï¼‰</h2>
          
          <div class="table-container">
            <table class="comparison-table">
              <thead>
                <tr>
                  <th>è¡Œä¸ºç±»å‹</th>
                  <th>è‡ªå·±ä½œä¸ºå½“äº‹äºº</th>
                  <th>ä»£ç†ä»–äºº</th>
                  <th>åª’ä»‹(å±…é—´)</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><strong>ä¹°å–</strong></td>
                  <td class="required">å±äºå–å¼•</td>
                  <td class="required">å±äºå–å¼•</td>
                  <td class="required">å±äºå–å¼•</td>
                </tr>
                <tr>
                  <td><strong>äº¤æ¢</strong></td>
                  <td class="required">å±äºå–å¼•</td>
                  <td class="required">å±äºå–å¼•</td>
                  <td class="required">å±äºå–å¼•</td>
                </tr>
                <tr>
                  <td><strong>è´·å€Ÿ(ç§Ÿèµ)</strong></td>
                  <td class="not-required">ä¸å±äºå–å¼•</td>
                  <td class="required">å±äºå–å¼•</td>
                  <td class="required">å±äºå–å¼•</td>
                </tr>
              </tbody>
            </table>
          </div>

          <h3>é‡è¦åŒºåˆ«</h3>
          <ul>
            <li><strong>è‡ªã‚‰è²¸å€Ÿ</strong>ï¼šè‡ªå·±ä½œä¸ºæˆ¿ä¸œå‡ºç§Ÿæˆ¿äº§ â†’ <strong class="not-required">ä¸å±äºå–å¼•</strong></li>
            <li><strong>ä»£ç†è²¸å€Ÿ</strong>ï¼šä»£ç†æˆ¿ä¸œå‡ºç§Ÿæˆ¿äº§ â†’ <strong class="required">å±äºå–å¼•</strong></li>
            <li><strong>åª’ä»‹è²¸å€Ÿ</strong>ï¼šä¸ºç§Ÿå®¢å’Œæˆ¿ä¸œç‰µçº¿ â†’ <strong class="required">å±äºå–å¼•</strong></li>
          </ul>

          <div class="case-scenario">
            <strong>å®åŠ¡æ¡ˆä¾‹ï¼š</strong>
            å®…å»ºä¸šè€…Aå…¬å¸ï¼Œè‡ªå·±æ‹¥æœ‰ä¸€å¥—æˆ¿å­ï¼ŒAå…¬å¸è‡ªå·±ä½œä¸ºæˆ¿ä¸œæŠŠè¿™å¥—æˆ¿å­ç§Ÿäº†å‡ºå»ã€‚é—®ï¼šè¿™ä¸ªè¡Œä¸ºå±äºå–å¼•å—ï¼Ÿéœ€è¦è®°è½½åˆ°è´¦ç°¿é‡Œå—ï¼Ÿ<br>
            <strong>ç­”æ¡ˆï¼š</strong>å±äº<strong>è‡ªã‚‰è²¸å€Ÿ</strong>ï¼Œä¸å±äºå–å¼•ï¼Œæ²¡æœ‰è®°è½½ä¹‰åŠ¡ã€‚
          </div>
        </section>

        <!-- è¦ç´ å››ï¼šä¸š -->
        <section id="element-business" class="content-section">
          <h2>6. è¦ç´ å››ï¼šä¸šï¼ˆä¸šåŠ¡æ€§è´¨ï¼‰</h2>
          
          <h3>ä¸¤ä¸ªæ ¸å¿ƒç‰¹å¾</h3>
          <ol>
            <li><strong>ä¸ç‰¹å®šå¤šæ•°</strong>ï¼šäº¤æ˜“å¯¹è±¡ä¸å›ºå®šã€ä¸é™å®š</li>
            <li><strong>åå¾©ç¶™ç¶š</strong>ï¼šè¡Œä¸ºå…·æœ‰é‡å¤æ€§ã€æŒç»­æ€§</li>
  </ol>

          <h3>åˆ¤æ–­å®ä¾‹</h3>
          <div class="table-container">
            <table class="comparison-table">
              <thead>
                <tr>
                  <th>æ¡ˆä¾‹</th>
                  <th>æ˜¯å¦å±äº"ä¸š"</th>
                  <th>åˆ¤æ–­ç†ç”±</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>å°†åœŸåœ°åˆ†æˆ10å—ï¼Œåˆ†åˆ«å–ç»™å¤šä¸ªæœ‹å‹</td>
                  <td class="required">å±äº</td>
                  <td>äº¤æ˜“å¯¹è±¡ä¸ºæœ‹å‹çš„æœ‹å‹ï¼Œæ»¡è¶³ä¸ç‰¹å®šå¤šæ•°ï¼›åˆ†å—å‡ºå”®æ»¡è¶³åå¤æŒç»­</td>
                </tr>
                <tr>
                  <td>ä¸€æ¬¡æ€§å‡ºå”®å”¯ä¸€çš„è‡ªä½æˆ¿äº§</td>
                  <td class="not-required">ä¸å±äº</td>
                  <td>ä¸€æ¬¡æ€§äº¤æ˜“ï¼Œä¸å…·å¤‡åå¤æŒç»­æ€§</td>
                </tr>
                <tr>
                  <td>å°†10å¥—æˆ¿å­åˆ†10æ¬¡å–ï¼Œä½†åªå–ç»™å…¬å¸åŒäº‹</td>
                  <td class="not-required">ä¸å±äº</td>
                  <td>è™½ç„¶äº¤æ˜“åå¤æŒç»­ï¼Œä½†äº¤æ˜“å¯¹è±¡ç‰¹å®š</td>
                </tr>
                <tr>
                  <td>ä»£ç†ä»–äººåå¤ä¹°å–åœŸåœ°</td>
                  <td class="required">å±äº</td>
                  <td>ä»£ç†äººå’Œæœ¬äººéƒ½éœ€è¦å…è®¸ï¼ˆä»£ç†äººè¡Œä¸ºæ•ˆæœå½’å±äºæœ¬äººï¼‰</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>

        <!-- å…è®¸ä¸éœ€è¦çš„æƒ…å†µ -->
        <section id="exemptions" class="content-section">
          <h2>7. å…è®¸ä¸éœ€è¦çš„ç‰¹æ®Šæƒ…å†µ</h2>
          
          <h3>å›½ãƒ»åœ°æ–¹å…¬å…±å›£ä½“</h3>
          <ul>
            <li><strong>å®Œå…¨è±å…</strong>ï¼šå…è®¸ä¸éœ€è¦ï¼Œä¸”å®…å»ºä¸šæ³•è§„åˆ™åŸºæœ¬ä¸é€‚ç”¨</li>
            <li><strong>ä¾‹å­</strong>ï¼šå¿æ”¿åºœå‡ºå”®å…¬æœ‰åœŸåœ°</li>
          </ul>
          
          <h3>ä¿¡è¨—ä¼šç¤¾ãƒ»ä¿¡è¨—éŠ€è¡Œ</h3>
          <ul>
            <li><strong>éƒ¨åˆ†è±å…</strong>ï¼šå…è®¸ä¸éœ€è¦ï¼Œä½†<strong>å…¶ä»–å®…å»ºä¸šæ³•è§„åˆ™ä»éœ€éµå®ˆ</strong></li>
            <li><strong>éœ€è¦</strong>ï¼šå‘å›½åœŸäº¤é€šå¤§è‡£è¿›è¡Œå±Šå‡ºï¼ˆå¤‡æ¡ˆï¼‰</li>
          </ul>

          <div class="highlight-box">
            <strong>é‡è¦åŒºåˆ«ï¼š</strong>
            <ul>
              <li><strong>å›½ãƒ»åœ°æ–¹å…¬å…±å›£ä½“</strong>ï¼šå®Œå…¨ä¸éœ€è¦éµå®ˆå®…å»ºä¸šæ³•</li>
              <li><strong>ä¿¡è¨—ä¼šç¤¾ãƒ»ä¿¡è¨—éŠ€è¡Œ</strong>ï¼šåªæ˜¯å…è®¸ä¸éœ€è¦ï¼Œå…¶ä»–è§„åˆ™éƒ½è¦éµå®ˆ</li>
            </ul>
          </div>
        </section>

        <!-- è¿‘å¹´æ³•æ”¹æ­£ -->
        <section id="legal-updates" class="content-section">
          <h2>8. è¿‘å¹´æ³•æ”¹æ­£è¦ç‚¹</h2>
          
          <h3>2022å¹´æ•°å­—åŒ–æ”¹é©</h3>
          <ul>
            <li>é‡è¦äº‹é¡¹è¯´æ˜ä¹¦å¯ç”µå­äº¤ä»˜</li>
            <li>å¥‘çº¦ä¹¦ç›–ç« éå¼ºåˆ¶</li>
          </ul>
          
          <h3>2024-2025å¹´å®åŠ¡ç®€åŒ–</h3>
          <ul>
            <li>å›½åœŸäº¤é€šå¤§è‡£è®¸å¯ç”³è¯·æµç¨‹ç®€åŒ–</li>
            <li>ä»ä¸šè€…åç°¿è®°è½½é¡¹ç›®ç®€åŒ–</li>
            <li>å®…å»ºä¸šè€…åç°¿è®°è½½é¡¹ç›®ç®€åŒ–</li>
          </ul>

          <div class="case-scenario">
            <strong>å®åŠ¡å½±å“ï¼š</strong>
            è¿™äº›æ”¹é©ä½“ç°äº†å®…å»ºä¸šç®¡ç†çš„ç°ä»£åŒ–è¶‹åŠ¿ï¼Œç®€åŒ–äº†è¡Œæ”¿æ‰‹ç»­ï¼Œé€‚åº”äº†æ•°å­—åŒ–äº¤æ˜“çš„éœ€æ±‚ã€‚
          </div>
        </section>

        <!-- ç»ƒä¹ é¢˜ -->
        <section id="quiz" class="quiz-section">
          <h2>â“ åˆ¤æ–­é¢˜</h2>
          
          <div 
            v-for="(quiz, index) in quizzes" 
            :key="index"
            class="quiz-item"
          >
            <div class="quiz-question">{{ quiz.question }}</div>
            <div class="quiz-options">
              <div 
                v-for="option in quiz.options" 
                :key="option.text"
                class="quiz-option"
                :class="{ 
                  'selected': selectedAnswers[index] === option.text,
                  'correct': showAnswers && option.correct,
                  'incorrect': showAnswers && selectedAnswers[index] === option.text && !option.correct
                }"
                @click="selectAnswer(index, option.text)"
              >
                {{ option.text }}
              </div>
            </div>
            <button class="answer-btn" @click="toggleAnswer(index)">
              {{ showAnswerIndex === index ? 'éšè—ç­”æ¡ˆ' : 'æ˜¾ç¤ºç­”æ¡ˆ' }}
            </button>
            <div 
              v-if="showAnswerIndex === index" 
              class="answer-explanation"
            >
              <strong>ç­”æ¡ˆï¼š</strong> {{ getCorrectAnswer(quiz) }}<br>
              <strong>ä¸­æ–‡è§£é‡Šï¼š</strong> {{ quiz.explanation }}
            </div>
          </div>

          <div class="quiz-actions">
            <button class="btn btn-primary" @click="checkAllAnswers">
              æ£€æŸ¥å…¨éƒ¨ç­”æ¡ˆ
            </button>
            <button class="btn btn-outline" @click="resetQuiz">
              é‡æ–°ç»ƒä¹ 
            </button>
          </div>
        </section>

        <!-- åº•éƒ¨è¡ŒåŠ¨æŒ‰é’® -->
        <div class="action-buttons">
          <router-link to="/video?topic=business-meaning" class="action-button video">
            <span>ğŸ“º</span>
            è§‚çœ‹ç›¸å…³è§†é¢‘
          </router-link>
          <router-link to="/practice?topic=business-meaning" class="action-button">
            <span>ğŸ“</span>
            å¼€å§‹å¼ºåŒ–ç»ƒä¹ 
          </router-link>
          <router-link to="/notes?domain=business" class="action-button">
            <span>ğŸ“š</span>
            è¿”å›å®…å»ºä¸šæ³•
          </router-link>
        </div>
      </main>
    </div>
  </div>
</template>

<script setup>
import { ref, computed, onMounted, onUnmounted } from 'vue'
import { useLearningStore } from '@/stores/learning'
import { useRouter } from 'vue-router'

const learningStore = useLearningStore()
const router = useRouter()

// ç”¨æˆ·å­¦ä¹ è¿›åº¦
const userProgress = ref(0)
const startTime = ref(new Date())

// é¡µé¢ç« èŠ‚å¯¼èˆª
const sections = [
  { id: 'key-terms', title: 'å…³é”®æœ¯è¯­', icon: 'ğŸ§‘â€âš–ï¸' },
  { id: 'basic-concepts', title: 'æ¦‚è¿°', icon: 'ğŸ“' },
  { id: 'four-elements', title: 'å››å¤§è¦ç´ ', icon: 'ğŸ¯' },
  { id: 'element-land', title: 'è¦ç´ ä¸€ï¼šå®…åœ°', icon: 'ğŸï¸' },
  { id: 'element-building', title: 'è¦ç´ äºŒï¼šå»ºç‰©', icon: 'ğŸ¢' },
  { id: 'element-transaction', title: 'è¦ç´ ä¸‰ï¼šå–å¼•', icon: 'ğŸ’°' },
  { id: 'element-business', title: 'è¦ç´ å››ï¼šä¸š', icon: 'ğŸ“Š' },
  { id: 'exemptions', title: 'å…è®¸ä¾‹å¤–', icon: 'ğŸ”„' },
  { id: 'legal-updates', title: 'æ³•æ”¹æ­£', icon: 'âš–ï¸' },
  { id: 'quiz', title: 'ç»ƒä¹ é¢˜', icon: 'â“' }
]

// å…³é”®æœ¯è¯­æ•°æ®
const keyTerms = [
  {
    japanese: 'å®…åœ°å»ºç‰©å–å¼•æ¥­æ³•ï¼ˆãŸãã¡ãŸã¦ã‚‚ã®ã¨ã‚Šã²ããã‚‡ã†ã»ã†ï¼‰',
    chinese: 'å®…åœ°å»ºç­‘ç‰©äº¤æ˜“ä¸šæ³•',
    explanation: 'è§„èŒƒä¸åŠ¨äº§ä¸­ä»‹ä¸šåŠ¡çš„ä¸“é—¨æ³•å¾‹ï¼Œæ ¸å¿ƒç›®çš„æ˜¯ä¿æŠ¤æ¶ˆè´¹è€…æƒç›Š',
    example: 'å°±åƒæˆ¿äº§äº¤æ˜“çš„"äº¤é€šè§„åˆ™"ï¼Œç¡®ä¿äº¤æ˜“å®‰å…¨æœ‰åº'
  },
  {
    japanese: 'å…è¨±ï¼ˆã‚ã‚“ãã‚‡ï¼‰',
    chinese: 'è®¸å¯/æ‰§ç…§',
    explanation: 'ä»äº‹å®…å»ºä¸šçš„æ³•å®šèµ„æ ¼ï¼Œç±»ä¼¼ä¸­å›½çš„è¥ä¸šæ‰§ç…§',
    example: 'æ— å…è®¸ä»äº‹å®…å»ºä¸šå±äºè¿æ³•ï¼Œå°†å—å¤„ç½š'
  },
  {
    japanese: 'åª’ä»‹ãƒ»ä»£ç†ï¼ˆã°ã„ã‹ã„ãƒ»ã ã„ã‚Šï¼‰',
    chinese: 'å±…é—´ä¸ä»£ç†',
    explanation: 'å®…å»ºä¸šçš„ä¸¤ç§æ ¸å¿ƒä¸šåŠ¡å½¢æ€',
    example: 'ä¸­ä»‹æ’®åˆä¹°å–å±äº"åª’ä»‹"ï¼Œä»£å®¢æˆ·ç­¾çº¦å±äº"ä»£ç†"'
  },
  {
    japanese: 'è‡ªã‚‰è²¸å€Ÿï¼ˆã¿ãšã‹ã‚‰ãŸã„ã—ã‚ƒãï¼‰',
    chinese: 'è‡ªè¡Œç§Ÿèµ',
    explanation: 'è‡ªå·±ä½œä¸ºæˆ¿ä¸œå‡ºç§Ÿæˆ¿äº§çš„è¡Œä¸º',
    example: 'æˆ¿ä¸œç›´æ¥å‡ºç§Ÿè‡ªå·±çš„æˆ¿å­ç»™ç§Ÿå®¢ï¼Œä¸å±äºå®…å»ºä¸šæ³•å®šä¹‰çš„"å–å¼•"'
  },
  {
    japanese: 'ç”¨é€”åœ°åŸŸï¼ˆã‚ˆã†ã¨ã¡ã„ãï¼‰',
    chinese: 'ç”¨é€”åŒºåŸŸ',
    explanation: 'åŸå¸‚è§„åˆ’ä¸­è§„å®šçš„åœŸåœ°ä½¿ç”¨åŠŸèƒ½åˆ†åŒº',
    example: 'å¸‚è¡—åŒ–åŒºåŸŸã€å·¥ä¸šä¸“ç”¨åŒºåŸŸç­‰éƒ½å±äºç”¨é€”åœ°åŸŸ'
  }
]

// ç»ƒä¹ é¢˜æ•°æ®
const quizzes = [
  {
    question: 'å®…åœ°å»ºç‰©å–å¼•æ¥­ã¨ã¯ã€å®…åœ°åˆã¯å»ºç‰©ã®å–å¼•ã‚’æ¥­ã¨ã—ã¦è¡Œã†ã“ã¨ã‚’ã„ã†ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: true },
      { text: 'âœ• (èª¤ã‚Š)', correct: false }
    ],
    explanation: 'è¿™æ˜¯å®…å»ºä¸šçš„æ³•å®šå®šä¹‰ï¼Œå¿…é¡»åŒæ—¶æ»¡è¶³"å®…åœ°æˆ–å»ºç‰©"+"å–å¼•"+"ä¸š"ä¸‰ä¸ªè¦ç´ ã€‚'
  },
  {
    question: 'å€‹äººãŒè‡ªå·±å±…ä½ç”¨ã®ä½å®…ã‚’ä¸€åº¦ã ã‘å£²å´ã™ã‚‹å ´åˆã€å®…å»ºæ¥­ã®å…è¨±ãŒå¿…è¦ã§ã‚ã‚‹ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: false },
      { text: 'âœ• (èª¤ã‚Š)', correct: true }
    ],
    explanation: 'ä¸€æ¬¡æ€§å‡ºå”®è‡ªä½æˆ¿äº§ä¸å…·å¤‡"ä¸šåŠ¡"çš„åå¤æŒç»­æ€§ç‰¹å¾ï¼Œä¸éœ€è¦å…è®¸ã€‚'
  },
  {
    question: 'ä¿¡è¨—ä¼šç¤¾ãŒå®…å»ºæ¥­ã‚’è¡Œã†å ´åˆã€å…è¨±ã¯ä¸è¦ã§ã‚ã‚‹ãŒã€ãã®ä»–ã®å®…å»ºæ¥­æ³•ã®è¦å®šã¯é©ç”¨ã•ã‚Œã‚‹ã€‚',
    options: [
      { text: 'ã€‡ (æ­£ã—ã„)', correct: true },
      { text: 'âœ• (èª¤ã‚Š)', correct: false }
    ],
    explanation: 'ä¿¡è¨—å…¬å¸åªæ˜¯å…è®¸ä¸éœ€è¦ï¼Œä½†å…¶ä»–å®…å»ºä¸šæ³•è§„åˆ™ä»éœ€éµå®ˆã€‚'
  }
]

// ç­”é¢˜çŠ¶æ€
const selectedAnswers = ref(Array(quizzes.length).fill(null))
const showAnswerIndex = ref(null)
const showAnswers = ref(false)

// æ–¹æ³•
const scrollToSection = (sectionId) => {
  const element = document.getElementById(sectionId)
  if (element) {
    element.scrollIntoView({ behavior: 'smooth' })
  }
}

const selectAnswer = (index, answer) => {
  selectedAnswers.value[index] = answer
  // æ›´æ–°å­¦ä¹ è¿›åº¦
  updateProgress()
}

const toggleAnswer = (index) => {
  showAnswerIndex.value = showAnswerIndex.value === index ? null : index
}

const getCorrectAnswer = (quiz) => {
  const correctOption = quiz.options.find(option => option.correct)
  return correctOption ? correctOption.text : ''
}

const checkAllAnswers = () => {
  showAnswers.value = true
  updateProgress()
}

const resetQuiz = () => {
  selectedAnswers.value = Array(quizzes.length).fill(null)
  showAnswers.value = false
  showAnswerIndex.value = null
  userProgress.value = 0
}

const updateProgress = () => {
  const total = quizzes.length
  const correct = quizzes.reduce((count, quiz, index) => {
    const selected = selectedAnswers.value[index]
    if (!selected) return count
    
    const isCorrect = quiz.options.find(opt => opt.text === selected)?.correct || false
    return count + (isCorrect ? 1 : 0)
  }, 0)
  
  userProgress.value = Math.round((correct / total) * 100)
}

// è®°å½•å­¦ä¹ æ—¶é—´
const recordStudyTime = () => {
  const currentTime = new Date()
  const studyTime = Math.floor((currentTime - startTime.value) / 1000) // è½¬æ¢ä¸ºç§’
  learningStore.recordTopicStudyTime('business_meaning', studyTime)
}

// æ ‡è®°çŸ¥è¯†ç‚¹å®Œæˆ
const markTopicCompleted = () => {
  learningStore.completeTopic('business_meaning')
}

// åˆå§‹åŒ–
onMounted(() => {
  // ä»å­¦ä¹ å­˜å‚¨åŠ è½½è¿›åº¦
  const progress = learningStore.getTopicProgress('business_meaning')
  if (progress) {
    userProgress.value = progress.completionPercentage
  }
  
  // è®°å½•ç”¨æˆ·å¼€å§‹å­¦ä¹ è¿™ä¸ªçŸ¥è¯†ç‚¹
  learningStore.recordTopicStudyTime('business_meaning', 0)
  
  // è®¾ç½®å®šæ—¶å™¨ï¼Œæ¯30ç§’è®°å½•ä¸€æ¬¡å­¦ä¹ æ—¶é—´
  const timer = setInterval(() => {
    recordStudyTime()
  }, 30000)
  
  onUnmounted(() => {
    clearInterval(timer)
    // ç»„ä»¶å¸è½½æ—¶è®°å½•æ€»å­¦ä¹ æ—¶é—´
    recordStudyTime()
  })
})
</script>

<style scoped>
.business-meaning {
  min-height: 100vh;
  background-color: var(--bg);
}

.container {
  max-width: var(--max-width, 1200px);
  margin: 0 auto;
  padding: 0 var(--container-padding, 2rem);
}

/* ========= é¡µé¢å¤´éƒ¨ ========= */
.page-header {
  background: linear-gradient(135deg, rgba(42, 121, 96, 0.05), rgba(42, 121, 96, 0.02));
  border-radius: var(--radius);
  padding: 2rem;
  margin: 1rem 0 2rem;
  text-align: center;
}

.breadcrumb {
  font-size: 0.875rem;
  color: var(--muted);
  margin-bottom: 1rem;
}

.breadcrumb a {
  color: var(--primary);
  text-decoration: none;
}

.breadcrumb a:hover {
  text-decoration: underline;
}

.header-content h1 {
  font-size: 2.25rem;
  font-weight: 800;
  color: var(--primary-dark);
  margin-bottom: 1rem;
}

.header-content p {
  font-size: 1.125rem;
  color: var(--muted);
  max-width: 700px;
  margin: 0 auto 2rem;
  line-height: 1.6;
}

.header-stats {
  display: flex;
  justify-content: center;
  gap: 3rem;
  flex-wrap: wrap;
}

.stat-item {
  text-align: center;
}

.stat-number {
  display: block;
  font-size: 1.75rem;
  font-weight: 700;
  color: var(--primary);
  margin-bottom: 0.25rem;
}

.stat-label {
  font-size: 0.875rem;
  color: var(--muted);
}

/* ========= ä¸»è¦å†…å®¹åŒºåŸŸ ========= */
.main-content {
  margin: 2rem 0;
}

/* ========= å¿«é€Ÿå¯¼èˆª ========= */
.quick-nav {
  background: var(--card-bg);
  border-radius: var(--radius);
  padding: 1.5rem;
  margin-bottom: 2rem;
  box-shadow: var(--shadow);
}

.quick-nav h3 {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--primary-dark);
  margin-bottom: 1rem;
}

.nav-links {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 0.75rem;
}

.nav-link {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  background: var(--bg);
  border-radius: 8px;
  text-decoration: none;
  color: var(--text);
  transition: all 0.2s ease;
  border: none;
  cursor: pointer;
  font-family: inherit;
  font-size: 0.875rem;
}

.nav-link:hover {
  background: var(--primary-light);
  color: var(--primary-dark);
  transform: translateY(-2px);
}

.nav-icon {
  font-size: 1.125rem;
}

/* ========= å­¦ä¹ ç›®æ ‡ ========= */
.learning-goals {
  background: var(--card-bg);
  border-radius: var(--radius);
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: var(--shadow);
}

.learning-goals h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--primary-dark);
  margin-bottom: 1.5rem;
}

.learning-goals ul {
  padding-left: 1.5rem;
}

.learning-goals li {
  margin-bottom: 0.75rem;
  line-height: 1.6;
}

/* ========= å…³é”®æœ¯è¯­ ========= */
.key-terms {
  margin-bottom: 2rem;
}

.key-terms h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--primary-dark);
  margin-bottom: 1.5rem;
}

.terms-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
}

.term-card {
  background: var(--card-bg);
  border-radius: var(--radius);
  padding: 1.5rem;
  box-shadow: var(--shadow);
  border-left: 4px solid var(--primary);
}

.term-japanese {
  font-weight: bold;
  color: var(--primary);
  margin-bottom: 0.5rem;
  font-size: 0.875rem;
}

.term-chinese {
  font-weight: bold;
  color: var(--text);
  margin-bottom: 1rem;
  font-size: 1.125rem;
}

.term-explanation {
  margin-bottom: 1rem;
  line-height: 1.6;
}

.term-example {
  background: #eef7ff;
  padding: 1rem;
  border-radius: 5px;
  font-style: italic;
  border-left: 3px solid #a8c6ff;
  font-size: 0.875rem;
  line-height: 1.5;
}

/* ========= å†…å®¹åŒºå— ========= */
.content-section {
  background: var(--card-bg);
  border-radius: var(--radius);
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: var(--shadow);
}

.content-section h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--primary-dark);
  margin-bottom: 1.5rem;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid var(--border);
}

.content-section h3 {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--primary-dark);
  margin: 1.5rem 0 1rem;
}

.content-section p {
  line-height: 1.6;
  margin-bottom: 1rem;
}

.content-section ul, .content-section ol {
  padding-left: 1.5rem;
  margin-bottom: 1.5rem;
}

.content-section li {
  margin-bottom: 0.5rem;
  line-height: 1.6;
}

/* ========= å››å¤§è¦ç´ å›¾ç¤º ========= */
.elements-diagram {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-wrap: wrap;
  gap: 1rem;
  margin: 2rem 0;
}

.element-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  background: var(--primary-light);
  border-radius: var(--radius);
  min-width: 150px;
}

.element-number {
  background: var(--primary);
  color: white;
  width: 2rem;
  height: 2rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
}

.element-content h3 {
  margin: 0 0 0.5rem 0;
  font-size: 1rem;
}

.element-content p {
  margin: 0;
  font-size: 0.875rem;
  color: var(--muted);
}

.element-connector {
  font-size: 1.5rem;
  font-weight: bold;
  color: var(--primary);
}

.element-result {
  padding: 1rem;
  background: var(--primary);
  color: white;
  border-radius: var(--radius);
  font-weight: bold;
}

/* ========= æ¡ˆä¾‹å’Œé‡ç‚¹ç›’å­ ========= */
.case-scenario {
  background: #f0f7ff;
  border-radius: var(--radius);
  padding: 1.5rem;
  margin: 1.5rem 0;
  border-left: 4px solid var(--primary);
  line-height: 1.6;
}

.highlight-box {
  background: #fff9e6;
  border: 1px solid #ffcc00;
  border-radius: var(--radius);
  padding: 1.5rem;
  margin: 1.5rem 0;
  line-height: 1.6;
}

.highlight-box strong {
  color: #92400e;
}

/* ========= è¡¨æ ¼æ ·å¼ ========= */
.table-container {
  overflow-x: auto;
  margin: 1.5rem 0;
}

.comparison-table {
  width: 100%;
  border-collapse: collapse;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  border-radius: 8px;
  overflow: hidden;
}

.comparison-table th, .comparison-table td {
  border: 1px solid var(--border);
  padding: 12px;
  text-align: left;
}

.comparison-table th {
  background-color: var(--primary);
  color: white;
  font-weight: 600;
  text-align: center;
}

.comparison-table tr:nth-child(even) {
  background-color: #f8f9fa;
}

.comparison-table tr:hover {
  background-color: #e9ecef;
}

.comparison-table .required {
  color: #28a745;
  font-weight: bold;
  text-align: center;
}

.comparison-table .not-required {
  color: #dc3545;
  font-weight: bold;
  text-align: center;
}

/* ========= ç»ƒä¹ é¢˜æ ·å¼ ========= */
.quiz-section {
  background: var(--card-bg);
  border-radius: var(--radius);
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: var(--shadow);
}

.quiz-section h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--primary-dark);
  margin-bottom: 1.5rem;
}

.quiz-item {
  background: #f9f9f9;
  border-radius: var(--radius);
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
}

.quiz-question {
  font-weight: bold;
  margin-bottom: 1.25rem;
  font-size: 1.1rem;
  line-height: 1.5;
}

.quiz-options {
  display: flex;
  gap: 1rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
}

.quiz-option {
  display: flex;
  align-items: center;
  cursor: pointer;
  padding: 0.75rem 1rem;
  border: 2px solid #ddd;
  border-radius: 5px;
  transition: all 0.3s ease;
  background: white;
  min-width: 120px;
  justify-content: center;
}

.quiz-option:hover {
  background: #f0f0f0;
}

.quiz-option.selected {
  border-color: var(--primary);
  background: var(--primary-light);
}

.quiz-option.correct {
  border-color: #28a745;
  background: #e7f7e7;
  color: #2e7d32;
}

.quiz-option.incorrect {
  border-color: #dc3545;
  background: #ffe7e7;
  color: #c62828;
}

.answer-btn {
  background: var(--primary);
  color: white;
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 5px;
  cursor: pointer;
  transition: background 0.3s ease;
  margin-right: 0.5rem;
  font-size: 0.875rem;
}

.answer-btn:hover {
  background: var(--primary-dark);
}

.answer-explanation {
  margin-top: 1rem;
  padding: 1rem;
  background: #f5f5f5;
  border-radius: 5px;
  line-height: 1.6;
}

.quiz-actions {
  display: flex;
  gap: 1rem;
  justify-content: center;
  margin-top: 2rem;
  flex-wrap: wrap;
}

/* ========= æŒ‰é’®æ ·å¼ ========= */
.btn {
  padding: 0.75rem 1.5rem;
  border-radius: 8px;
  font-size: 0.875rem;
  font-weight: 600;
  text-align: center;
  text-decoration: none;
  transition: all 0.3s ease;
  border: none;
  cursor: pointer;
  font-family: inherit;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
}

.btn-primary {
  background: var(--primary);
  color: white;
}

.btn-primary:hover {
  background: var(--primary-dark);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(42, 121, 96, 0.3);
}

.btn-outline {
  background: transparent;
  color: var(--primary);
  border: 1px solid var(--primary);
}

.btn-outline:hover {
  background: var(--primary-light);
  transform: translateY(-2px);
}

/* ========= åº•éƒ¨è¡ŒåŠ¨æŒ‰é’® ========= */
.action-buttons {
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin-top: 3rem;
  padding-top: 2rem;
  border-top: 1px solid var(--border);
  flex-wrap: wrap;
}

.action-button {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  background: linear-gradient(135deg, var(--primary), var(--primary-dark));
  color: white;
  text-decoration: none;
  border-radius: var(--radius);
  font-weight: 600;
  transition: all 0.3s ease;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.action-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
  background: linear-gradient(135deg, var(--primary-dark), #164536);
}

.action-button.video {
  background: linear-gradient(135deg, #2a7960, #205e4a);
}

.action-button.video:hover {
  background: linear-gradient(135deg, #205e4a, #164536);
}

/* ========= å“åº”å¼è®¾è®¡ ========= */
@media (max-width: 768px) {
  .container {
    padding: 0 1rem;
  }
  
  .page-header {
    padding: 1.5rem 1rem;
  }
  
  .header-content h1 {
    font-size: 1.75rem;
  }
  
  .header-stats {
    gap: 1.5rem;
  }
  
  .stat-number {
    font-size: 1.5rem;
  }
  
  .nav-links {
    grid-template-columns: 1fr;
  }
  
  .terms-grid {
    grid-template-columns: 1fr;
  }
  
  .elements-diagram {
    flex-direction: column;
  }
  
  .element-connector {
    transform: rotate(90deg);
  }
  
  .quiz-options {
    flex-direction: column;
  }
  
  .quiz-option {
    min-width: auto;
  }
  
  .action-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .action-button {
    width: 100%;
    max-width: 300px;
    justify-content: center;
  }
  
  .content-section, 
  .learning-goals, 
  .quiz-section, 
  .quick-nav {
    padding: 1.5rem;
  }
}

@media (max-width: 480px) {
  .header-stats {
    flex-direction: column;
    gap: 1rem;
  }
  
  .quiz-actions {
    flex-direction: column;
  }
  
  .btn {
    width: 100%;
    justify-content: center;
  }
}
</style>